import{a9 as I,l as u,G as c,o as b,e as B,w as a,c as n,b as l,m as d,a as M,j as T,t as R,O as H,F as J,L as q,ac as Q,ad as W}from"./vendor-367eb1b4.js";import{a as F}from"./chunk-bin-ui-next-69753c01.js";import"./chunk-brace-6f23dcf5.js";const X={name:"FuncDynamicCode",setup(){const g=u([{key:"name",value:"Akko pc75b plus"},{key:"price",value:549},{key:"num",value:2},{key:"discount",value:.98},{key:"breaks",value:30}]),o=u("return `${name} \u5546\u54C1 \uFF0C\u5355\u4EF7${price} \uFF0C\u6570\u91CF${num} \uFF0C\u603B\u4EF7: ${price*num}`;"),S=u(null),e=u(""),A=u(null),x=u([{name:"Akko pc75b plus",price:549,num:2,discount:1,total:null},{name:"Ciy 68 test",price:79,num:4,discount:1,total:null},{name:"Ganss HS87T",price:398,num:2,discount:.95,total:null},{name:"\u8FBE\u5C14\u4F18A84",price:629,num:2,discount:.9,total:null},{name:"FL cmk87",price:629,num:6,discount:.95,total:null},{name:"\u603B\u8BA1",price:0,num:0,discount:0,total:null}]),k=u(`const { price, num, discount } = goods;
 return price * num * discount;`),_=u(null),p=u(`{
  "name": "\u5F20\u4E09",
  "phone": "",
  "age": 17,
  "address": "\u6C5F\u82CF\u7701\u5F90\u5DDE\u5E02\u4E91\u9F99\u533A"
}`),y=u(["phone","age"]),f=u(""),V=u(!1),C=u(`const validatPhone = phone.length > 0;
const validatAge = age > 18 && age < 35;
if(validatPhone && validatAge){
  return {
    result: true,
    message: '\u6821\u9A8C\u901A\u8FC7'
  };
} else {
  let message = '';
  if(!validatPhone) message += '[\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A]';
  if(!validatAge) message += '[\u5E74\u9F84\u5FC5\u987B\u572818~35\u5C81\u4E4B\u95F4]';
  return{
    result: false,
    message
  };
}`),v=u({});function O(s,i){s.dataTransfer.setData("fieldName",i)}function D(s){const i=s.dataTransfer.getData("fieldName");g.value.findIndex(m=>m.key===i)===-1&&g.value.push({key:i,value:""}),console.log(i)}function N(s){s.preventDefault()}function P(){try{const s=S.value.getFunction(),i=g.value.map(r=>r.key!=="name"?Number(r.value):r.value);console.log(i),console.log(s);const m=s(...i);console.log(m),F.success("\u51FD\u6570\u6267\u884C\u6210\u529F\uFF01"),e.value=m}catch{e.value="",F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}function E({row:s,column:i,rowIndex:m,columnIndex:r}){if(m===x.value.length-1&&r===0)return[1,4];if(m===x.value.length-1&&r>0&&r<4)return[0,0]}function j(){try{const s=A.value.getFunction(),i=x.value;let m=0;for(let r=0;r<i.length-1;r++){const h=+s(i[r]).toFixed(2);m+=h,i[r].total=h}i[i.length-1].total=m,F.success("\u8BA1\u7B97\u6210\u529F\uFF01")}catch{F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}function t(){V.value=!0,f.value=""}function U(){const s=y.value;s.indexOf(f.value)===-1&&s.push(f.value),z()}function z(){V.value=!1,f.value=""}function K(s){y.value.splice(y.value.indexOf(s),1)}function L(){try{const s=_.value.getFunction(),i=[],m=y.value;for(let h=0;h<m.length;h++){const G=JSON.parse(p.value)[m[h]];i.push(G)}const r=s(...i);v.value={type:r.result?"success":"error",message:r.message},F(v.value)}catch{e.value="",F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}return{fieldsEditRef:S,goodsEditRef:A,fieldsMapping:g,fieldsFuncBody:o,fieldsTitle:e,dragField:O,dropField:D,allowDrop:N,runTest1:P,runTest2:j,columns:[{title:"\u5546\u54C1\u540D\u79F0",key:"name"},{title:"\u5546\u54C1\u5355\u4EF7",key:"price"},{title:"\u5546\u54C1\u6570\u91CF",key:"num"},{title:"\u6298\u6263",key:"discount"},{title:"\u5408\u8BA1",key:"total"}],goodsData:x,goodsFuncBody:k,handleSpan:E,formObjStr:p,formParams:y,formAdded:V,formField:f,formFuncBody:C,formEditRef:_,formResult:v,addOne:t,blurAdd:U,blurCancel:z,handleCloseTag:K,runTest3:L}}},w=g=>(Q("data-v-af4f9f33"),g=g(),W(),g),Y=w(()=>l("div",null,"\u52A8\u6001\u7F16\u5199\u6267\u884C\u51FD\u6570\u4F53\uFF0C\u6267\u884C\u83B7\u53D6\u8FD4\u56DE\u6570\u636E\u3002",-1)),Z={flex:""},$={class:"p10",style:{width:"40%"}},ee=w(()=>l("p",null,"\u9009\u62E9\u5B57\u6BB5\u62D6\u5165\u914D\u7F6E\u533A\u57DF",-1)),te=w(()=>l("p",null,"\u586B\u5199\u914D\u7F6E\uFF0C\u53F3\u4FA7\u4F1A\u81EA\u52A8\u62FC\u63A5\u51FD\u6570\u53C2\u6570\u3002",-1)),ne={key:0,class:"tip"},oe={class:"p10",style:{width:"60%"}},le=w(()=>l("p",null,"\u51FD\u6570\u4F53\u5165\u53C2\u6839\u636E\u914D\u7F6E\u4F20\u5165\uFF0C\u5185\u90E8\u53EF\u76F4\u63A5\u4F7F\u7528\uFF0C\u8F93\u5165\u81EA\u5B9A\u4E49\u8BA1\u7B97\u51FD\u6570\u5E76\u8FD4\u56DE\u5373\u53EF\u3002",-1)),ae=w(()=>l("p",null,"\u51FD\u6570\u4F53\u5185\u4EE3\u7801\u9075\u5FAAjs\u7F16\u5199\u89C4\u8303\uFF0C\u5185\u6709\u4EE3\u7801\u63D0\u793A\uFF0C\u5982\u4EE3\u7801\u7F16\u5199\u9519\u8BEF\u5219\u6267\u884C\u8BA1\u7B97\u65F6\u4F1A\u62A5\u9519\u3002",-1)),se=w(()=>l("div",{class:"example"},[d(" \u793A\u4F8B\u4EE3\u7801\uFF1A "),l("p",null,"\u62FC\u63A5\u5B57\u7B26\u4E32\uFF1A"),l("p",{style:{"padding-left":"8px"}},"return `${name} \u5546\u54C1 \uFF0C\u5355\u4EF7${price} \uFF0C\u6570\u91CF${num} \uFF0C\u603B\u4EF7: ${price*num}`;"),l("p",null,"\u8FD4\u56DE\u5E03\u5C14\u503C\uFF1A"),l("p",{style:{"padding-left":"8px"}},"return (price * num) * discount >= 200"),l("p",null,"\u590D\u6742\u8BA1\u7B97\u903B\u8F91\uFF1A"),l("p",{style:{"padding-left":"8px"}},"// \u5982\u679C\u6709\u6298\u6263\u5219\u8BA1\u7B97\u6298\u6263\u540E\u603B\u4EF7"),l("p",{style:{"padding-left":"8px"}},"const total = discount? price * num * discount : price * num;"),l("p",{style:{"padding-left":"8px"}},"// \u5224\u65AD\u662F\u5426\u7B26\u5408\u6EE1\u51CF\u653F\u7B56\uFF0C\u5982\u6EE1200-30"),l("p",{style:{"padding-left":"8px"}},"const totalPrice = total >= 200&&breaks ? total - breaks : total;"),l("p",{style:{"padding-left":"8px"}},"// \u8F93\u51FA\u6700\u7EC8\u7ED3\u679C"),l("p",{style:{"padding-left":"8px"}},"return `\u60A8\u8D2D\u4E70\u4E86${name}\uFF0C\u5355\u4EF7${price}\uFF0C\u6570\u91CF${num}\uFF0C\u6700\u7EC8\u4EF7\u683C: ${totalPrice}`")],-1)),de={flex:""},ie={class:"p10",style:{width:"70%"}},re={class:"p10",style:{width:"30%"}},ue={flex:""},ce={class:"p10",style:{width:"30%"}},me={class:"p10",style:{width:"30%"}},pe={key:0,class:"p10",style:{width:"30%"}};function fe(g,o,S,e,A,x){const k=c("b-alert"),_=c("b-tag"),p=c("b-divider"),y=c("key-value-mapping"),f=c("b-button"),V=c("b-icon"),C=c("func-body-editor"),v=c("b-collapse-wrap"),O=c("b-table"),D=c("title-bar"),N=c("b-ace-editor"),P=c("b-input"),E=c("b-space"),j=c("page-container");return b(),B(j,null,{desc:a(()=>[Y]),default:a(()=>[n(v,{title:"\u57FA\u7840\u52A8\u6001\u7F16\u7801",shadow:"none",class:"mb-16"},{default:a(()=>[l("div",Z,[l("div",$,[n(k,{"show-icon":""},{desc:a(()=>[ee,te]),default:a(()=>[d(" \u52A8\u6001\u6307\u5B9A\u5B57\u6BB5\u540D\u79F0 ")]),_:1}),l("div",null,[d(" \u5B57\u6BB5\u5019\u9009 "),n(_,{type:"primary",draggable:"true",onDragstart:o[0]||(o[0]=t=>e.dragField(t,"name"))},{default:a(()=>[d("name")]),_:1}),n(_,{type:"info",draggable:"true",onDragstart:o[1]||(o[1]=t=>e.dragField(t,"price"))},{default:a(()=>[d("price")]),_:1}),n(_,{type:"success",draggable:"true",onDragstart:o[2]||(o[2]=t=>e.dragField(t,"num"))},{default:a(()=>[d("num")]),_:1}),n(_,{type:"warning",draggable:"true",onDragstart:o[3]||(o[3]=t=>e.dragField(t,"discount"))},{default:a(()=>[d("discount")]),_:1}),n(_,{type:"danger",draggable:"true",onDragstart:o[4]||(o[4]=t=>e.dragField(t,"breaks"))},{default:a(()=>[d("breaks")]),_:1})]),n(p,{style:{margin:"10px 0"}}),l("div",{class:"drop-wrapper",onDrop:o[6]||(o[6]=t=>e.dropField(t)),onDragover:o[7]||(o[7]=t=>e.allowDrop(t))},[e.fieldsMapping.length===0?(b(),M("p",ne,"\u62D6\u52A8\u5B57\u6BB5\u5230\u6B64\u5904\u8FDB\u884C\u914D\u7F6E")):T("",!0),n(y,{modelValue:e.fieldsMapping,"onUpdate:modelValue":o[5]||(o[5]=t=>e.fieldsMapping=t),"show-add":!1},null,8,["modelValue"])],32),n(p,{style:{margin:"10px 0"}}),n(f,{type:"primary",onClick:e.runTest1},{default:a(()=>[d("\u6267\u884C\u8BA1\u7B97")]),_:1},8,["onClick"]),n(p,{style:{margin:"10px 0"}}),e.fieldsTitle?(b(),B(k,{key:0,type:"success","show-icon":""},{desc:a(()=>[d(R(e.fieldsTitle),1)]),default:a(()=>[d(" \u6267\u884C\u8BA1\u7B97\u6210\u529F ")]),_:1})):T("",!0)]),l("div",oe,[n(k,{"show-icon":""},{icon:a(()=>[n(V,{name:"codelibrary"})]),desc:a(()=>[le,ae]),default:a(()=>[d(" \u8BA1\u7B97\u51FD\u6570 ")]),_:1}),n(C,{ref:"fieldsEditRef",modelValue:e.fieldsFuncBody,"onUpdate:modelValue":o[8]||(o[8]=t=>e.fieldsFuncBody=t),augments:e.fieldsMapping.map(t=>t.key)},null,8,["modelValue","augments"]),n(p,{style:{margin:"10px 0"}}),se])])]),_:1}),n(v,{title:"\u8868\u683C\u7C7B\u65B9\u5F0F\u8C03\u7528",shadow:"none",class:"mb-16"},{default:a(()=>[l("div",de,[l("div",ie,[n(O,{columns:e.columns,data:e.goodsData,border:"","merge-method":e.handleSpan,size:"small"},null,8,["columns","data","merge-method"])]),l("div",re,[n(D,{title:"\u5546\u54C1\u8BA1\u7B97\u51FD\u6570","tip-pos":"left"}),d(" tip: \u8FD9\u91CC\u91C7\u7528\u5BF9\u8C61\u4F20\u5165\u7684\u65B9\u5F0F\u8FDB\u884C\u4F20\u53C2 "),n(C,{ref:"goodsEditRef",modelValue:e.goodsFuncBody,"onUpdate:modelValue":o[9]||(o[9]=t=>e.goodsFuncBody=t),augments:["goods"]},null,8,["modelValue"]),n(p,{style:{margin:"10px 0"}}),n(f,{type:"primary",onClick:e.runTest2},{default:a(()=>[d("\u6267\u884C\u8BA1\u7B97")]),_:1},8,["onClick"])])])]),_:1}),n(v,{title:"\u7528\u4E8E\u6821\u9A8C\u51FD\u6570",shadow:"none",class:"mb-16"},{default:a(()=>[l("div",ue,[l("div",ce,[n(N,{modelValue:e.formObjStr,"onUpdate:modelValue":o[10]||(o[10]=t=>e.formObjStr=t)},null,8,["modelValue"])]),l("div",me,[n(D,{title:"\u6821\u9A8C\u51FD\u6570","tip-pos":"left",class:"mb-10"}),n(E,null,{default:a(()=>[n(f,{size:"mini",onClick:e.addOne},{default:a(()=>[d("\u65B0\u589E\u6821\u9A8C\u5B57\u6BB5")]),_:1},8,["onClick"]),(b(!0),M(J,null,H(e.formParams,t=>(b(),B(_,{key:t,type:"primary",closable:"",onClose:U=>e.handleCloseTag(t)},{default:a(()=>[d(R(t),1)]),_:2},1032,["onClose"]))),128)),e.formAdded?(b(),B(P,{key:0,style:{width:"100px"},size:"mini",modelValue:e.formField,"onUpdate:modelValue":o[11]||(o[11]=t=>e.formField=t),onKeydown:q(e.blurAdd,["enter"]),onBlur:e.blurCancel},null,8,["modelValue","onKeydown","onBlur"])):T("",!0)]),_:1}),n(p,{style:{margin:"10px 0"}}),n(C,{ref:"formEditRef",modelValue:e.formFuncBody,"onUpdate:modelValue":o[12]||(o[12]=t=>e.formFuncBody=t),augments:e.formParams,height:"240"},null,8,["modelValue","augments"]),n(p,{style:{margin:"10px 0"}}),n(f,{type:"primary",onClick:e.runTest3},{default:a(()=>[d("\u6267\u884C\u6821\u9A8C")]),_:1},8,["onClick"])]),e.formResult.type?(b(),M("div",pe,[n(k,{type:e.formResult.type,"show-icon":""},{desc:a(()=>[d(R(e.formResult.message),1)]),default:a(()=>[d(R(e.formResult.type==="success"?"\u9A8C\u8BC1\u6210\u529F":"\u9A8C\u8BC1\u5931\u8D25")+" ",1)]),_:1},8,["type"])])):T("",!0)])]),_:1})]),_:1})}const be=I(X,[["render",fe],["__scopeId","data-v-af4f9f33"]]);export{be as default};
