var R=Object.defineProperty;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var j=(i,t,n)=>t in i?R(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,B=(i,t)=>{for(var n in t||(t={}))A.call(t,n)&&j(i,n,t[n]);if(S)for(var n of S(t))P.call(t,n)&&j(i,n,t[n]);return i};import{u as J}from"./useTable-50b7f652.js";import{k as K}from"./index-2b55dcae.js";import{B as W}from"./index-ab3efe55.js";import{P as G}from"./page-wrapper-e575f616.js";import{A as H}from"./index-2b74082e.js";import{u as I}from"./useForm-bc561251.js";import{a as L}from"./chunk-bin-ui-next-f60b2cbe.js";import{a4 as O,y as Q,f as D,n as X,J as r,o as y,c as F,w as o,u as l,A as M,K as Y,F as Z,q as m,t as $,B as w,a as ee}from"./vendor-b86c3d35.js";import"./chunk-brace-f547fd93.js";function oe(){return K({url:"/role/list",method:"get"})}const le={name:"Role",components:{PageWrapper:G,ActionButton:H,BaseTable:W},setup(){const i=Q({page:1,size:10,roleName:"",status:""}),t=D([]),n=D({}),{loading:e,list:q,total:z,getListData:s,pageChange:d,pageSizeChange:V}=J(oe,i),{formRef:v,editStatus:c,pageStatus:_,editLoading:f,openCreate:g,openEdit:C,backNormal:b,submitForm:h,resetForm:x,setBtnLoading:k,modalVisible:N}=I();X(()=>q.value,p=>{t.value=p}),s();function a(){n.value={roleName:"",roleCode:"",status:"1"},g()}function u(p){n.value=B({},p),C()}function T(){n.value={},b()}function U(){L.success("\u5220\u9664\u6210\u529F\uFF01"),s()}function E(){h(()=>{k(!0);const p=_.value;setTimeout(()=>{L.success(`${p.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),k(!1),b(),s()},1e3)})}return{statusMap:{0:"\u7981\u7528",1:"\u542F\u7528"},columns:[{title:"\u89D2\u8272\u540D\u79F0",key:"roleName"},{title:"\u89D2\u8272\u7F16\u7801",key:"roleCode"},{title:"\u72B6\u6001",slot:"status"},{title:"\u521B\u5EFA\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],formRef:v,role:n,editStatus:c,pageStatus:_,editLoading:f,openCreate:g,openEdit:C,backNormal:b,submitForm:h,resetForm:x,ruleValidate:{roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],roleCode:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]},query:i,loading:e,total:z,copyList:t,getListData:s,pageChange:d,pageSizeChange:V,modalVisible:N,handleCreate:a,handleCancel:T,handleEdit:u,handleSubmit:E,handleDelete:U}}},te=m("\u91CD\u7F6E"),ae=m("\u67E5\u8BE2"),ne=m("\u65B0\u589E"),re={key:0},ie=w("span",null,"\u542F\u7528",-1),se=w("span",null,"\u7981\u7528",-1),de=m("\u53D6 \u6D88"),ce=m("\u786E \u5B9A");function ue(i,t,n,e,q,z){const s=r("b-input"),d=r("b-form-item"),V=r("b-option"),v=r("b-select"),c=r("b-button"),_=r("b-form"),f=r("action-button"),g=r("b-divider"),C=r("b-table"),b=r("b-page"),h=r("base-table"),x=r("b-switch"),k=r("b-modal"),N=r("page-wrapper");return y(),F(N,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:o(()=>[l(h,null,{filter:o(()=>[l(_,{"label-width":"95px"},{default:o(()=>[l(d,{label:"\u89D2\u8272\u540D\u79F0"},{default:o(()=>[l(s,{modelValue:e.query.roleName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.query.roleName=a),clearable:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[l(v,{modelValue:e.query.status,"onUpdate:modelValue":t[1]||(t[1]=a=>e.query.status=a),clearable:""},{default:o(()=>[(y(!0),M(Z,null,Y(e.statusMap,(a,u)=>(y(),F(V,{key:u,label:a,value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(d,null,{default:o(()=>[l(c,null,{default:o(()=>[te]),_:1}),l(c,{type:"primary",loading:e.loading,onClick:e.getListData},{default:o(()=>[ae]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),action:o(()=>[l(c,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:o(()=>[ne]),_:1},8,["onClick"])]),page:o(()=>[l(b,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:o(()=>[l(C,{columns:e.columns,data:e.copyList,loading:e.loading,border:""},{status:o(({row:a})=>[m($(e.statusMap[a.status]),1)]),action:o(({row:a})=>[l(f,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:u=>e.handleEdit(a)},null,8,["onClick"]),l(g,{type:"vertical"}),l(f,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:u=>e.handleDelete(a)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1}),l(k,{"model-value":e.modalVisible,title:`${e.pageStatus.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,onClosed:e.handleCancel},{footer:o(()=>[w("div",null,[l(c,{onClick:e.handleCancel},{default:o(()=>[de]),_:1},8,["onClick"]),l(c,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:o(()=>[ce]),_:1},8,["loading","onClick"])])]),default:o(()=>[e.modalVisible?(y(),M("div",re,[l(_,{ref:"formRef",model:e.role,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:o(()=>[l(d,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:o(()=>[l(s,{modelValue:e.role.roleName,"onUpdate:modelValue":t[2]||(t[2]=a=>e.role.roleName=a),placeholder:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u89D2\u8272\u7F16\u7801",prop:"roleCode"},{default:o(()=>[l(s,{modelValue:e.role.roleCode,"onUpdate:modelValue":t[3]||(t[3]=a=>e.role.roleCode=a),placeholder:"\u8F93\u5165\u89D2\u8272\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),l(d,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[l(x,{size:"large",modelValue:e.role.status,"onUpdate:modelValue":t[4]||(t[4]=a=>e.role.status=a),"true-value":"1","false-value":"0"},{open:o(()=>[ie]),close:o(()=>[se]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])):ee("",!0)]),_:1},8,["model-value","title","onClosed"])]),_:1})}var Ve=O(le,[["render",ue]]);export{Ve as default};
