var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{u as r}from"./useTable-a1c93573.js";import{k as n}from"./index-e9e85ee6.js";import{_ as i}from"./index-005081f1.js";import{_ as u}from"./page-wrapper-d233775a.js";import{_ as s}from"./index-ee15fc0f.js";import{u as d}from"./useForm-45713536.js";import{a as m}from"./chunk-bin-ui-next-169a0b5b.js";import{y as p,f as c,n as f,J as b,o as g,c as C,w as h,u as y,A as k,K as _,F as v,q as V,t as w,B as j,a as S}from"./vendor-fe3131ae.js";import"./chunk-brace-7f859248.js";function q(){return n({url:"/role/list",method:"get"})}const z={name:"Role",components:{PageWrapper:u,ActionButton:s,BaseTable:i},setup(){const e=p({page:1,size:10,roleName:"",status:""}),n=c([]),i=c({}),{loading:u,list:s,total:b,getListData:g,pageChange:C,pageSizeChange:h}=r(q,e),{formRef:y,editStatus:k,pageStatus:_,editLoading:v,openCreate:V,openEdit:w,backNormal:j,submitForm:S,resetForm:z,setBtnLoading:N,modalVisible:x}=d();return f((()=>s.value),(e=>{n.value=e})),g(),{statusMap:{0:"禁用",1:"启用"},columns:[{title:"角色名称",key:"roleName"},{title:"角色编码",key:"roleCode"},{title:"状态",slot:"status"},{title:"创建日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],formRef:y,role:i,editStatus:k,pageStatus:_,editLoading:v,openCreate:V,openEdit:w,backNormal:j,submitForm:S,resetForm:z,ruleValidate:{roleName:[{required:!0,message:"角色名称必填",trigger:"blur"}],roleCode:[{required:!0,message:"角色编码必填",trigger:"blur"}]},query:e,loading:u,total:b,copyList:n,getListData:g,pageChange:C,pageSizeChange:h,modalVisible:x,handleCreate:function(){i.value={roleName:"",roleCode:"",status:"1"},V()},handleCancel:function(){i.value={},j()},handleEdit:function(e){i.value=((e,r)=>{for(var n in r||(r={}))l.call(r,n)&&o(e,n,r[n]);if(a)for(var n of a(r))t.call(r,n)&&o(e,n,r[n]);return e})({},e),w()},handleSubmit:function(){S((()=>{N(!0);const e=_.value;setTimeout((()=>{m.success((e.isCreate?"新增":"修改")+"成功！"),N(!1),j(),g()}),1e3)}))},handleDelete:function(){m.success("删除成功！"),g()}}}},N=V("重置"),x=V("查询"),L=V("新增"),D={key:0},F=j("span",null,"启用",-1),O=j("span",null,"禁用",-1),E=V("取 消"),U=V("确 定");z.render=function(e,a,l,t,o,r){const n=b("b-input"),i=b("b-form-item"),u=b("b-option"),s=b("b-select"),d=b("b-button"),m=b("b-form"),p=b("action-button"),c=b("b-divider"),f=b("b-table"),q=b("b-page"),z=b("base-table"),B=b("b-switch"),M=b("b-modal"),P=b("page-wrapper");return g(),C(P,{desc:"页面内容为Mock数据，仅作示例使用。"},{default:h((()=>[y(z,null,{filter:h((()=>[y(m,{"label-width":"95px"},{default:h((()=>[y(i,{label:"角色名称"},{default:h((()=>[y(n,{modelValue:t.query.roleName,"onUpdate:modelValue":a[0]||(a[0]=e=>t.query.roleName=e),clearable:""},null,8,["modelValue"])])),_:1}),y(i,{label:"角色状态"},{default:h((()=>[y(s,{modelValue:t.query.status,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.status=e),clearable:""},{default:h((()=>[(g(!0),k(v,null,_(t.statusMap,((e,a)=>(g(),C(u,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(i,null,{default:h((()=>[y(d,null,{default:h((()=>[N])),_:1}),y(d,{type:"primary",loading:t.loading,onClick:t.getListData},{default:h((()=>[x])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),action:h((()=>[y(d,{type:"primary",icon:"plus-circle",onClick:t.handleCreate},{default:h((()=>[L])),_:1},8,["onClick"])])),page:h((()=>[y(q,{total:t.total,current:t.query.page,"page-size":t.query.size,"show-sizer":"","show-total":"",onChange:t.pageChange,onSizeChange:t.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])])),default:h((()=>[y(f,{columns:t.columns,data:t.copyList,loading:t.loading,border:""},{status:h((({row:e})=>[V(w(t.statusMap[e.status]),1)])),action:h((({row:e})=>[y(p,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:a=>t.handleEdit(e)},null,8,["onClick"]),y(c,{type:"vertical"}),y(p,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:a=>t.handleDelete(e)},null,8,["onClick"])])),_:1},8,["columns","data","loading"])])),_:1}),y(M,{"model-value":t.modalVisible,title:(t.pageStatus.isCreate?"新增":"修改")+"角色",onClosed:t.handleCancel},{footer:h((()=>[j("div",null,[y(d,{onClick:t.handleCancel},{default:h((()=>[E])),_:1},8,["onClick"]),y(d,{type:"primary",loading:t.editLoading,onClick:t.handleSubmit},{default:h((()=>[U])),_:1},8,["loading","onClick"])])])),default:h((()=>[t.modalVisible?(g(),k("div",D,[y(m,{ref:"formRef",model:t.role,rules:t.ruleValidate,"label-width":"100px","label-suffix":":"},{default:h((()=>[y(i,{label:"角色名称",prop:"roleName"},{default:h((()=>[y(n,{modelValue:t.role.roleName,"onUpdate:modelValue":a[2]||(a[2]=e=>t.role.roleName=e),placeholder:"输入角色名称",clearable:""},null,8,["modelValue"])])),_:1}),y(i,{label:"角色编码",prop:"roleCode"},{default:h((()=>[y(n,{modelValue:t.role.roleCode,"onUpdate:modelValue":a[3]||(a[3]=e=>t.role.roleCode=e),placeholder:"输入角色编码",clearable:""},null,8,["modelValue"])])),_:1}),y(i,{label:"角色状态"},{default:h((()=>[y(B,{size:"large",modelValue:t.role.status,"onUpdate:modelValue":a[4]||(a[4]=e=>t.role.status=e),"true-value":"1","false-value":"0"},{open:h((()=>[F])),close:h((()=>[O])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])):S("",!0)])),_:1},8,["model-value","title","onClosed"])])),_:1})};export{z as default};
