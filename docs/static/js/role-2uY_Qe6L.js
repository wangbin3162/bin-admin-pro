import{m as Z,r as z,n as ee,o as f,a as D,g as te,v as le,L as s,K as e,w as t,j as oe,i as ae,Q as o,F as ne,R as se,f as c,t as re,b as _}from"./vendor-yvfxTJov.js";import{u as ie}from"./useTable-CYH-0POU.js";import{r as ue}from"./index-DqgoGRKG.js";import{u as ce}from"./useForm-Ccoeyqxn.js";import{n as B}from"./chunk-bin-ui-design-D_EbM8sf.js";import"./chunk-brace-DkiLfVT0.js";import"./chunk-mockjs-B6s4ORgB.js";function de(){return ue({url:"/role/list",method:"get"})}const me={flex:"main:right"},pe={class:"p16"},_e=_("span",null,"启用",-1),be=_("span",null,"禁用",-1),we=Object.assign({name:"SysRole"},{__name:"role",setup(fe){const r=Z({page:1,size:10,roleName:"",status:""}),g=z([]),a=z({}),{loading:v,list:F,total:R,getListData:m,pageChange:S}=ie(de,r),{formRef:U,pageStatus:C,editLoading:q,openCreate:$,openEdit:E,backNormal:h,submitForm:T,setBtnLoading:V,modalVisible:k}=ce();ee(()=>F.value,i=>{g.value=i}),m();function j(){a.value={roleName:"",roleCode:"",status:"1"},$()}function K(i){a.value={...i},E()}function y(){a.value={},h()}function M(){B.success("删除成功！"),m()}function O(){T(()=>{V(!0);const i=C.value;setTimeout(()=>{B.success(`${i.isCreate?"新增":"修改"}成功！`),V(!1),h(),m()},1e3)})}const w={0:"禁用",1:"启用"},Q=[{title:"角色名称",key:"roleName"},{title:"角色编码",key:"roleCode"},{title:"状态",slot:"status"},{title:"创建日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],A={roleName:[{required:!0,message:"角色名称必填",trigger:"blur"}],roleCode:[{required:!0,message:"角色编码必填",trigger:"blur"}]};return(i,n)=>{const b=o("b-input"),u=o("b-form-item"),G=o("b-option"),H=o("b-select"),d=o("b-button"),N=o("b-form"),x=o("action-button"),I=o("b-divider"),J=o("b-table"),P=o("b-page"),W=o("base-table"),L=o("page-wrapper"),X=o("b-switch"),Y=o("b-collapse-wrap");return f(),D("div",null,[te(e(L,null,{default:t(()=>[e(W,null,{filter:t(()=>[e(N,{"label-width":"95px"},{default:t(()=>[e(u,{label:"角色名称"},{default:t(()=>[e(b,{modelValue:r.roleName,"onUpdate:modelValue":n[0]||(n[0]=l=>r.roleName=l),clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色状态"},{default:t(()=>[e(H,{modelValue:r.status,"onUpdate:modelValue":n[1]||(n[1]=l=>r.status=l),clearable:""},{default:t(()=>[(f(),D(ne,null,se(w,(l,p)=>e(G,{key:p,label:l,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(u,{"label-width":"16px"},{default:t(()=>[e(d,{type:"primary",loading:s(v),onClick:s(m)},{default:t(()=>[c("查询")]),_:1},8,["loading","onClick"]),e(d,null,{default:t(()=>[c("重置")]),_:1})]),_:1})]),_:1})]),action:t(()=>[e(d,{type:"primary",icon:"plus-circle",onClick:j},{default:t(()=>[c("新增")]),_:1})]),page:t(()=>[e(P,{total:s(R),current:r.page,"page-size":r.size,"show-total":"",onChange:s(S)},null,8,["total","current","page-size","onChange"])]),default:t(()=>[e(J,{columns:Q,data:g.value,loading:s(v),size:"small"},{status:t(({row:l})=>[c(re(w[l.status]),1)]),action:t(({row:l})=>[e(x,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:p=>K(l)},null,8,["onClick"]),e(I,{type:"vertical"}),e(x,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:p=>M(l)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1},512),[[le,!s(k)]]),s(k)?(f(),oe(L,{key:0,title:`${s(C).isCreate?"新增":"修改"}角色`,"show-close":"",onClose:y},{rightFooter:t(()=>[_("div",me,[e(d,{onClick:y},{default:t(()=>[c("取 消")]),_:1}),e(d,{type:"primary",loading:s(q),onClick:O},{default:t(()=>[c("确 定")]),_:1},8,["loading"])])]),default:t(()=>[e(N,{ref_key:"formRef",ref:U,model:a.value,rules:A,"label-width":"100px","label-suffix":":"},{default:t(()=>[e(Y,{title:"基础信息",shadow:"none"},{default:t(()=>[_("div",pe,[e(u,{label:"角色名称",prop:"roleName"},{default:t(()=>[e(b,{modelValue:a.value.roleName,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.roleName=l),placeholder:"输入角色名称",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色编码",prop:"roleCode"},{default:t(()=>[e(b,{modelValue:a.value.roleCode,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.roleCode=l),placeholder:"输入角色编码",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色状态"},{default:t(()=>[e(X,{size:"large",modelValue:a.value.status,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.status=l),"true-value":"1","false-value":"0"},{open:t(()=>[_e]),close:t(()=>[be]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])):ae("",!0)])}}});export{we as default};
