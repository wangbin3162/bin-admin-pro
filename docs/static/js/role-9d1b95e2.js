import{m as Z,r as z,n as ee,Q as o,o as f,a as D,g as te,v as le,L as s,K as e,w as t,F as oe,R as ae,f as c,t as ne,j as se,b as _,i as re}from"./vendor-5c4b4c96.js";import{u as ie}from"./useTable-b59e15f3.js";import{p as ue}from"./index-0c470c36.js";import{u as ce}from"./useForm-f8a5e70e.js";import{n as B}from"./chunk-bin-ui-design-2f3ecd04.js";import"./chunk-brace-6f23dcf5.js";import"./chunk-mockjs-c013c588.js";function de(){return ue({url:"/role/list",method:"get"})}const me={flex:"main:right"},pe={class:"p16"},_e=_("span",null,"\u542F\u7528",-1),be=_("span",null,"\u7981\u7528",-1),we=Object.assign({name:"SysRole"},{__name:"role",setup(fe){const r=Z({page:1,size:10,roleName:"",status:""}),g=z([]),a=z({}),{loading:v,list:F,total:R,getListData:m,pageChange:S}=ie(de,r),{formRef:U,pageStatus:C,editLoading:q,openCreate:$,openEdit:E,backNormal:h,submitForm:T,setBtnLoading:V,modalVisible:k}=ce();ee(()=>F.value,i=>{g.value=i}),m();function j(){a.value={roleName:"",roleCode:"",status:"1"},$()}function K(i){a.value={...i},E()}function y(){a.value={},h()}function M(){B.success("\u5220\u9664\u6210\u529F\uFF01"),m()}function O(){T(()=>{V(!0);const i=C.value;setTimeout(()=>{B.success(`${i.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),V(!1),h(),m()},1e3)})}const w={0:"\u7981\u7528",1:"\u542F\u7528"},Q=[{title:"\u89D2\u8272\u540D\u79F0",key:"roleName"},{title:"\u89D2\u8272\u7F16\u7801",key:"roleCode"},{title:"\u72B6\u6001",slot:"status"},{title:"\u521B\u5EFA\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],A={roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],roleCode:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]};return(i,n)=>{const b=o("b-input"),u=o("b-form-item"),G=o("b-option"),H=o("b-select"),d=o("b-button"),N=o("b-form"),x=o("action-button"),I=o("b-divider"),J=o("b-table"),P=o("b-page"),W=o("base-table"),L=o("page-wrapper"),X=o("b-switch"),Y=o("b-collapse-wrap");return f(),D("div",null,[te(e(L,null,{default:t(()=>[e(W,null,{filter:t(()=>[e(N,{"label-width":"95px"},{default:t(()=>[e(u,{label:"\u89D2\u8272\u540D\u79F0"},{default:t(()=>[e(b,{modelValue:r.roleName,"onUpdate:modelValue":n[0]||(n[0]=l=>r.roleName=l),clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"\u89D2\u8272\u72B6\u6001"},{default:t(()=>[e(H,{modelValue:r.status,"onUpdate:modelValue":n[1]||(n[1]=l=>r.status=l),clearable:""},{default:t(()=>[(f(),D(oe,null,ae(w,(l,p)=>e(G,{key:p,label:l,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(u,{"label-width":"16px"},{default:t(()=>[e(d,{type:"primary",loading:s(v),onClick:s(m)},{default:t(()=>[c("\u67E5\u8BE2")]),_:1},8,["loading","onClick"]),e(d,null,{default:t(()=>[c("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1})]),action:t(()=>[e(d,{type:"primary",icon:"plus-circle",onClick:j},{default:t(()=>[c("\u65B0\u589E")]),_:1})]),page:t(()=>[e(P,{total:s(R),current:r.page,"page-size":r.size,"show-total":"",onChange:s(S)},null,8,["total","current","page-size","onChange"])]),default:t(()=>[e(J,{columns:Q,data:g.value,loading:s(v),size:"small"},{status:t(({row:l})=>[c(ne(w[l.status]),1)]),action:t(({row:l})=>[e(x,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:p=>K(l)},null,8,["onClick"]),e(I,{type:"vertical"}),e(x,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:p=>M(l)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1},512),[[le,!s(k)]]),s(k)?(f(),se(L,{key:0,title:`${s(C).isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,"show-close":"",onClose:y},{rightFooter:t(()=>[_("div",me,[e(d,{onClick:y},{default:t(()=>[c("\u53D6 \u6D88")]),_:1}),e(d,{type:"primary",loading:s(q),onClick:O},{default:t(()=>[c("\u786E \u5B9A")]),_:1},8,["loading"])])]),default:t(()=>[e(N,{ref_key:"formRef",ref:U,model:a.value,rules:A,"label-width":"100px","label-suffix":":"},{default:t(()=>[e(Y,{title:"\u57FA\u7840\u4FE1\u606F",shadow:"none"},{default:t(()=>[_("div",pe,[e(u,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:t(()=>[e(b,{modelValue:a.value.roleName,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.roleName=l),placeholder:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"\u89D2\u8272\u7F16\u7801",prop:"roleCode"},{default:t(()=>[e(b,{modelValue:a.value.roleCode,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.roleCode=l),placeholder:"\u8F93\u5165\u89D2\u8272\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"\u89D2\u8272\u72B6\u6001"},{default:t(()=>[e(X,{size:"large",modelValue:a.value.status,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.status=l),"true-value":"1","false-value":"0"},{open:t(()=>[_e]),close:t(()=>[be]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])):re("",!0)])}}});export{we as default};
