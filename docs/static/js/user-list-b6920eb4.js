import{u as x}from"./useTable-c3fb3d01.js";import{g as w}from"./user.api-44d8f441.js";import{a as L}from"./chunk-bin-ui-next-cc573c7a.js";import{A as q}from"./index-ba5811a1.js";import{P as S}from"./page-wrapper-8ec56d76.js";import{a5 as B,y as M,a as N,n as D,o as f,f as I,d as a,I as r,u as t,A as n,z as h,J as R,t as d,q as l,c as V,F as A}from"./vendor-e04737d2.js";import"./index-8ae97dfa.js";import"./chunk-brace-34d79ec3.js";const U={name:"UserList",components:{PageWrapper:S,ActionButton:q},setup(){const v=M({page:1,size:10}),c=N([]),{loading:b,list:o,total:C,getListData:k,pageChange:p,pageSizeChange:i}=x(w,v);function u(s){L.success(`\u590D\u5236ID\uFF1A${s}\u6210\u529F\uFF01`)}function m(s,_){c.value[_].roles=s}return D(()=>o.value,s=>{c.value=s.map(_=>({..._,expand:!1}))}),k(),{query:v,roleMap:{admin:"\u7BA1\u7406\u5458",user:"\u666E\u901A\u7528\u6237",op:"\u5B9E\u65BD\u4EBA\u5458"},roleMapStyle:{admin:"purple",user:"blue",op:"volcano"},loading:b,list:o,copyList:c,total:C,pageChange:p,pageSizeChange:i,handleCopy:u,setRole:m}}},F={class:"list-wrap"},P={class:"list-item-meta"},T=["src"],E={class:"list-item-meta-name"},J={class:"list-item-id"},W=l("\u590D\u5236"),j={class:"list-item-email mt-8"},G={class:"list-item-action mt-8"},H={key:0,class:"list-item-action mt-8"},K=l(" \u7BA1\u7406\u5458 "),O=l(" \u666E\u901A\u7528\u6237 "),Q=l(" \u5B9E\u65BD\u4EBA\u5458 "),X={class:"mt-16 t-center"};function Y(v,c,b,o,C,k){const p=r("b-skeleton"),i=r("b-divider"),u=r("b-button"),m=r("b-tag"),s=r("action-button"),_=r("b-page"),z=r("page-wrapper");return f(),I(z,{desc:"\u5305\u542B\u4FE1\u606F\u7684\u5217\u8868\uFF0C\u5E26\u6709\u5E38\u89C4\u64CD\u4F5C\u3002\u672C\u9875\u9762\u4E5F\u7528\u4F5C\u793A\u4F8B\uFF0C\u5B9E\u9645\u64CD\u4F5C\u4EE5\u4E1A\u52A1\u9700\u6C42\u81EA\u884C\u7F16\u5199\u3002",bg:""},{default:a(()=>[t(p,{loading:o.loading},{template:a(()=>[t(p,{animation:""}),t(i),t(p,{animation:""}),t(i),t(p,{animation:""}),t(i)]),default:a(()=>[n("ul",F,[(f(!0),h(A,null,R(o.copyList,(e,y)=>(f(),h("li",{key:e.id,class:"user-list-item"},[n("div",P,[n("img",{src:e.avatar,alt:"",class:"avatar"},null,8,T),n("div",E,d(e.realName),1)]),n("div",J,[n("span",null,"ID:"+d(e.id),1),t(u,{size:"mini",icon:"file-copy",onClick:g=>o.handleCopy(e.id)},{default:a(()=>[W]),_:2},1032,["onClick"])]),n("div",j,"\u90AE\u7BB1\u5730\u5740\uFF1A"+d(e.email),1),n("div",G,[t(m,{type:e.verify?"success":"danger"},{default:a(()=>[l(d(e.verify?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),1)]),_:2},1032,["type"]),t(m,{type:o.roleMapStyle[e.roles]},{default:a(()=>[l(d(o.roleMap[e.roles]),1)]),_:2},1032,["type"]),t(u,{icon:e.expand?"minus-square":"plus-square",size:"mini",style:{"margin-left":"16px"},onClick:g=>e.expand=!e.expand},{default:a(()=>[l(d(e.expand?"\u6536\u8D77\u64CD\u4F5C":"\u5C55\u5F00\u64CD\u4F5C"),1)]),_:2},1032,["icon","onClick"])]),e.expand?(f(),h("div",H,[t(s,{"button-props":{type:e.roles!=="admin"?"primary":null,size:"mini",disabled:e.roles==="admin"},onClick:g=>o.setRole("admin",y),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u7BA1\u7406\u5458\u5417\uFF1F",confirm:""},{default:a(()=>[K]),_:2},1032,["button-props","onClick"]),t(i,{type:"vertical"}),t(s,{"button-props":{type:e.roles!=="user"?"primary":null,size:"mini",disabled:e.roles==="user"},onClick:g=>o.setRole("user",y),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u666E\u901A\u7528\u6237\u5417\uFF1F",confirm:""},{default:a(()=>[O]),_:2},1032,["button-props","onClick"]),t(i,{type:"vertical"}),t(s,{"button-props":{type:e.roles!=="op"?"primary":null,size:"mini",disabled:e.roles==="op"},onClick:g=>o.setRole("op",y),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u5B9E\u65BD\u4EBA\u5458\u5417\uFF1F",confirm:""},{default:a(()=>[Q]),_:2},1032,["button-props","onClick"])])):V("",!0)]))),128))])]),_:1},8,["loading"]),n("div",X,[t(_,{total:o.total,current:o.query.page,"onUpdate:current":c[0]||(c[0]=e=>o.query.page=e),"page-size":o.query.size,"show-elevator":"","show-sizer":"","show-total":"",onChange:o.pageChange,onSizeChange:o.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])])]),_:1})}var ie=B(U,[["render",Y],["__scopeId","data-v-7ea61195"]]);export{ie as default};
