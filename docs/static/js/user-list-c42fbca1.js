var S=Object.defineProperty,B=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var x=(s,o,n)=>o in s?S(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,w=(s,o)=>{for(var n in o||(o={}))N.call(o,n)&&x(s,n,o[n]);if(z)for(var n of z(o))D.call(o,n)&&x(s,n,o[n]);return s},L=(s,o)=>B(s,M(o));import{u as R}from"./useTable-b03f4ced.js";import{g as V}from"./user.api-e84cdd57.js";import{a as A}from"./chunk-bin-ui-next-39e3ad1f.js";import{A as I}from"./index-7c9c367b.js";import{P as U}from"./page-wrapper-4e694ef0.js";import{a5 as F,y as P,f as T,n as E,J as p,o as y,c as J,w as i,u as a,B as l,A as b,K,t as u,q as d,a as W,F as j}from"./vendor-9f2db7f5.js";import"./index-29e89477.js";import"./chunk-brace-f547fd93.js";const G={name:"UserList",components:{PageWrapper:U,ActionButton:I},setup(){const s=P({page:1,size:10}),o=T([]),{loading:n,list:t,total:C,getListData:k,pageChange:_,pageSizeChange:c}=R(V,s);function g(r){A.success(`\u590D\u5236ID\uFF1A${r}\u6210\u529F\uFF01`)}function f(r,m){o.value[m].roles=r}return E(()=>t.value,r=>{o.value=r.map(m=>L(w({},m),{expand:!1}))}),k(),{query:s,roleMap:{admin:"\u7BA1\u7406\u5458",user:"\u666E\u901A\u7528\u6237",op:"\u5B9E\u65BD\u4EBA\u5458"},roleMapStyle:{admin:"purple",user:"blue",op:"volcano"},loading:n,list:t,copyList:o,total:C,pageChange:_,pageSizeChange:c,handleCopy:g,setRole:f}}},H={class:"list-wrap"},O={class:"list-item-meta"},Q=["src"],X={class:"list-item-meta-name"},Y={class:"list-item-id"},Z=d("\u590D\u5236"),$={class:"list-item-email mt-8"},ee={class:"list-item-action mt-8"},oe={key:0,class:"list-item-action mt-8"},te=d(" \u7BA1\u7406\u5458 "),ae=d(" \u666E\u901A\u7528\u6237 "),se=d(" \u5B9E\u65BD\u4EBA\u5458 "),ne={class:"mt-16 t-center"};function ie(s,o,n,t,C,k){const _=p("b-skeleton"),c=p("b-divider"),g=p("b-button"),f=p("b-tag"),r=p("action-button"),m=p("b-page"),q=p("page-wrapper");return y(),J(q,{desc:"\u5305\u542B\u4FE1\u606F\u7684\u5217\u8868\uFF0C\u5E26\u6709\u5E38\u89C4\u64CD\u4F5C\u3002\u672C\u9875\u9762\u4E5F\u7528\u4F5C\u793A\u4F8B\uFF0C\u5B9E\u9645\u64CD\u4F5C\u4EE5\u4E1A\u52A1\u9700\u6C42\u81EA\u884C\u7F16\u5199\u3002",bg:""},{default:i(()=>[a(_,{loading:t.loading},{template:i(()=>[a(_,{animation:""}),a(c),a(_,{animation:""}),a(c),a(_,{animation:""}),a(c)]),default:i(()=>[l("ul",H,[(y(!0),b(j,null,K(t.copyList,(e,h)=>(y(),b("li",{key:e.id,class:"user-list-item"},[l("div",O,[l("img",{src:e.avatar,alt:"",class:"avatar"},null,8,Q),l("div",X,u(e.realName),1)]),l("div",Y,[l("span",null,"ID:"+u(e.id),1),a(g,{size:"mini",icon:"file-copy",onClick:v=>t.handleCopy(e.id)},{default:i(()=>[Z]),_:2},1032,["onClick"])]),l("div",$,"\u90AE\u7BB1\u5730\u5740\uFF1A"+u(e.email),1),l("div",ee,[a(f,{type:e.verify?"success":"danger"},{default:i(()=>[d(u(e.verify?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),1)]),_:2},1032,["type"]),a(f,{type:t.roleMapStyle[e.roles]},{default:i(()=>[d(u(t.roleMap[e.roles]),1)]),_:2},1032,["type"]),a(g,{icon:e.expand?"minus-square":"plus-square",size:"mini",style:{"margin-left":"16px"},onClick:v=>e.expand=!e.expand},{default:i(()=>[d(u(e.expand?"\u6536\u8D77\u64CD\u4F5C":"\u5C55\u5F00\u64CD\u4F5C"),1)]),_:2},1032,["icon","onClick"])]),e.expand?(y(),b("div",oe,[a(r,{"button-props":{type:e.roles!=="admin"?"primary":null,size:"mini",disabled:e.roles==="admin"},onClick:v=>t.setRole("admin",h),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u7BA1\u7406\u5458\u5417\uFF1F",confirm:""},{default:i(()=>[te]),_:2},1032,["button-props","onClick"]),a(c,{type:"vertical"}),a(r,{"button-props":{type:e.roles!=="user"?"primary":null,size:"mini",disabled:e.roles==="user"},onClick:v=>t.setRole("user",h),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u666E\u901A\u7528\u6237\u5417\uFF1F",confirm:""},{default:i(()=>[ae]),_:2},1032,["button-props","onClick"]),a(c,{type:"vertical"}),a(r,{"button-props":{type:e.roles!=="op"?"primary":null,size:"mini",disabled:e.roles==="op"},onClick:v=>t.setRole("op",h),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u5B9E\u65BD\u4EBA\u5458\u5417\uFF1F",confirm:""},{default:i(()=>[se]),_:2},1032,["button-props","onClick"])])):W("",!0)]))),128))])]),_:1},8,["loading"]),l("div",ne,[a(m,{total:t.total,current:t.query.page,"onUpdate:current":o[0]||(o[0]=e=>t.query.page=e),"page-size":t.query.size,"show-elevator":"","show-sizer":"","show-total":"",onChange:t.pageChange,onSizeChange:t.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])])]),_:1})}var fe=F(G,[["render",ie],["__scopeId","data-v-7ea61195"]]);export{fe as default};
