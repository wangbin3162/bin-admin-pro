import{g as E}from"./depart.api-f9cee405.js";import{a5 as K,a as N,o as I,f as R,d as o,I as n,A as d,u as t,c as U,e as q,w as M,M as L,z as P,q as p,t as j,a9 as A,aa as W}from"./vendor-e04737d2.js";import{h as G}from"./index-8ae97dfa.js";import{a as H}from"./chunk-bin-ui-next-cc573c7a.js";import{u as J}from"./useForm-6954fee6.js";import{P as O}from"./page-wrapper-8ec56d76.js";import{B as Q}from"./index-bcf4c295.js";import{I as X}from"./iconfont-670f4680.js";import"./chunk-brace-34d79ec3.js";const Y={name:"Depart",components:{Iconfont:X,BaseTree:Q,PageWrapper:O},setup(){const i=N(null),a=N(null),u=N({}),e=N({}),{formRef:T,editStatus:D,pageStatus:_,editLoading:f,openCreate:C,openEdit:b,backNormal:v,submitForm:m,resetForm:r}=J();function V(s,c){s.selected?(a.value=s,e.value=c,S()):x()}function w(s){if(s==="root"&&g(),s==="child"){g();const c=a.value;u.value.parentId=c.id,u.value.parentName=c.text}}function h(s="edit"){if(s==="edit"){const c=e.value,k=a.value,y=c[k.nodeKey].parent,F=y||y===0?c[y].node:{};u.value=k?{...G(k),parentId:y===0?"":F.id,parentName:F.title}:{};return}u.value={text:"",deptCode:"",status:"1",desc:"",parentId:"",parentName:void 0}}function x(){a.value=null,e.value=null,u.value={},v()}function g(){h("create"),C()}function S(){h("edit"),b()}function l(){m(()=>{f.value=!0;const s=_.value;setTimeout(()=>{H.success(`${s.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),v();const c=a.value?[a.value.nodeKey]:[];i.value&&i.value.reloadTree(c),f.value=!1},1e3)})}function z(){h(D.value),r()}return{treeRef:i,getDepartTree:E,currentNode:a,copyNode:u,handleSelect:V,handleSubmit:l,handleResetForm:z,handleCommand:w,formRef:T,pageStatus:_,editLoading:f,submitForm:m,resetForm:r,ruleValidate:{text:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],deptCode:[{required:!0,message:"\u90E8\u95E8\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]}}}},B=i=>(A("data-v-7207f23c"),i=i(),W(),i),Z={class:"table-depart"},$=p("\u589E\u52A0\u6839\u8282\u70B9"),ee=p("\u589E\u52A0\u5B50\u8282\u70B9"),te={class:"table-depart-right"},oe={flex:"main:justify cross:center",style:{"font-weight":"normal"}},ae={class:"top"},ne=B(()=>d("span",{class:"ml-5"},"\u7F16\u8F91\u90E8\u95E8",-1)),le={class:"right"},de=p("\u65B0\u589E\u5B50\u90E8\u95E8"),re={style:{position:"relative","min-height":"100px",overflow:"hidden"}},se={style:{position:"absolute",width:"100%"}},ce=p("\u70B9\u9009\u5DE6\u4FA7\u90E8\u95E8\uFF0C\u8FDB\u884C\u7F16\u8F91\u64CD\u4F5C"),ie={key:0,class:"pt-8"},ue=B(()=>d("span",null,"\u542F\u7528",-1)),me=B(()=>d("span",null,"\u7981\u7528",-1)),pe=p("\u91CD\u7F6E");function _e(i,a,u,e,T,D){const _=n("b-dropdown-item"),f=n("base-tree"),C=n("iconfont"),b=n("b-button"),v=n("b-alert"),m=n("b-input"),r=n("b-form-item"),V=n("b-switch"),w=n("b-form"),h=n("b-col"),x=n("b-row"),g=n("b-card"),S=n("page-wrapper");return I(),R(S,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:o(()=>[d("div",Z,[t(f,{ref:"treeRef","tree-title":"\u90E8\u95E8\u5217\u8868","show-filter":"",fetch:e.getDepartTree,onSelectChange:e.handleSelect,onCommand:e.handleCommand},{ctrl:o(()=>[t(_,{name:"root",divided:""},{default:o(()=>[$]),_:1}),t(_,{name:"child",disabled:!e.currentNode},{default:o(()=>[ee]),_:1},8,["disabled"])]),_:1},8,["fetch","onSelectChange","onCommand"]),d("div",te,[t(g,{bordered:!1,class:"card-panel",shadow:"never"},{header:o(()=>[d("div",oe,[d("div",ae,[t(C,{icon:"apartment",color:"primary",bg:"",round:""}),ne]),d("div",le,[e.currentNode?(I(),R(b,{key:0,type:"text",size:"small",onClick:a[0]||(a[0]=l=>e.handleCommand("child"))},{default:o(()=>[de]),_:1})):U("",!0)])])]),default:o(()=>[d("div",re,[t(q,{name:"fade-in"},{default:o(()=>[d("div",se,[M(t(v,null,{default:o(()=>[ce]),_:1},512),[[L,e.pageStatus.isNormal]])])]),_:1}),t(q,{name:"fade-transverse"},{default:o(()=>[e.pageStatus.isNormal?U("",!0):(I(),P("div",ie,[t(x,null,{default:o(()=>[t(h,{span:"14"},{default:o(()=>[t(w,{ref:"formRef",model:e.copyNode,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:o(()=>[t(r,{label:"\u7236\u7EA7\u7EC4\u7EC7"},{default:o(()=>[t(m,{modelValue:e.copyNode.parentName,"onUpdate:modelValue":a[1]||(a[1]=l=>e.copyNode.parentName=l),disabled:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u90E8\u95E8\u540D\u79F0",prop:"text"},{default:o(()=>[t(m,{modelValue:e.copyNode.text,"onUpdate:modelValue":a[2]||(a[2]=l=>e.copyNode.text=l),placeholder:"\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u90E8\u95E8\u7F16\u7801",prop:"deptCode"},{default:o(()=>[t(m,{modelValue:e.copyNode.deptCode,"onUpdate:modelValue":a[3]||(a[3]=l=>e.copyNode.deptCode=l),placeholder:"\u8F93\u5165\u90E8\u95E8\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u90E8\u95E8\u72B6\u6001"},{default:o(()=>[t(V,{size:"large",modelValue:e.copyNode.status,"onUpdate:modelValue":a[4]||(a[4]=l=>e.copyNode.status=l),"true-value":"1","false-value":"0"},{open:o(()=>[ue]),close:o(()=>[me]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u90E8\u95E8\u63CF\u8FF0"},{default:o(()=>[t(m,{modelValue:e.copyNode.desc,"onUpdate:modelValue":a[5]||(a[5]=l=>e.copyNode.desc=l),type:"textarea",placeholder:"\u8F93\u5165\u90E8\u95E8\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),t(r,null,{default:o(()=>[t(b,{type:"primary",onClick:e.handleSubmit,loading:e.editLoading},{default:o(()=>[p(j(e.pageStatus.isCreate?"\u63D0\u4EA4\u6570\u636E":"\u66F4\u65B0\u6570\u636E"),1)]),_:1},8,["onClick","loading"]),t(b,{onClick:e.handleResetForm},{default:o(()=>[pe]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]))]),_:1})])]),_:1})])])]),_:1})}var we=K(Y,[["render",_e],["__scopeId","data-v-7207f23c"]]);export{we as default};
