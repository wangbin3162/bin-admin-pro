import{d as y}from"./index-DlSIhdb0.js";import{l as L,r as R,f as j}from"./cross-tab-msg-CTU40FVn.js";import{r as l,af as T,m as z,q as K,R as o,o as M,j as O,w as i,K as n,f as U,i as A}from"./vendor-COsJffew.js";import{n as F}from"./chunk-bin-ui-design-55yTQV6H.js";const W=Object.assign({name:"SysRole"},{__name:"index",emits:["close"],setup(G,{expose:C,emit:g}){const k=g,r=l(!1),p=T(),a=z({tempId:""}),s=l([]),c=l({}),u=l(!1),v=l([]);function w(){const e=y(c.value.mapping);s.value=[{title:"序号",width:70,align:"center",type:"index"}],e.forEach((t,m)=>{m<5&&s.value.push({title:t.fieldTitle,key:t.fieldName})}),s.value.push({title:"操作",width:150,align:"center",slot:"action"})}function x(){let e=p.resolve({path:"/data-edit",query:{tempId:a.tempId}});window.open(e.href,"_blank")}function I({id:e}){let t=p.resolve({path:"/data-edit",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function q({id:e}){let t=p.resolve({path:"/data-edit-simple",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function D({id:e}){R(e).then(()=>{F.success("删除成功！"),d()})}async function d(){try{u.value=!0;const{rows:e}=await j(a);v.value=e.map(t=>({id:t.id,tempId:t.tempId,tempName:t.tempName,...t.data}))}catch(e){console.log(e)}u.value=!1}function N(e){r.value=!0,c.value=y(e),a.tempId=e.id,w(),d()}function S(){r.value=!1,k("close")}C({open:N});const $=L(d);return K($),(e,t)=>{const m=o("b-button"),f=o("action-button"),h=o("b-divider"),V=o("b-table"),B=o("base-table"),E=o("page-wrapper");return r.value?(M(),O(E,{key:0,title:`${c.value.name?`[${c.value.name}] `:""}数据查看`,"show-close":"",onClose:S},{default:i(()=>[n(B,null,{action:i(()=>[n(m,{type:"primary",icon:"plus",onClick:x},{default:i(()=>t[0]||(t[0]=[U("新增")])),_:1})]),default:i(()=>[n(V,{columns:s.value,data:v.value,loading:u.value,size:"small"},{action:i(({row:_})=>[n(f,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:b=>I(_)},null,8,["onClick"]),n(h,{type:"vertical"}),n(f,{type:"text",icon:"edit","is-icon":"",tooltip:"表单编辑",onClick:b=>q(_)},null,8,["onClick"]),n(h,{type:"vertical"}),n(f,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:b=>D(_)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})]),_:1},8,["title"])):A("",!0)}}});export{W as _};
