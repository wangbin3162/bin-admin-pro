import{u as E}from"./useTable-c3fb3d01.js";import{k as R}from"./index-8ae97dfa.js";import{B as T}from"./index-3e1b1254.js";import{P as A}from"./page-wrapper-8ec56d76.js";import{A as P}from"./index-ba5811a1.js";import{u as I}from"./useForm-6954fee6.js";import{a as S}from"./chunk-bin-ui-next-cc573c7a.js";import{a5 as J,y as W,a as L,n as j,o as y,f as B,d as o,I as a,u as l,z as D,J as G,F as H,q as c,t as K,A as z,c as O}from"./vendor-e04737d2.js";import"./chunk-brace-34d79ec3.js";function Q(){return R({url:"/role/list",method:"get"})}const X={name:"Role",components:{PageWrapper:A,ActionButton:P,BaseTable:T},setup(){const V=W({page:1,size:10,roleName:"",status:""}),n=L([]),u=L({}),{loading:e,list:w,total:x,getListData:r,pageChange:i,pageSizeChange:k}=E(Q,V),{formRef:v,editStatus:s,pageStatus:m,editLoading:b,openCreate:f,openEdit:g,backNormal:_,submitForm:C,resetForm:N,setBtnLoading:h,modalVisible:q}=I();j(()=>w.value,p=>{n.value=p}),r();function t(){u.value={roleName:"",roleCode:"",status:"1"},f()}function d(p){u.value={...p},g()}function F(){u.value={},_()}function M(){S.success("\u5220\u9664\u6210\u529F\uFF01"),r()}function U(){C(()=>{h(!0);const p=m.value;setTimeout(()=>{S.success(`${p.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),h(!1),_(),r()},1e3)})}return{statusMap:{0:"\u7981\u7528",1:"\u542F\u7528"},columns:[{title:"\u89D2\u8272\u540D\u79F0",key:"roleName"},{title:"\u89D2\u8272\u7F16\u7801",key:"roleCode"},{title:"\u72B6\u6001",slot:"status"},{title:"\u521B\u5EFA\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],formRef:v,role:u,editStatus:s,pageStatus:m,editLoading:b,openCreate:f,openEdit:g,backNormal:_,submitForm:C,resetForm:N,ruleValidate:{roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],roleCode:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]},query:V,loading:e,total:x,copyList:n,getListData:r,pageChange:i,pageSizeChange:k,modalVisible:q,handleCreate:t,handleCancel:F,handleEdit:d,handleSubmit:U,handleDelete:M}}},Y=c("\u91CD\u7F6E"),Z=c("\u67E5\u8BE2"),$=c("\u65B0\u589E"),ee={key:0},oe=z("span",null,"\u542F\u7528",-1),le=z("span",null,"\u7981\u7528",-1),te=c("\u53D6 \u6D88"),ae=c("\u786E \u5B9A");function ne(V,n,u,e,w,x){const r=a("b-input"),i=a("b-form-item"),k=a("b-option"),v=a("b-select"),s=a("b-button"),m=a("b-form"),b=a("action-button"),f=a("b-divider"),g=a("b-table"),_=a("b-page"),C=a("base-table"),N=a("b-switch"),h=a("b-modal"),q=a("page-wrapper");return y(),B(q,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:o(()=>[l(C,null,{filter:o(()=>[l(m,{"label-width":"95px"},{default:o(()=>[l(i,{label:"\u89D2\u8272\u540D\u79F0"},{default:o(()=>[l(r,{modelValue:e.query.roleName,"onUpdate:modelValue":n[0]||(n[0]=t=>e.query.roleName=t),clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[l(v,{modelValue:e.query.status,"onUpdate:modelValue":n[1]||(n[1]=t=>e.query.status=t),clearable:""},{default:o(()=>[(y(!0),D(H,null,G(e.statusMap,(t,d)=>(y(),B(k,{key:d,label:t,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,null,{default:o(()=>[l(s,null,{default:o(()=>[Y]),_:1}),l(s,{type:"primary",loading:e.loading,onClick:e.getListData},{default:o(()=>[Z]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),action:o(()=>[l(s,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:o(()=>[$]),_:1},8,["onClick"])]),page:o(()=>[l(_,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:o(()=>[l(g,{columns:e.columns,data:e.copyList,loading:e.loading,border:""},{status:o(({row:t})=>[c(K(e.statusMap[t.status]),1)]),action:o(({row:t})=>[l(b,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:d=>e.handleEdit(t)},null,8,["onClick"]),l(f,{type:"vertical"}),l(b,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:d=>e.handleDelete(t)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1}),l(h,{"model-value":e.modalVisible,title:`${e.pageStatus.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,onClosed:e.handleCancel},{footer:o(()=>[z("div",null,[l(s,{onClick:e.handleCancel},{default:o(()=>[te]),_:1},8,["onClick"]),l(s,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:o(()=>[ae]),_:1},8,["loading","onClick"])])]),default:o(()=>[e.modalVisible?(y(),D("div",ee,[l(m,{ref:"formRef",model:e.role,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:o(()=>[l(i,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:o(()=>[l(r,{modelValue:e.role.roleName,"onUpdate:modelValue":n[2]||(n[2]=t=>e.role.roleName=t),placeholder:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u89D2\u8272\u7F16\u7801",prop:"roleCode"},{default:o(()=>[l(r,{modelValue:e.role.roleCode,"onUpdate:modelValue":n[3]||(n[3]=t=>e.role.roleCode=t),placeholder:"\u8F93\u5165\u89D2\u8272\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[l(N,{size:"large",modelValue:e.role.status,"onUpdate:modelValue":n[4]||(n[4]=t=>e.role.status=t),"true-value":"1","false-value":"0"},{open:o(()=>[oe]),close:o(()=>[le]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])):O("",!0)]),_:1},8,["model-value","title","onClosed"])]),_:1})}var be=J(X,[["render",ne]]);export{be as default};
