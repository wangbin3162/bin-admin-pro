import{a8 as ee,r as n,p as te,G as ae,o as c,j as S,w as o,Q as d,b as a,f as m,K as s,a as _,R as q,H as A,t as N,F as H,i as y,I as ne,T as le,a9 as oe,aa as se}from"./vendor-B29aizbt.js";import{n as ie}from"./chunk-bin-ui-design-DOxaRq58.js";import{n as ce}from"./index-CtCeQG2m.js";import"./chunk-brace-BklEY0pF.js";import"./chunk-mockjs-CGXE1Baq.js";const ue="/bin-admin-pro/static/png/temp_1-_EAKMiPW.png",re="/bin-admin-pro/static/png/temp_2-6UulMs8n.png",pe="/bin-admin-pro/static/png/temp_3-D3Gb59z4.png",de="/bin-admin-pro/static/png/temp_4-GGDLa8Nb.png",me="/bin-admin-pro/static/png/temp_5-By7LQ-F7.png",ve="/bin-admin-pro/static/png/temp_6-B0Z6jyM9.png",fe="/bin-admin-pro/static/png/temp_7-BMxrvXRp.png",_e="/bin-admin-pro/static/png/temp_8-BXI-X1Ao.png",ge=[ue,re,pe,de,me,ve,fe,_e];function he(){const v=[];for(let f=1;f<=8;f++)v.push({id:Math.floor(Math.random()*1e4),name:`图片_${f}`,bgInfo:{url:ge[f-1],width:2447,height:3461},comps:[]});return v}const be=v=>(oe("data-v-b377535e"),v=v(),se(),v),ye={class:"preview-panel",flex:""},Ce={class:"left-images"},ke={class:"top-bar image-list"},xe={class:"image-list-wp"},we=["onClick"],Ie=be(()=>a("i",{class:"el-icon-picture-outline"},null,-1)),Se=["title","onClick"],Ve={key:0,class:"top-bar",flex:"main:justify"},Be={key:0,class:"config-panel"},Me={class:"top-bar",flex:"main:justify"},De={class:"editor"},$e={__name:"schema-demo",setup(v){const f=n(null),C=n(null),V=n(!1),R=n({}),z=n(null),k=n(!1),g=n(""),r=n(""),B=n(""),h=n(-1),T=n(""),x=n(""),j=n(-1),p=n(he()),w=n(!1),I=n(400);function M(t,e){h.value=e,T.value=t.id,C.value.setConfig(t)}function D(t=!1){z.value=C.value.getAllConfig();const e=p.value[h.value],i=ce({id:e.id,name:e.name},z.value);p.value[h.value]=i,t&&ie({type:"success",message:"保存成功! "})}function E(t,e){e>=0&&D(),M(t,e)}function K(){g.value="全局",r.value=B.value,k.value=!0}function P(t,e,i,$){E(t,e),x.value=i.id,j.value=$,g.value=`${t.name} - ${i.alias} - `,r.value=i.script?i.script:"",k.value=!0}function Q(t){r.value=`
  char c1 = 'A'
  assert c1 instanceof Character

  def c2 = 'B' as char
  assert c2 instanceof Character

  def c3 = (char)'C'
  assert c3 instanceof Character`}function F(){x.value="",j.value=-1,g.value="",r.value="",k.value=!1}function J(){if(g.value==="全局")B.value=r.value;else{const t=p.value[h.value],e=t.comps.findIndex(i=>i.id===x.value);e>-1&&(t.comps[e].script=r.value,M(t,h.value))}F()}function O(){R.value=C.value.getAllConfig(),V.value=!0}return te(async()=>{if(p.value.length>0){I.value=f.value.clientHeight-48,w.value=!0;const t=p.value[0];t.comps=[{id:"comp_2907",name:"comp_2907",alias:"区域_2907",attr:{x:867,y:487,w:538,h:135}},{id:"comp_2951",name:"comp_2951",alias:"区域_2951",attr:{x:774,y:784,w:664,h:142}}],await ae(),M(t,0)}}),(t,e)=>{const i=d("b-icon"),$=d("b-tooltip"),L=d("b-empty"),b=d("b-button"),W=d("SchemaEditor"),U=d("b-ace-editor"),Z=d("b-modal"),Y=d("page-wrapper");return c(),S(Y,null,{default:o(()=>[a("div",ye,[a("div",Ce,[a("div",ke,[m(" 图片列表 "),s($,{class:"item",content:"点击图片载入其区域配置",placement:"right"},{default:o(()=>[s(i,{name:"question-circle"})]),_:1})]),a("div",xe,[(c(!0),_(H,null,q(p.value,(l,G)=>(c(),_("div",{key:G,class:A(["image-wrap",{"has-comps":l.comps.length}])},[a("div",{class:A(["image-item",{active:T.value===l.id}]),onClick:u=>E(l,G)},[Ie,a("span",null,N(l.name),1)],10,we),(c(!0),_(H,null,q(l.comps,(u,X)=>(c(),_("div",{class:A(["item-comp",[{active:x.value===u.id},{edited:u.script&&u.script.length}]]),key:X+u.id},[a("span",{title:`${u.alias}-${u.name}`,onClick:Ge=>P(l,G,u,X)},N(u.alias),9,Se)],2))),128))],2))),128)),p.value.length===0?(c(),S(L,{key:0},{default:o(()=>[m("暂无列表")]),_:1})):y("",!0)])]),a("div",{class:"right-config",ref_key:"contentRef",ref:f},[w.value?(c(),_("div",Ve,[a("div",null,[s(b,{plain:"",type:B.value.length?"success":"default",onClick:K},{default:o(()=>[m(" 全局配置 ")]),_:1},8,["type"]),s(b,{onClick:O},{default:o(()=>[m("查看配置")]),_:1})]),a("div",null,[s(b,{onClick:e[0]||(e[0]=l=>D(!0))},{default:o(()=>[m("保存")]),_:1})])])):y("",!0),w.value?(c(),S(W,{key:1,ref_key:"schemaRef",ref:C,height:I.value+"px",onAutoSave:D},null,8,["height"])):y("",!0),p.value.length===0&&!w.value?(c(),S(L,{key:2},{default:o(()=>[m("请先准备可操作的图片")]),_:1})):y("",!0),s(le,{name:"fade-right"},{default:o(()=>[k.value?(c(),_("div",Be,[a("div",Me,[a("span",null,N(g.value)+"脚本配置",1),a("div",null,[s(b,{size:"small",plain:"",onClick:F},{default:o(()=>[m("关闭")]),_:1}),s(b,{size:"small",plain:"",type:"primary",onClick:J},{default:o(()=>[m("保存脚本")]),_:1})])]),a("div",{class:"edit-content",style:ne({height:I.value+"px"}),flex:""},[a("div",De,[s(U,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),lang:"groovy",height:I.value+"px"},null,8,["modelValue","height"])]),a("div",{class:"keys"},[a("div",{class:"key-item",onClick:Q},"测试脚本")])],4)])):y("",!0)]),_:1})],512)]),s(Z,{title:"当前配置",modelValue:V.value,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),width:"700px"},{default:o(()=>[s(U,{"model-value":JSON.stringify(R.value,null,2),height:"400px"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})}}},je=ee($e,[["__scopeId","data-v-b377535e"]]);export{je as default};
