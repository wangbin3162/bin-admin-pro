var ae=Object.defineProperty,oe=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var K=(o,t,i)=>t in o?ae(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i,H=(o,t)=>{for(var i in t||(t={}))re.call(t,i)&&K(o,i,t[i]);if(J)for(var i of J(t))ie.call(t,i)&&K(o,i,t[i]);return o},j=(o,t)=>oe(o,ne(t));import{u as de}from"./useTable-9b66bab1.js";import{g as se}from"./user.api-f00bd301.js";import{B as ue}from"./index-ce0604af.js";import{P as ce}from"./page-wrapper-9f84d1de.js";import{A as fe}from"./index-c5688c58.js";import{B as me,u as ge}from"./index-f000f74f.js";import{g as Y}from"./depart.api-9d50484f.js";import{u as be}from"./useForm-48662284.js";import{a as O}from"./chunk-bin-ui-next-48b1c960.js";import{a5 as Q,f as M,y as X,g as Z,G as pe,J as r,o as c,A as V,B as f,E as T,u as l,d as _e,z as he,r as P,a as q,n as ve,c as A,w as a,K as $,F as G,q as g,t as ee}from"./vendor-b1bd3f83.js";import"./index-8d450888.js";import"./chunk-brace-f547fd93.js";const ye={name:"page-cube-wrapper",props:{leftDefaultWidth:{type:String,default:"240px"},leftExpandText:{type:String,default:"\u5C55\u5F00"},leftCollapseText:{type:String,default:"\u6536\u8D77"},defaultHeight:{type:Number,default:280},defaultMinHeight:{type:Number,default:12},draggableMinHeight:{type:Number,default:48}},setup(o,{slots:t}){const i=M(null),e=X({active:!1,hasMoved:!1,height:o.defaultHeight,wrapHeight:0}),m=M(!0),_=Z(()=>m.value?o.leftDefaultWidth:"12px"),h=Z(()=>t.left&&m.value?`calc(100% - ${o.leftDefaultWidth})`:"100%"),d=()=>{m.value=!m.value},u=s=>{if(s==="default")e.height=o.defaultHeight;else if(s==="maximum")e.height=o.defaultMinHeight;else{if(!i.value)return;e.height=i.value.clientHeight-o.draggableMinHeight}},v=()=>{!t.draggable||(e.active=!0,e.hasMoved=!1)},k=()=>{!t.draggable||(e.active=!1)},y=s=>{if(!!t.draggable&&((s.buttons===0||s.which===0)&&(e.active=!1),e.active)){let x=0,b=s.currentTarget;for(e.wrapHeight=b.clientHeight;b;)x+=b.offsetTop,b=b.offsetParent;const C=s.pageY-x;C>o.defaultMinHeight&&C<e.wrapHeight-o.draggableMinHeight&&(e.height=C),e.hasMoved=!0}};return j(H({cubeRef:i},pe(e)),{leftExpand:m,leftWidth:_,rightWidth:h,toggleLeft:d,changeDragStatus:u,onResizeMouseDown:v,onResizeMouseUp:k,onResizeMouseMove:y})}},Ce={class:"page-cube-wrapper",ref:"cubeRef"},we={class:"page-cube"},Ve=["title"],ke={class:"cube-left-content"},xe={class:"toggle"};function Me(o,t,i,e,m,_){const h=r("b-icon");return c(),V("div",Ce,[f("div",we,[o.$slots.left?(c(),V("div",{key:0,class:"page-cube-left",style:T({width:e.leftWidth})},[f("div",{class:"toggle",style:T({left:e.leftWidth,opacity:e.leftExpand?null:1}),title:e.leftExpand?i.leftCollapseText:i.leftExpandText,onClick:t[0]||(t[0]=(...d)=>e.toggleLeft&&e.toggleLeft(...d))},[l(h,{name:e.leftExpand?"caret-left":"caret-right"},null,8,["name"])],12,Ve),_e(f("div",ke,[P(o.$slots,"left",{},void 0,!0)],512),[[he,e.leftExpand]])],4)):q("",!0),f("div",{class:"page-cube-content",onMouseup:t[5]||(t[5]=(...d)=>e.onResizeMouseUp&&e.onResizeMouseUp(...d)),onMousemove:t[6]||(t[6]=(...d)=>e.onResizeMouseMove&&e.onResizeMouseMove(...d)),style:T({width:e.rightWidth,cursor:o.active?"col-resize":"",userSelect:o.active?"none":""})},[o.$slots.default?(c(),V("div",{key:0,style:T({height:o.$slots.draggable?o.height+"px":"100%"})},[P(o.$slots,"default",{},void 0,!0)],4)):q("",!0),o.$slots.draggable?(c(),V("div",{key:1,class:"draggable-content",style:T({height:`calc(100% - ${o.height}px)`})},[f("div",xe,[f("i",{class:"b-iconfont b-icon-caret-up",title:"\u5C55\u5F00",onClick:t[1]||(t[1]=d=>e.changeDragStatus("maximum"))}),f("i",{class:"b-iconfont b-icon-caret-down",title:"\u6536\u8D77",onClick:t[2]||(t[2]=d=>e.changeDragStatus("minimum"))}),f("i",{class:"b-iconfont b-icon-creditcard-fill",title:"\u9ED8\u8BA4\u9AD8\u5EA6",onClick:t[3]||(t[3]=d=>e.changeDragStatus("default"))})]),f("div",{class:"drag-handler",draggable:"true",onMousedown:t[4]||(t[4]=(...d)=>e.onResizeMouseDown&&e.onResizeMouseDown(...d))},null,32),P(o.$slots,"draggable",{},void 0,!0)],4)):q("",!0)],36)])],512)}var Se=Q(ye,[["render",Me],["__scopeId","data-v-1e5a8cea"]]);const ze={name:"UserAccount",components:{PageCubeWrapper:Se,BaseTree:me,ActionButton:fe,BaseTable:ue,PageWrapper:ce},setup(){const o=M(null),t=M({}),i=X({page:1,size:10,name:"",roles:"",status:"",date:"",email:""}),e=M(!1),m=M([]),_=M({}),{treeData:h,getTreeData:d}=ge(Y);d().then(()=>console.log(h.value));const{loading:u,list:v,total:k,getListData:y,pageChange:s,pageSizeChange:x}=de(se,i),{formRef:b,editStatus:S,pageStatus:C,editLoading:E,openCreate:z,openEdit:R,backNormal:D,submitForm:N,resetForm:L,setBtnLoading:U,modalVisible:B}=be();ve(v,w=>{m.value=w.map(I=>j(H({},I),{expand:!1}))});function W(w,I){w.selected&&(t.value=w)}function F(){_.value={realName:"",username:"",email:"",roles:"",depart:""},z()}function n(w){_.value=j(H({},w),{depart:""}),R()}function p(){_.value={},D()}function te(){O.success("\u5220\u9664\u6210\u529F\uFF01"),y()}function le(){N(()=>{U(!0);const w=C.value;setTimeout(()=>{O.success(`${w.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),U(!1),D(),y()},1e3)})}return y(),{treeRef:o,currentTreeNode:t,handleSelect:W,getDepartTree:Y,deptTree:h,expand:e,query:i,loading:u,roleMap:{admin:"\u7BA1\u7406\u5458",user:"\u666E\u901A\u7528\u6237",op:"\u5B9E\u65BD\u4EBA\u5458"},total:k,copyList:m,getListData:y,pageChange:s,pageSizeChange:x,columns:[{title:"\u59D3\u540D",key:"realName"},{title:"\u767B\u5F55\u540D",key:"username"},{title:"\u90AE\u7BB1",key:"email"},{title:"\u89D2\u8272",slot:"roles"},{title:"\u51FA\u751F\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],user:_,formRef:b,editStatus:S,pageStatus:C,editLoading:E,openCreate:z,openEdit:R,backNormal:D,submitForm:N,resetForm:L,ruleValidate:{realName:[{required:!0,message:"\u771F\u5B9E\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],username:[{required:!0,message:"\u7528\u6237\u540D\u5FC5\u586B",trigger:"blur"}]},modalVisible:B,handleCreate:F,handleCancel:p,handleEdit:n,handleSubmit:le,handleDelete:te}}},De={class:"pl-16"},Te=g("\u91CD\u7F6E"),qe=g("\u67E5\u8BE2"),Re=g("\u65B0\u589E"),Ne=g(" \u66F4\u591A\u64CD\u4F5C "),Ue=g("\u5237\u65B0"),He=g("\u5220\u9664"),je={key:0},Ee=g("\u53D6 \u6D88"),Le=g("\u786E \u5B9A");function Be(o,t,i,e,m,_){const h=r("base-tree"),d=r("b-input"),u=r("b-form-item"),v=r("b-option"),k=r("b-select"),y=r("b-date-picker"),s=r("b-button"),x=r("b-form"),b=r("b-icon"),S=r("b-dropdown-item"),C=r("b-dropdown-menu"),E=r("b-dropdown"),z=r("action-button"),R=r("b-divider"),D=r("b-table"),N=r("b-page"),L=r("base-table"),U=r("page-cube-wrapper"),B=r("b-tree-select"),W=r("b-modal"),F=r("page-wrapper");return c(),A(F,{desc:"\u9875\u9762\u6570\u636E\u4E3AMock\u6570\u636E\uFF0C\u64CD\u4F5C\u65F6\u4E0D\u4F1A\u8FDB\u884C\u771F\u5B9E\u64CD\u4F5C\u3002\u4EC5\u4E3A\u6A21\u62DF\u5B9E\u73B0\u3002"},{default:a(()=>[l(U,null,{left:a(()=>[l(h,{ref:"treeRef","tree-title":"\u90E8\u95E8\u5217\u8868","show-filter":"",fetch:e.getDepartTree,onSelectChange:e.handleSelect,width:"240px"},null,8,["fetch","onSelectChange"])]),default:a(()=>[f("div",De,[l(L,null,{filter:a(()=>[l(x,{"label-width":"95px"},{default:a(()=>[l(u,{label:"\u7528\u6237\u540D\u79F0"},{default:a(()=>[l(d,{modelValue:e.query.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.query.name=n),clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u7528\u6237\u89D2\u8272"},{default:a(()=>[l(k,{modelValue:e.query.roles,"onUpdate:modelValue":t[1]||(t[1]=n=>e.query.roles=n),clearable:""},{default:a(()=>[(c(!0),V(G,null,$(e.roleMap,(n,p)=>(c(),A(v,{key:p,label:n,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.expand?(c(),V(G,{key:0},[l(u,{label:"\u72B6\u6001"},{default:a(()=>[l(k,{modelValue:e.query.status,"onUpdate:modelValue":t[2]||(t[2]=n=>e.query.status=n),clearable:""},{default:a(()=>[l(v,{label:"\u542F\u7528",value:"1"}),l(v,{label:"\u7981\u7528",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u90AE\u7BB1"},{default:a(()=>[l(d,{modelValue:e.query.email,"onUpdate:modelValue":t[3]||(t[3]=n=>e.query.email=n),clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u65E5\u671F"},{default:a(()=>[l(y,{modelValue:e.query.date,"onUpdate:modelValue":t[4]||(t[4]=n=>e.query.date=n),clearable:""},null,8,["modelValue"])]),_:1})],64)):q("",!0),l(u,null,{default:a(()=>[l(s,null,{default:a(()=>[Te]),_:1}),l(s,{type:"primary",loading:e.loading,onClick:e.getListData},{default:a(()=>[qe]),_:1},8,["loading","onClick"]),l(s,{type:"text",icon:e.expand?"up":"down",onClick:t[5]||(t[5]=n=>e.expand=!e.expand)},{default:a(()=>[g(ee(e.expand?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1},8,["icon"])]),_:1})]),_:1})]),action:a(()=>[l(s,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:a(()=>[Re]),_:1},8,["onClick"])]),actionRight:a(()=>[l(E,{style:{"margin-left":"20px"}},{dropdown:a(()=>[l(C,null,{default:a(()=>[l(S,null,{default:a(()=>[Ue]),_:1}),l(S,null,{default:a(()=>[He]),_:1})]),_:1})]),default:a(()=>[l(s,null,{default:a(()=>[Ne,l(b,{name:"down"})]),_:1})]),_:1})]),page:a(()=>[l(N,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:a(()=>[l(D,{columns:e.columns,data:e.copyList,loading:e.loading,border:""},{roles:a(({row:n})=>[g(ee(e.roleMap[n.roles]),1)]),action:a(({row:n})=>[l(z,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:p=>e.handleEdit(n)},null,8,["onClick"]),l(R,{type:"vertical"}),l(z,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:p=>e.handleDelete(n)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})])]),_:1}),l(W,{"model-value":e.modalVisible,title:`${e.pageStatus.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,onClosed:e.handleCancel},{footer:a(()=>[f("div",null,[l(s,{onClick:e.handleCancel},{default:a(()=>[Ee]),_:1},8,["onClick"]),l(s,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:a(()=>[Le]),_:1},8,["loading","onClick"])])]),default:a(()=>[e.modalVisible?(c(),V("div",je,[l(x,{ref:"formRef",model:e.user,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:a(()=>[l(u,{label:"\u6240\u5C5E\u90E8\u95E8"},{default:a(()=>[l(B,{modelValue:e.user.depart,"onUpdate:modelValue":t[6]||(t[6]=n=>e.user.depart=n),data:e.deptTree,"title-key":"text"},null,8,["modelValue","data"])]),_:1}),l(u,{label:"\u59D3\u540D",prop:"realName"},{default:a(()=>[l(d,{modelValue:e.user.realName,"onUpdate:modelValue":t[7]||(t[7]=n=>e.user.realName=n),placeholder:"\u8F93\u5165\u59D3\u540D",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u7528\u6237\u540D",prop:"username"},{default:a(()=>[l(d,{modelValue:e.user.username,"onUpdate:modelValue":t[8]||(t[8]=n=>e.user.username=n),placeholder:"\u8F93\u5165\u767B\u5F55\u540D",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u90AE\u7BB1"},{default:a(()=>[l(d,{modelValue:e.user.email,"onUpdate:modelValue":t[9]||(t[9]=n=>e.user.email=n),placeholder:"\u8F93\u5165\u90AE\u7BB1",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u89D2\u8272"},{default:a(()=>[l(k,{modelValue:e.user.roles,"onUpdate:modelValue":t[10]||(t[10]=n=>e.user.roles=n),placeholder:"\u9009\u62E9\u89D2\u8272",clearable:""},{default:a(()=>[(c(!0),V(G,null,$(e.roleMap,(n,p)=>(c(),A(v,{key:p,label:n,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])):q("",!0)]),_:1},8,["model-value","title","onClosed"])]),_:1})}var $e=Q(ze,[["render",Be]]);export{$e as default};
