import{G as Z,e as D,w as ee,f as o,g as f,j as L,y as te,z as le,a2 as s,c as e,x as t,F as oe,P as ae,q as c,u as ne,v as se,l as _,t as re}from"./vendor-a6c5ad11.js";import{u as ue}from"./useTable-d56bcb06.js";import{o as ie}from"./index-92c56bc9.js";import{u as ce}from"./useForm-7a8f51b8.js";import{a as q}from"./chunk-bin-ui-next-1e71edb3.js";import"./chunk-brace-6f23dcf5.js";import"./chunk-mockjs-c013c588.js";function de(){return ie({url:"/role/list",method:"get"})}const me={flex:"main:right"},pe={class:"p16"},_e=_("span",null,"\u542F\u7528",-1),be=_("span",null,"\u7981\u7528",-1),we=Object.assign({name:"SysRole"},{__name:"role",setup(fe){const r=Z({page:1,size:10,roleName:"",status:""}),g=D([]),a=D({}),{loading:v,list:B,total:F,getListData:m,pageChange:S}=ue(de,r),{formRef:U,pageStatus:C,editLoading:R,openCreate:$,openEdit:E,backNormal:h,submitForm:T,setBtnLoading:V,modalVisible:y}=ce();ee(()=>B.value,u=>{g.value=u}),m();function j(){a.value={roleName:"",roleCode:"",status:"1"},$()}function M(u){a.value={...u},E()}function k(){a.value={},h()}function G(){q.success("\u5220\u9664\u6210\u529F\uFF01"),m()}function O(){T(()=>{V(!0);const u=C.value;setTimeout(()=>{q.success(`${u.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),V(!1),h(),m()},1e3)})}const w={0:"\u7981\u7528",1:"\u542F\u7528"},P=[{title:"\u89D2\u8272\u540D\u79F0",key:"roleName"},{title:"\u89D2\u8272\u7F16\u7801",key:"roleCode"},{title:"\u72B6\u6001",slot:"status"},{title:"\u521B\u5EFA\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],A={roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],roleCode:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]};return(u,n)=>{const b=o("b-input"),i=o("b-form-item"),H=o("b-option"),I=o("b-select"),d=o("b-button"),N=o("b-form"),x=o("action-button"),J=o("b-divider"),K=o("b-table"),Q=o("b-page"),W=o("base-table"),z=o("page-wrapper"),X=o("b-switch"),Y=o("b-collapse-wrap");return f(),L("div",null,[te(e(z,null,{default:t(()=>[e(W,null,{filter:t(()=>[e(N,{"label-width":"95px"},{default:t(()=>[e(i,{label:"\u89D2\u8272\u540D\u79F0"},{default:t(()=>[e(b,{modelValue:r.roleName,"onUpdate:modelValue":n[0]||(n[0]=l=>r.roleName=l),clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"\u89D2\u8272\u72B6\u6001"},{default:t(()=>[e(I,{modelValue:r.status,"onUpdate:modelValue":n[1]||(n[1]=l=>r.status=l),clearable:""},{default:t(()=>[(f(),L(oe,null,ae(w,(l,p)=>e(H,{key:p,label:l,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(i,{"label-width":"16px"},{default:t(()=>[e(d,{type:"primary",loading:s(v),onClick:s(m)},{default:t(()=>[c("\u67E5\u8BE2")]),_:1},8,["loading","onClick"]),e(d,null,{default:t(()=>[c("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1})]),action:t(()=>[e(d,{type:"primary",icon:"plus-circle",onClick:j},{default:t(()=>[c("\u65B0\u589E")]),_:1})]),page:t(()=>[e(Q,{total:s(F),current:r.page,"page-size":r.size,"show-total":"",onChange:s(S)},null,8,["total","current","page-size","onChange"])]),default:t(()=>[e(K,{columns:P,data:g.value,loading:s(v),size:"small"},{status:t(({row:l})=>[c(ne(w[l.status]),1)]),action:t(({row:l})=>[e(x,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:p=>M(l)},null,8,["onClick"]),e(J,{type:"vertical"}),e(x,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:p=>G(l)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1},512),[[le,!s(y)]]),s(y)?(f(),se(z,{key:0,title:`${s(C).isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,"show-close":"",onClose:k},{rightFooter:t(()=>[_("div",me,[e(d,{onClick:k},{default:t(()=>[c("\u53D6 \u6D88")]),_:1}),e(d,{type:"primary",loading:s(R),onClick:O},{default:t(()=>[c("\u786E \u5B9A")]),_:1},8,["loading"])])]),default:t(()=>[e(N,{ref_key:"formRef",ref:U,model:a.value,rules:A,"label-width":"100px","label-suffix":":"},{default:t(()=>[e(Y,{title:"\u57FA\u7840\u4FE1\u606F",shadow:"none"},{default:t(()=>[_("div",pe,[e(i,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:t(()=>[e(b,{modelValue:a.value.roleName,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.roleName=l),placeholder:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"\u89D2\u8272\u7F16\u7801",prop:"roleCode"},{default:t(()=>[e(b,{modelValue:a.value.roleCode,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.roleCode=l),placeholder:"\u8F93\u5165\u89D2\u8272\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"\u89D2\u8272\u72B6\u6001"},{default:t(()=>[e(X,{size:"large",modelValue:a.value.status,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.status=l),"true-value":"1","false-value":"0"},{open:t(()=>[_e]),close:t(()=>[be]),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])):re("",!0)])}}});export{we as default};
