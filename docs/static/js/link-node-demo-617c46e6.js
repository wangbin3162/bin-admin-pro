var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,d=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{_ as o}from"./page-wrapper-d233775a.js";import{a7 as s,a8 as r,f as c,g as p,J as u,o as f,A as g,B as h,E as b,u as y,d as m,z as v,r as k,a as x,D as j,t as w,y as S,n as _,j as H,G as $,F as K,K as D,c as W,w as E,q as O}from"./vendor-fe3131ae.js";import{n as I}from"./index-e9e85ee6.js";import"./chunk-brace-7f859248.js";import"./chunk-bin-ui-next-169a0b5b.js";const C={name:"page-cube-wrapper",props:{leftDefaultWidth:{type:String,default:"240px"},defaultHeight:{type:String,default:"240px"},defaultMinHeight:{type:String,default:"12px"},draggableMinHeight:{type:String,default:"48px"}},setup(e,{slots:t}){const a=c(!0),n=c("default"),l=p((()=>a.value?e.leftDefaultWidth:"12px")),i=p((()=>t.left&&a.value?`calc(100% - ${e.leftDefaultWidth})`:"100%")),d=p((()=>{const t=n.value;return{default:`calc(100% - ${e.defaultHeight})`,minimum:e.draggableMinHeight,maximum:`calc(100% - ${e.defaultMinHeight})`}[t]})),o=p((()=>{if(!t.draggable)return"100%";const a=n.value;return{default:e.defaultHeight,minimum:`calc(100% - ${e.draggableMinHeight})`,maximum:e.defaultMinHeight}[a]}));return{leftExpand:a,leftWidth:l,rightWidth:i,dragHeight:d,defaultContentHeight:o,toggleLeft:()=>{a.value=!a.value},changeDragStatus:e=>{n.value!==e&&(n.value=e)}}}};s("data-v-eb50ebe2");const P={class:"page-cube-wrapper"},T={class:"page-cube"},M=["title"],L={class:"cube-left-content"},A={class:"toggle"};r(),C.render=function(e,t,a,n,l,i){const d=u("b-icon");return f(),g("div",P,[h("div",T,[e.$slots.left?(f(),g("div",{key:0,class:"page-cube-left",style:b({width:n.leftWidth})},[h("div",{class:"toggle",style:b({left:n.leftWidth}),title:n.leftExpand?"收起":"展开",onClick:t[0]||(t[0]=(...e)=>n.toggleLeft&&n.toggleLeft(...e))},[y(d,{name:n.leftExpand?"caret-left":"caret-right"},null,8,["name"])],12,M),m(h("div",L,[k(e.$slots,"left",{},void 0,!0)],512),[[v,n.leftExpand]])],4)):x("",!0),h("div",{class:"page-cube-content",style:b({width:n.rightWidth})},[e.$slots.default?(f(),g("div",{key:0,style:b({height:n.defaultContentHeight})},[k(e.$slots,"default",{},void 0,!0)],4)):x("",!0),e.$slots.draggable?(f(),g("div",{key:1,class:"draggable-content",style:b({height:n.dragHeight})},[h("div",A,[h("i",{class:"b-iconfont b-icon-up",title:"展开",onClick:t[1]||(t[1]=e=>n.changeDragStatus("maximum"))}),h("i",{class:"b-iconfont b-icon-down",title:"收起",onClick:t[2]||(t[2]=e=>n.changeDragStatus("minimum"))}),h("i",{class:"b-iconfont b-icon-pic-center",title:"默认高度",onClick:t[3]||(t[3]=e=>n.changeDragStatus("default"))})]),k(e.$slots,"draggable",{},void 0,!0)],4)):x("",!0)],4)])])},C.__scopeId="data-v-eb50ebe2";const N={name:"link-node",props:{data:{type:Object,default:()=>({})},defaultIcon:{type:String,default:"table"}}};s("data-v-22a47e0a");const q={class:"link-node"},z={class:"link-node-title",style:{height:"28px",padding:"5px 8px"}},B={class:"link-node-name"},F={key:0,class:"link-node-handle"};r(),N.render=function(e,t,a,n,l,i){return f(),g("div",q,[h("div",z,[h("i",{class:j(["link-node-icon",`b-iconfont b-icon-${a.data.icon||a.defaultIcon}`])},null,2),h("div",B,w(a.data.title),1),e.$slots.action?(f(),g("div",F,[k(e.$slots,"action",{},void 0,!0)])):x("",!0)])])},N.__scopeId="data-v-22a47e0a";const G={name:"link-node-wrapper",components:{LinkNode:N},props:{data:{type:Array,default:()=>[]},defaultIcon:{type:String,default:"table"},emptyText:{type:String,default:"暂无数据"}},setup(e,{emit:o}){const s=S({stateTree:[],flatState:[]}),r=p((()=>I(s.stateTree)));function c(){s.stateTree=e.data,s.flatState=function(){let t=0;const a=[],n=(e,l,i,d=0)=>{e.nodeKey=t++,e.level=d,a[e.nodeKey]={node:e,nodeKey:e.nodeKey},void 0!==l&&(a[e.nodeKey].parent=l.nodeKey,a[l.nodeKey].children.push(e.nodeKey));let o=i?i.split(",").map((e=>+e)):[];void 0!==i&&(o.push(l.nodeKey),a[e.nodeKey].parents=o),e.children&&(d++,a[e.nodeKey].children=[],e.children.forEach((t=>n(t,e,o.join(","),d))))};return e.data.forEach((e=>{n(e)})),a}()}return _((()=>e.data),(()=>{c()}),{deep:!0,immediate:!0}),H((()=>{console.log(s.stateTree),console.log(s.flatState)})),u=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&d(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&d(e,a,t[a]);return e})({},$(s)),t(u,a({dataEmpty:r}));var u}};s("data-v-0ac32784");const J={class:"link-node-wrapper"},Q={key:1};r(),G.render=function(e,t,a,n,l,i){const d=u("link-node"),o=u("b-empty");return f(),g("div",J,[n.dataEmpty?(f(),g("div",Q,[y(o,{style:{margin:"16px 0"}},{default:E((()=>[O(w(a.emptyText),1)])),_:1})])):(f(!0),g(K,{key:0},D(e.stateTree,((e,t)=>(f(),W(d,{key:t,data:e},null,8,["data"])))),128))])},G.__scopeId="data-v-0ac32784";const R={name:"link-node-demo.vue",components:{LinkNodeWrapper:G,PageCubeWrapper:C,PageWrapper:o},data:()=>({nodeData:[{title:"root",children:[{title:"batch_job",children:[{title:"job1"},{title:"job2"}]},{title:"depart",children:[{title:"depart_child"}]},{title:"analysis"}]}]})};s("data-v-a6f15342");const U={class:"link-node-demo"},V=O("left"),X={class:"p24",style:{"background-color":"#f2f2f2",height:"100%"}};r(),R.render=function(e,t,a,n,l,i){const d=u("link-node-wrapper"),o=u("page-cube-wrapper"),s=u("page-wrapper");return f(),W(s,{desc:"连接节点组件，可拖拽配置节点数据，或者进行纯显示。","content-margin":"0"},{default:E((()=>[h("div",U,[y(o,{style:{width:"100%",height:"100%","background-color":"#fff"}},{left:E((()=>[V])),default:E((()=>[h("div",X,[y(d,{data:l.nodeData},null,8,["data"])])])),_:1})])])),_:1})},R.__scopeId="data-v-a6f15342";export{R as default};
