var R=Object.defineProperty;var z=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var S=(i,l,n)=>l in i?R(i,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[l]=n,B=(i,l)=>{for(var n in l||(l={}))A.call(l,n)&&S(i,n,l[n]);if(z)for(var n of z(l))P.call(l,n)&&S(i,n,l[n]);return i};import{u as J}from"./useTable-b7df30ff.js";import{j as K}from"./index-4f2d5d7a.js";import{B as W}from"./index-3f546f00.js";import{P as G}from"./page-wrapper-604a536e.js";import{A as H}from"./index-ba174be3.js";import{u as I}from"./useForm-5f8347aa.js";import{a as L}from"./chunk-bin-ui-next-3d9d9144.js";import{a4 as O,y as Q,f as D,n as X,J as r,o as V,c as F,w as o,u as a,A as M,K as Y,F as Z,q as m,t as $,B as w,a as ee}from"./vendor-607de18e.js";import"./chunk-brace-7f859248.js";function oe(){return K({url:"/role/list",method:"get"})}const ae={name:"Role",components:{PageWrapper:G,ActionButton:H,BaseTable:W},setup(){const i=Q({page:1,size:10,roleName:"",status:""}),l=D([]),n=D({}),{loading:e,list:q,total:j,getListData:s,pageChange:d,pageSizeChange:k}=J(oe,i),{formRef:v,editStatus:c,pageStatus:_,editLoading:p,openCreate:g,openEdit:C,backNormal:b,submitForm:h,resetForm:x,setBtnLoading:y,modalVisible:N}=I();X(()=>q.value,f=>{l.value=f}),s();function t(){n.value={roleName:"",roleCode:"",status:"1"},g()}function u(f){n.value=B({},f),C()}function T(){n.value={},b()}function U(){L.success("\u5220\u9664\u6210\u529F\uFF01"),s()}function E(){h(()=>{y(!0);const f=_.value;setTimeout(()=>{L.success(`${f.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),y(!1),b(),s()},1e3)})}return{statusMap:{0:"\u7981\u7528",1:"\u542F\u7528"},columns:[{title:"\u89D2\u8272\u540D\u79F0",key:"roleName"},{title:"\u89D2\u8272\u7F16\u7801",key:"roleCode"},{title:"\u72B6\u6001",slot:"status"},{title:"\u521B\u5EFA\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],formRef:v,role:n,editStatus:c,pageStatus:_,editLoading:p,openCreate:g,openEdit:C,backNormal:b,submitForm:h,resetForm:x,ruleValidate:{roleName:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],roleCode:[{required:!0,message:"\u89D2\u8272\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]},query:i,loading:e,total:j,copyList:l,getListData:s,pageChange:d,pageSizeChange:k,modalVisible:N,handleCreate:t,handleCancel:T,handleEdit:u,handleSubmit:E,handleDelete:U}}},le=m("\u91CD\u7F6E"),te=m("\u67E5\u8BE2"),ne=m("\u65B0\u589E"),re={key:0},ie=w("span",null,"\u542F\u7528",-1),se=w("span",null,"\u7981\u7528",-1),de=m("\u53D6 \u6D88"),ce=m("\u786E \u5B9A");function ue(i,l,n,e,q,j){const s=r("b-input"),d=r("b-form-item"),k=r("b-option"),v=r("b-select"),c=r("b-button"),_=r("b-form"),p=r("action-button"),g=r("b-divider"),C=r("b-table"),b=r("b-page"),h=r("base-table"),x=r("b-switch"),y=r("b-modal"),N=r("page-wrapper");return V(),F(N,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:o(()=>[a(h,null,{filter:o(()=>[a(_,{"label-width":"95px"},{default:o(()=>[a(d,{label:"\u89D2\u8272\u540D\u79F0"},{default:o(()=>[a(s,{modelValue:e.query.roleName,"onUpdate:modelValue":l[0]||(l[0]=t=>e.query.roleName=t),clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[a(v,{modelValue:e.query.status,"onUpdate:modelValue":l[1]||(l[1]=t=>e.query.status=t),clearable:""},{default:o(()=>[(V(!0),M(Z,null,Y(e.statusMap,(t,u)=>(V(),F(k,{key:u,label:t,value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:o(()=>[a(c,null,{default:o(()=>[le]),_:1}),a(c,{type:"primary",loading:e.loading,onClick:e.getListData},{default:o(()=>[te]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),action:o(()=>[a(c,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:o(()=>[ne]),_:1},8,["onClick"])]),page:o(()=>[a(b,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:o(()=>[a(C,{columns:e.columns,data:e.copyList,loading:e.loading,border:""},{status:o(({row:t})=>[m($(e.statusMap[t.status]),1)]),action:o(({row:t})=>[a(p,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:u=>e.handleEdit(t)},null,8,["onClick"]),a(g,{type:"vertical"}),a(p,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:u=>e.handleDelete(t)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1}),a(y,{"model-value":e.modalVisible,title:`${e.pageStatus.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,onClosed:e.handleCancel},{footer:o(()=>[w("div",null,[a(c,{onClick:e.handleCancel},{default:o(()=>[de]),_:1},8,["onClick"]),a(c,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:o(()=>[ce]),_:1},8,["loading","onClick"])])]),default:o(()=>[e.modalVisible?(V(),M("div",re,[a(_,{ref:"formRef",model:e.role,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:o(()=>[a(d,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:o(()=>[a(s,{modelValue:e.role.roleName,"onUpdate:modelValue":l[2]||(l[2]=t=>e.role.roleName=t),placeholder:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"\u89D2\u8272\u7F16\u7801",prop:"roleCode"},{default:o(()=>[a(s,{modelValue:e.role.roleCode,"onUpdate:modelValue":l[3]||(l[3]=t=>e.role.roleCode=t),placeholder:"\u8F93\u5165\u89D2\u8272\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[a(x,{size:"large",modelValue:e.role.status,"onUpdate:modelValue":l[4]||(l[4]=t=>e.role.status=t),"true-value":"1","false-value":"0"},{open:o(()=>[ie]),close:o(()=>[se]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])):ee("",!0)]),_:1},8,["model-value","title","onClosed"])]),_:1})}var ke=O(ae,[["render",ue]]);export{ke as default};
