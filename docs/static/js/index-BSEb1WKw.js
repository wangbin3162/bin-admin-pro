import{m as K,r as v,q as M,o as C,a as O,g as W,v as A,K as e,w as n,L as s,f as b,j as F,i as H,af as J,G as Q,R as a}from"./vendor-B7whOB5j.js";import{u as X}from"./useTable-D2J07cK1.js";import{e as Y,l as Z,p as ee,h as te,g as ne}from"./cross-tab-msg-DpuitA_N.js";import{n as y}from"./chunk-bin-ui-design-QY08qtjO.js";import{_ as oe}from"./index-BeiDIggM.js";import"./chunk-brace-DF1jSkZr.js";import"./index-CnBue4Tw.js";const de=Object.assign({name:"ExcelList"},{__name:"index",setup(ae){const i=K({page:1,size:10,name:"",isPublish:""}),h=v(null),r=v(!1),p=J(),x=[{title:"序号",width:70,align:"center",type:"index"},{title:"表单名称",key:"name"},{title:"上报数量",key:"reportCount"},{title:"记录个数",key:"records"},{title:"发布",width:100,align:"center",slot:"isPublish"},{title:"操作",width:200,align:"center",slot:"action"}],{loading:g,list:w,total:D,handleSearch:d,getListData:m,pageChange:T}=X(Y,i);d();function q(){i.name="",d()}function V(){let o=p.resolve({path:"/excel-edit",query:{}});window.open(o.href,"_blank")}function $({id:o}){let t=p.resolve({path:"/excel-edit",query:{id:o}});window.open(t.href,"_blank")}function z({id:o}){ee(o).then(()=>{y.success("发布成功！"),m()})}function L({id:o}){te(o).then(()=>{y.success("删除成功！"),m()})}async function P({id:o}){const t=await ne(o);r.value=!0,await Q(),h.value.open(t)}function R(){r.value=!1}function B({id:o}){let t=p.resolve({path:"/data-edit",query:{tempId:o}});window.open(t.href,"_blank")}const E=Z(m);return M(E),(o,t)=>{const N=a("b-input"),k=a("b-form-item"),f=a("b-button"),S=a("b-form"),c=a("action-button"),_=a("b-divider"),j=a("b-table"),U=a("b-page"),G=a("base-table"),I=a("page-wrapper");return C(),O("div",null,[W(e(I,null,{default:n(()=>[e(G,null,{filter:n(()=>[e(S,{"label-width":"95px"},{default:n(()=>[e(k,{label:"表单名称"},{default:n(()=>[e(N,{modelValue:i.name,"onUpdate:modelValue":t[0]||(t[0]=l=>i.name=l),clearable:""},null,8,["modelValue"])]),_:1}),e(k,{"label-width":"16px"},{default:n(()=>[e(f,{type:"primary",loading:s(g),onClick:s(d)},{default:n(()=>t[1]||(t[1]=[b("查询")])),_:1},8,["loading","onClick"]),e(f,{onClick:q},{default:n(()=>t[2]||(t[2]=[b("重置")])),_:1})]),_:1})]),_:1})]),action:n(()=>[e(f,{type:"primary",icon:"plus",onClick:V},{default:n(()=>t[3]||(t[3]=[b("新增")])),_:1})]),page:n(()=>[e(U,{total:s(D),current:i.page,"page-size":i.size,"show-total":"",onChange:s(T)},null,8,["total","current","page-size","onChange"])]),default:n(()=>[e(j,{columns:x,data:s(w),loading:s(g),size:"small"},{isPublish:n(({row:l})=>[e(c,{type:"text",icon:"play-circle",color:"success","is-icon":"",tooltip:"发布",message:"确定发布当前报表么?",confirm:"",disabled:l.isPublish==="1",onClick:u=>z(l)},null,8,["disabled","onClick"])]),action:n(({row:l})=>[e(c,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:u=>$(l)},null,8,["onClick"]),e(_,{type:"vertical"}),e(c,{type:"text",icon:"file-add",color:"#fa8c16","is-icon":"",tooltip:"数据填报",onClick:u=>B(l)},null,8,["onClick"]),e(_,{type:"vertical"}),e(c,{type:"text",icon:"filesearch",color:"#13c2c2","is-icon":"",tooltip:"查看数据",onClick:u=>P(l)},null,8,["onClick"]),e(_,{type:"vertical"}),e(c,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:u=>L(l)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1},512),[[A,!r.value]]),r.value?(C(),F(oe,{key:0,ref_key:"dataTableRef",ref:h,onClose:R},null,512)):H("",!0)])}}});export{de as default};
