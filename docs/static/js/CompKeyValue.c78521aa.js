(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CompKeyValue"],{3385:function(e,n,t){"use strict";t("e38e")},b719:function(e,n,t){"use strict";t.r(n);var l=t("7a23"),a=Object(l["fb"])("data-v-16ba612a");Object(l["G"])("data-v-16ba612a");var o={class:"p16"},u=Object(l["l"])("实际存储值");Object(l["E"])();var c=a((function(e,n,t,c,r,i){var d=Object(l["M"])("key-value-mapping"),s=Object(l["M"])("b-divider"),b=Object(l["M"])("b-ace-editor"),p=Object(l["M"])("b-collapse-wrap"),m=Object(l["M"])("b-col"),f=Object(l["M"])("b-row"),O=Object(l["M"])("page-wrapper");return Object(l["D"])(),Object(l["i"])(O,{desc:"基础映射配置示例，可拖动排序，并封装了通用的hook钩子函数，可进行复用。"},{default:a((function(){return[Object(l["m"])(f,{gutter:16},{default:a((function(){return[Object(l["m"])(m,{span:"12"},{default:a((function(){return[Object(l["m"])(p,{title:"映射配置",shadow:"none"},{default:a((function(){return[Object(l["m"])("div",o,[Object(l["m"])(d,{modelValue:c.mapping,"onUpdate:modelValue":n[1]||(n[1]=function(e){return c.mapping=e})},null,8,["modelValue"]),Object(l["m"])(s,{align:"left"},{default:a((function(){return[u]})),_:1}),Object(l["m"])(b,{"model-value":c.mappingJson,readonly:""},null,8,["model-value"])])]})),_:1})]})),_:1}),Object(l["m"])(m,{span:"12"},{default:a((function(){return[Object(l["m"])(p,{title:"useSortable",shadow:"none"},{default:a((function(){return[Object(l["m"])(b,{"model-value":c.STR,lang:"typescript",readonly:"",theme:"sqlserver",height:"850px",snippets:!1},null,8,["model-value"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),r=t("77d9"),i=Object(l["fb"])("data-v-59103c7a");Object(l["G"])("data-v-59103c7a");var d={class:"key-value-wrapper"},s={class:"mapping-list",ref:"listRef"},b={class:"mt-8 mb-8"},p=Object(l["l"])("新增");Object(l["E"])();var m=i((function(e,n,t,a,o,u){var c=Object(l["M"])("drag-handle"),r=Object(l["M"])("b-input"),m=Object(l["M"])("b-button");return Object(l["D"])(),Object(l["i"])("div",d,[Object(l["m"])("ul",s,[(Object(l["D"])(!0),Object(l["i"])(l["b"],null,Object(l["K"])(a.list,(function(e,n){return Object(l["D"])(),Object(l["i"])("li",{key:n,class:"mapping-item"},[Object(l["m"])(c),Object(l["m"])("label",null,[Object(l["m"])(r,{modelValue:a.list[n].key,"onUpdate:modelValue":function(e){return a.list[n].key=e},placeholder:"key",clearable:"",onInput:a.inputChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),Object(l["m"])("label",null,[Object(l["m"])(r,{modelValue:a.list[n].value,"onUpdate:modelValue":function(e){return a.list[n].value=e},placeholder:"value",clearable:"",onInput:a.inputChange},null,8,["modelValue","onUpdate:modelValue","onInput"])]),Object(l["m"])("i",{class:"destroy b-iconfont b-icon-delete",onClick:function(e){return a.handleRemove(n)}},null,8,["onClick"])])})),128))],512),Object(l["m"])("div",b,[Object(l["m"])(m,{icon:"plus-circle",type:"text",onClick:a.handleAdd},{default:i((function(){return[p]})),_:1},8,["onClick"])])])})),f=(t("a434"),t("ca00")),O=t("b7fb"),j=t("7eaf"),v={name:"KeyValueMapping",components:{DragHandle:j["a"]},props:{modelValue:{type:Array,default:function(){return[]}}},emits:["update:modelValue"],setup:function(e,n){var t=n.emit,a=Object(l["I"])([]),o=Object(O["a"])(a,r),u=o.listRef;function c(){r()}function r(){t("update:modelValue",a.value)}function i(){a.value.push({key:"",value:""}),r()}function d(e){a.value.splice(e,1),r()}return Object(l["Z"])((function(){return e.modelValue}),(function(e){a.value=Object(f["b"])(e)}),{immediate:!0,deep:!0}),{listRef:u,list:a,inputChange:c,handleAdd:i,handleRemove:d}}};t("3385");v.render=m,v.__scopeId="data-v-59103c7a";var g=v,h="import Sortable from 'sortablejs'\nimport { onBeforeUnmount, onMounted, ref } from 'vue'\n\n/**\n * sortable hooks，用于创建拖拽排序列表\n * @param list 列表list<ref>\n * @param endFun 拖拽结束事件函数\n * @param option 其他sortable配置项\n */\nexport default function useSortable(list, endFun, option = {}) {\n  const defaultOptions = {\n    animation: 150,\n    ghostClass: 'blue-background-class',\n    // ************* 拖动对象移动样式\n    dragClass: 'drag-item-class',\n    // ************* 禁用html5原生拖拽行为\n    forceFallback: true,\n    handle: '.drag'\n  }\n  const listRef = ref(null)\n  let sortInstance = null\n  onMounted(() => {\n    if (sortInstance) sortInstance.destroy()\n    const el = listRef.value\n    if (!el) return\n    sortInstance = Sortable.create(el, {\n      ...defaultOptions,\n      ...option,\n      onUpdate: ({ newIndex, oldIndex }) => {\n        const $li = el.children[newIndex]\n        const $oldLi = el.children[oldIndex]\n        // 先删除移动的节点\n        el.removeChild($li)\n        // 再插入移动的节点到原有节点，还原了移动的操作\n        if (newIndex > oldIndex) {\n          el.insertBefore($li, $oldLi)\n        } else {\n          el.insertBefore($li, $oldLi.nextSibling)\n        }\n        // 更新items数组\n        const targetRow = list.value.splice(oldIndex, 1)[0]\n        list.value.splice(newIndex, 0, targetRow)\n        // 下一个tick就会走patch更新\n      },\n      onEnd: (evt) => {\n        endFun && endFun()\n      }\n    })\n  })\n  onBeforeUnmount(() => {\n    if (sortInstance) {\n      sortInstance.destroy()\n      sortInstance = null\n    }\n  })\n  return {\n    listRef\n  }\n}\n",y={name:"CompKeyValue",components:{KeyValueMapping:g,PageWrapper:r["a"]},setup:function(e){var n=Object(l["I"])([{key:"1",value:"a"},{key:"2",value:"b"},{key:"3",value:"c"}]),t=Object(l["g"])((function(){return JSON.stringify(n.value,null,2)}));return{mapping:n,mappingJson:t,STR:h}}};y.render=c,y.__scopeId="data-v-16ba612a";n["default"]=y},e38e:function(e,n,t){}}]);