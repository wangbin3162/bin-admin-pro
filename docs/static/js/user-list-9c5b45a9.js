import{u as x}from"./useTable-e67ff7d0.js";import{g as L}from"./user.api-c42a3147.js";import{a as q}from"./chunk-bin-ui-next-18ad2328.js";import{aa as w,r as S,q as M,K as N,g as B,w as a,E as i,o as y,a as t,e as n,d as v,O as D,t as d,s as r,m as R,F as V}from"./vendor-fd0a4eac.js";import"./index-fc576122.js";import"./chunk-brace-3ad28406.js";import"./chunk-d3-34d4274d.js";import"./chunk-mockjs-f396cf70.js";const I={name:"UserList",setup(){const b=S({page:1,size:10}),c=M([]),{loading:h,list:o,total:C,getListData:k,pageChange:p,pageSizeChange:l}=x(L,b);function u(s){q.success(`\u590D\u5236ID\uFF1A${s}\u6210\u529F\uFF01`)}function m(s,_){c.value[_].roles=s}return N(()=>o.value,s=>{c.value=s.map(_=>({..._,expand:!1}))}),k(),{query:b,roleMap:{admin:"\u7BA1\u7406\u5458",user:"\u666E\u901A\u7528\u6237",op:"\u5B9E\u65BD\u4EBA\u5458"},roleMapStyle:{admin:"purple",user:"blue",op:"volcano"},loading:h,list:o,copyList:c,total:C,pageChange:p,pageSizeChange:l,handleCopy:u,setRole:m}}},U={class:"list-wrap"},E={class:"list-item-meta"},F=["src"],T={class:"list-item-meta-name"},K={class:"list-item-id"},O={class:"list-item-email mt-8"},j={class:"list-item-action mt-8",flex:"cross:center"},A={key:0,class:"list-item-action mt-8"},G={class:"mt-16 t-center"};function H(b,c,h,o,C,k){const p=i("b-skeleton"),l=i("b-divider"),u=i("b-button"),m=i("b-tag"),s=i("action-button"),_=i("b-page"),z=i("page-container");return y(),B(z,{desc:"\u5305\u542B\u4FE1\u606F\u7684\u5217\u8868\uFF0C\u5E26\u6709\u5E38\u89C4\u64CD\u4F5C\u3002\u672C\u9875\u9762\u4E5F\u7528\u4F5C\u793A\u4F8B\uFF0C\u5B9E\u9645\u64CD\u4F5C\u4EE5\u4E1A\u52A1\u9700\u6C42\u81EA\u884C\u7F16\u5199\u3002",bg:""},{default:a(()=>[t(p,{loading:o.loading},{template:a(()=>[t(p,{animation:""}),t(l),t(p,{animation:""}),t(l),t(p,{animation:""}),t(l)]),default:a(()=>[n("ul",U,[(y(!0),v(V,null,D(o.copyList,(e,f)=>(y(),v("li",{key:e.id,class:"user-list-item"},[n("div",E,[n("img",{src:e.avatar,alt:"",class:"avatar"},null,8,F),n("div",T,d(e.realName),1)]),n("div",K,[n("span",null,"ID:"+d(e.id),1),t(u,{size:"mini",icon:"file-copy",onClick:g=>o.handleCopy(e.id)},{default:a(()=>[r("\u590D\u5236")]),_:2},1032,["onClick"])]),n("div",O,"\u90AE\u7BB1\u5730\u5740\uFF1A"+d(e.email),1),n("div",j,[t(m,{type:e.verify?"success":"danger"},{default:a(()=>[r(d(e.verify?"\u5DF2\u8BA4\u8BC1":"\u672A\u8BA4\u8BC1"),1)]),_:2},1032,["type"]),t(m,{type:o.roleMapStyle[e.roles]},{default:a(()=>[r(d(o.roleMap[e.roles]),1)]),_:2},1032,["type"]),t(u,{icon:e.expand?"minus-square":"plus-square",size:"small",style:{"margin-left":"16px"},onClick:g=>e.expand=!e.expand},{default:a(()=>[r(d(e.expand?"\u6536\u8D77\u64CD\u4F5C":"\u5C55\u5F00\u64CD\u4F5C"),1)]),_:2},1032,["icon","onClick"])]),e.expand?(y(),v("div",A,[t(s,{"button-props":{type:e.roles!=="admin"?"primary":null,size:"mini",disabled:e.roles==="admin"},onClick:g=>o.setRole("admin",f),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u7BA1\u7406\u5458\u5417\uFF1F",confirm:""},{default:a(()=>[r(" \u7BA1\u7406\u5458 ")]),_:2},1032,["button-props","onClick"]),t(l,{type:"vertical"}),t(s,{"button-props":{type:e.roles!=="user"?"primary":null,size:"mini",disabled:e.roles==="user"},onClick:g=>o.setRole("user",f),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u666E\u901A\u7528\u6237\u5417\uFF1F",confirm:""},{default:a(()=>[r(" \u666E\u901A\u7528\u6237 ")]),_:2},1032,["button-props","onClick"]),t(l,{type:"vertical"}),t(s,{"button-props":{type:e.roles!=="op"?"primary":null,size:"mini",disabled:e.roles==="op"},onClick:g=>o.setRole("op",f),message:"\u8BBE\u7F6E\u89D2\u8272\u4E3A\u5B9E\u65BD\u4EBA\u5458\u5417\uFF1F",confirm:""},{default:a(()=>[r(" \u5B9E\u65BD\u4EBA\u5458 ")]),_:2},1032,["button-props","onClick"])])):R("",!0)]))),128))])]),_:1},8,["loading"]),n("div",G,[t(_,{total:o.total,current:o.query.page,"onUpdate:current":c[0]||(c[0]=e=>o.query.page=e),"page-size":o.query.size,"show-elevator":"","show-sizer":"","show-total":"",onChange:o.pageChange,onSizeChange:o.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])])]),_:1})}const ee=w(I,[["render",H],["__scopeId","data-v-38ebba41"]]);export{ee as default};
