import{u as ge}from"./useTable-hlBmhlAs.js";import{c as ve,g as B}from"./mock.api-B0TQ_Vwh.js";import{u as Ve}from"./useForm-Uovr2fiU.js";import{n as $}from"./chunk-bin-ui-design-55yTQV6H.js";import{q as ye}from"./index-DlSIhdb0.js";import{r as f,m as Ce,n as ke,o as _,j as we,w as t,K as e,L as r,a as V,Q as F,F as k,i as E,f as s,t as j,b as xe,R as o}from"./vendor-COsJffew.js";import"./avatar04-C-sfeKu8.js";import"./chunk-brace-DF1jSkZr.js";const Ne={key:0},$e=Object.assign({name:"SysUserAccount"},{__name:"user-account",setup(Ue){const A=f(null),K=f({}),u=Ce({page:1,size:10,name:"",roles:"",status:"",date:"",email:""}),b=f(!1),w=f([]),n=f({}),{treeData:x,getTreeData:M}=ye(B);M().then(()=>console.log(x.value));const{loading:N,list:O,total:Q,getListData:g,pageChange:W,pageSizeChange:G}=ge(ve,u),{formRef:H,pageStatus:U,editLoading:I,openCreate:J,openEdit:P,backNormal:S,submitForm:X,setBtnLoading:z,modalVisible:T}=Ve();ke(O,i=>{w.value=i.map(l=>({...l,expand:!1}))});function Y(i){i.selected&&(K.value=i)}function Z(){n.value={realName:"",username:"",email:"",roles:"",depart:""},J()}function h(i){n.value={...i,depart:""},P()}function D(){n.value={},S()}function ee(){$.success("删除成功！"),g()}function le(){X(()=>{z(!0);const i=U.value;setTimeout(()=>{$.success(`${i.isCreate?"新增":"修改"}成功！`),z(!1),S(),g()},1e3)})}g();const y={admin:"管理员",user:"普通用户",op:"实施人员"},te=[{title:"姓名",key:"realName"},{title:"登录名",key:"username"},{title:"邮箱",key:"email"},{title:"角色",slot:"roles"},{title:"出生日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],ae={realName:[{required:!0,message:"真实名称必填",trigger:"blur"}],username:[{required:!0,message:"用户名必填",trigger:"blur"}]};return(i,l)=>{const oe=o("base-tree"),c=o("b-input"),d=o("b-form-item"),v=o("b-option"),C=o("b-select"),ne=o("b-date-picker"),m=o("b-button"),L=o("b-form"),ue=o("b-icon"),R=o("b-dropdown-item"),re=o("b-dropdown-menu"),de=o("b-dropdown"),q=o("action-button"),se=o("b-divider"),ie=o("b-table"),me=o("b-page"),pe=o("base-table"),be=o("b-layout"),ce=o("b-tree-select"),fe=o("b-modal"),_e=o("page-wrapper");return _(),we(_e,null,{default:t(()=>[e(be,{"has-sider":"",collapsedWidth:24},{sider:t(()=>[e(oe,{ref_key:"treeRef",ref:A,"tree-title":"部门列表","show-filter":"",fetch:r(B),onSelectChange:Y},null,8,["fetch"])]),default:t(()=>[e(pe,null,{filter:t(()=>[e(L,{"label-width":"95px"},{default:t(()=>[e(d,{label:"用户名称"},{default:t(()=>[e(c,{modelValue:u.name,"onUpdate:modelValue":l[0]||(l[0]=a=>u.name=a),clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"用户角色"},{default:t(()=>[e(C,{modelValue:u.roles,"onUpdate:modelValue":l[1]||(l[1]=a=>u.roles=a),clearable:""},{default:t(()=>[(_(),V(k,null,F(y,(a,p)=>e(v,{key:p,label:a,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),b.value?(_(),V(k,{key:0},[e(d,{label:"状态"},{default:t(()=>[e(C,{modelValue:u.status,"onUpdate:modelValue":l[2]||(l[2]=a=>u.status=a),clearable:""},{default:t(()=>[e(v,{label:"启用",value:"1"}),e(v,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"邮箱"},{default:t(()=>[e(c,{modelValue:u.email,"onUpdate:modelValue":l[3]||(l[3]=a=>u.email=a),clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"日期"},{default:t(()=>[e(ne,{modelValue:u.date,"onUpdate:modelValue":l[4]||(l[4]=a=>u.date=a),clearable:""},null,8,["modelValue"])]),_:1})],64)):E("",!0),e(d,null,{default:t(()=>[e(m,{type:"primary",loading:r(N),onClick:r(g)},{default:t(()=>l[11]||(l[11]=[s("查询")])),_:1},8,["loading","onClick"]),e(m,null,{default:t(()=>l[12]||(l[12]=[s("重置")])),_:1}),e(m,{type:"text",icon:b.value?"up":"down",onClick:l[5]||(l[5]=a=>b.value=!b.value)},{default:t(()=>[s(j(b.value?"收起":"展开"),1)]),_:1},8,["icon"])]),_:1})]),_:1})]),action:t(()=>[e(m,{type:"primary",icon:"plus",onClick:Z},{default:t(()=>l[13]||(l[13]=[s("新增")])),_:1})]),actionRight:t(()=>[e(de,{style:{"margin-left":"20px"}},{dropdown:t(()=>[e(re,null,{default:t(()=>[e(R,null,{default:t(()=>l[15]||(l[15]=[s("刷新")])),_:1}),e(R,null,{default:t(()=>l[16]||(l[16]=[s("删除")])),_:1})]),_:1})]),default:t(()=>[e(m,null,{default:t(()=>[l[14]||(l[14]=s(" 更多操作 ")),e(ue,{name:"down"})]),_:1})]),_:1})]),page:t(()=>[e(me,{total:r(Q),current:u.page,"page-size":u.size,"show-total":"",onChange:r(W),onSizeChange:r(G)},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:t(()=>[e(ie,{columns:te,data:w.value,loading:r(N),size:"small"},{roles:t(({row:a})=>[s(j(y[a.roles]),1)]),action:t(({row:a})=>[e(q,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:p=>h(a)},null,8,["onClick"]),e(se,{type:"vertical"}),e(q,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:p=>ee(a)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1}),e(fe,{"model-value":r(T),title:`${r(U).isCreate?"新增":"修改"}用户`,onClosed:D},{footer:t(()=>[xe("div",null,[e(m,{onClick:D},{default:t(()=>l[17]||(l[17]=[s("取 消")])),_:1}),e(m,{type:"primary",loading:r(I),onClick:le},{default:t(()=>l[18]||(l[18]=[s("确 定")])),_:1},8,["loading"])])]),default:t(()=>[r(T)?(_(),V("div",Ne,[e(L,{ref_key:"formRef",ref:H,model:n.value,rules:ae,"label-width":"100px","label-suffix":":"},{default:t(()=>[e(d,{label:"所属部门"},{default:t(()=>[e(ce,{modelValue:n.value.depart,"onUpdate:modelValue":l[6]||(l[6]=a=>n.value.depart=a),data:r(x),"title-key":"text"},null,8,["modelValue","data"])]),_:1}),e(d,{label:"姓名",prop:"realName"},{default:t(()=>[e(c,{modelValue:n.value.realName,"onUpdate:modelValue":l[7]||(l[7]=a=>n.value.realName=a),placeholder:"输入姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"用户名",prop:"username"},{default:t(()=>[e(c,{modelValue:n.value.username,"onUpdate:modelValue":l[8]||(l[8]=a=>n.value.username=a),placeholder:"输入登录名",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"邮箱"},{default:t(()=>[e(c,{modelValue:n.value.email,"onUpdate:modelValue":l[9]||(l[9]=a=>n.value.email=a),placeholder:"输入邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(d,{label:"角色"},{default:t(()=>[e(C,{modelValue:n.value.roles,"onUpdate:modelValue":l[10]||(l[10]=a=>n.value.roles=a),placeholder:"选择角色",clearable:""},{default:t(()=>[(_(),V(k,null,F(y,(a,p)=>e(v,{key:p,label:a,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])):E("",!0)]),_:1},8,["model-value","title"])]),_:1})}}});export{$e as default};
