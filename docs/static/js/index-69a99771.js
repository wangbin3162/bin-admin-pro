import{m as y}from"./index-92c56bc9.js";import{l as E,r as L,i as M}from"./cross-tab-msg-015cdf60.js";import{e as l,ad as R,G as T,H as j,f as o,g as z,v as G,x as i,c as n,q as H,t as O}from"./vendor-a6c5ad11.js";import{a as U}from"./chunk-bin-ui-next-1e71edb3.js";const Q=Object.assign({name:"SysRole"},{__name:"index",emits:["close"],setup(A,{expose:g,emit:C}){const r=l(!1),p=R(),a=T({tempId:""}),s=l([]),c=l({}),u=l(!1),v=l([]);function k(){const e=y(c.value.mapping);s.value=[{title:"\u5E8F\u53F7",width:70,align:"center",type:"index"}],e.forEach((t,m)=>{m<5&&s.value.push({title:t.fieldTitle,key:t.fieldName})}),s.value.push({title:"\u64CD\u4F5C",width:150,align:"center",slot:"action"})}function w(){let e=p.resolve({path:"/data-edit",query:{tempId:a.tempId}});window.open(e.href,"_blank")}function x({id:e}){let t=p.resolve({path:"/data-edit",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function I({id:e}){let t=p.resolve({path:"/data-edit-simple",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function q({id:e}){L(e).then(()=>{U.success("\u5220\u9664\u6210\u529F\uFF01"),d()})}async function d(){try{u.value=!0;const{rows:e}=await M(a);v.value=e.map(t=>({id:t.id,tempId:t.tempId,tempName:t.tempName,...t.data}))}catch(e){console.log(e)}u.value=!1}function D(e){r.value=!0,c.value=y(e),a.tempId=e.id,k(),d()}function N(){r.value=!1,C("close")}g({open:D});const S=E(d);return j(S),(e,t)=>{const m=o("b-button"),_=o("action-button"),h=o("b-divider"),$=o("b-table"),V=o("base-table"),B=o("page-wrapper");return r.value?(z(),G(B,{key:0,title:`${c.value.name?`[${c.value.name}] `:""}\u6570\u636E\u67E5\u770B`,"show-close":"",onClose:N},{default:i(()=>[n(V,null,{action:i(()=>[n(m,{type:"primary",icon:"plus",onClick:w},{default:i(()=>[H("\u65B0\u589E")]),_:1})]),default:i(()=>[n($,{columns:s.value,data:v.value,loading:u.value,size:"small"},{action:i(({row:f})=>[n(_,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:b=>x(f)},null,8,["onClick"]),n(h,{type:"vertical"}),n(_,{type:"text",icon:"edit","is-icon":"",tooltip:"\u8868\u5355\u7F16\u8F91",onClick:b=>I(f)},null,8,["onClick"]),n(h,{type:"vertical"}),n(_,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:b=>q(f)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})]),_:1},8,["title"])):O("",!0)}}});export{Q as _};
