var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,u=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&n(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&n(e,l,a[l]);return e},d=(e,t)=>a(e,l(t));import{u as i}from"./useTable-9216081f.js";import{g as s}from"./user.api-c48d3050.js";import{_ as p}from"./index-41d8d37e.js";import{_ as m}from"./page-wrapper-ea777216.js";import{_ as c}from"./index-24e3f9ac.js";import{_ as f,u as b}from"./index-60e21d33.js";import{g}from"./depart.api-fa696167.js";import{u as y}from"./useForm-1a257857.js";import{a as h}from"./chunk-bin-ui-next-f06badfa.js";import{_ as C}from"./page-cube-wrapper-8e3b9e6f.js";import{f as _,y as V,n as k,J as v,o as w,c as x,w as j,u as q,B as S,A as D,K as U,F as z,a as T,q as L,t as N}from"./vendor-b1b195f8.js";import"./index-c2ebc9d7.js";import"./chunk-brace-7f859248.js";const O={name:"UserAccount",components:{PageCubeWrapper:C,BaseTree:f,ActionButton:c,BaseTable:p,PageWrapper:m},setup(){const e=_(null),a=_({}),l=V({page:1,size:10,name:"",roles:"",status:"",date:"",email:""}),t=_(!1),o=_([]),r=_({}),{treeData:n,getTreeData:p}=b(g);p().then((()=>console.log(n.value)));const{loading:m,list:c,total:f,getListData:C,pageChange:v,pageSizeChange:w}=i(s,l),{formRef:x,editStatus:j,pageStatus:q,editLoading:S,openCreate:D,openEdit:U,backNormal:z,submitForm:T,resetForm:L,setBtnLoading:N,modalVisible:O}=y();return k(c,(e=>{o.value=e.map((e=>d(u({},e),{expand:!1})))})),C(),{treeRef:e,currentTreeNode:a,handleSelect:function(e,l){e.selected&&(a.value=e)},getDepartTree:g,deptTree:n,expand:t,query:l,loading:m,roleMap:{admin:"管理员",user:"普通用户",op:"实施人员"},total:f,copyList:o,getListData:C,pageChange:v,pageSizeChange:w,columns:[{title:"姓名",key:"realName"},{title:"登录名",key:"username"},{title:"邮箱",key:"email"},{title:"角色",slot:"roles"},{title:"出生日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],user:r,formRef:x,editStatus:j,pageStatus:q,editLoading:S,openCreate:D,openEdit:U,backNormal:z,submitForm:T,resetForm:L,ruleValidate:{realName:[{required:!0,message:"真实名称必填",trigger:"blur"}],username:[{required:!0,message:"用户名必填",trigger:"blur"}]},modalVisible:O,handleCreate:function(){r.value={realName:"",username:"",email:"",roles:"",depart:""},D()},handleCancel:function(){r.value={},z()},handleEdit:function(e){r.value=d(u({},e),{depart:""}),U()},handleSubmit:function(){T((()=>{N(!0);const e=q.value;setTimeout((()=>{h.success((e.isCreate?"新增":"修改")+"成功！"),N(!1),z(),C()}),1e3)}))},handleDelete:function(){h.success("删除成功！"),C()}}}},P={class:"pl-16"},F=L("重置"),R=L("查询"),B=L("新增"),E=L(" 更多操作 "),M=L("刷新"),A=L("删除"),W={key:0},I=L("取 消"),J=L("确 定");O.render=function(e,a,l,t,o,r){const n=v("base-tree"),u=v("b-input"),d=v("b-form-item"),i=v("b-option"),s=v("b-select"),p=v("b-date-picker"),m=v("b-button"),c=v("b-form"),f=v("b-icon"),b=v("b-dropdown-item"),g=v("b-dropdown-menu"),y=v("b-dropdown"),h=v("action-button"),C=v("b-divider"),_=v("b-table"),V=v("b-page"),k=v("base-table"),O=v("page-cube-wrapper"),K=v("b-tree-select"),G=v("b-modal"),H=v("page-wrapper");return w(),x(H,{desc:"页面数据为Mock数据，操作时不会进行真实操作。仅为模拟实现。"},{default:j((()=>[q(O,null,{left:j((()=>[q(n,{ref:"treeRef","tree-title":"部门列表","show-filter":"",fetch:t.getDepartTree,onSelectChange:t.handleSelect,width:"240px"},null,8,["fetch","onSelectChange"])])),default:j((()=>[S("div",P,[q(k,null,{filter:j((()=>[q(c,{"label-width":"95px"},{default:j((()=>[q(d,{label:"用户名称"},{default:j((()=>[q(u,{modelValue:t.query.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.query.name=e),clearable:""},null,8,["modelValue"])])),_:1}),q(d,{label:"用户角色"},{default:j((()=>[q(s,{modelValue:t.query.roles,"onUpdate:modelValue":a[1]||(a[1]=e=>t.query.roles=e),clearable:""},{default:j((()=>[(w(!0),D(z,null,U(t.roleMap,((e,a)=>(w(),x(i,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),t.expand?(w(),D(z,{key:0},[q(d,{label:"状态"},{default:j((()=>[q(s,{modelValue:t.query.status,"onUpdate:modelValue":a[2]||(a[2]=e=>t.query.status=e),clearable:""},{default:j((()=>[q(i,{label:"启用",value:"1"}),q(i,{label:"禁用",value:"0"})])),_:1},8,["modelValue"])])),_:1}),q(d,{label:"邮箱"},{default:j((()=>[q(u,{modelValue:t.query.email,"onUpdate:modelValue":a[3]||(a[3]=e=>t.query.email=e),clearable:""},null,8,["modelValue"])])),_:1}),q(d,{label:"日期"},{default:j((()=>[q(p,{modelValue:t.query.date,"onUpdate:modelValue":a[4]||(a[4]=e=>t.query.date=e),clearable:""},null,8,["modelValue"])])),_:1})],64)):T("",!0),q(d,null,{default:j((()=>[q(m,null,{default:j((()=>[F])),_:1}),q(m,{type:"primary",loading:t.loading,onClick:t.getListData},{default:j((()=>[R])),_:1},8,["loading","onClick"]),q(m,{type:"text",icon:t.expand?"up":"down",onClick:a[5]||(a[5]=e=>t.expand=!t.expand)},{default:j((()=>[L(N(t.expand?"收起":"展开"),1)])),_:1},8,["icon"])])),_:1})])),_:1})])),action:j((()=>[q(m,{type:"primary",icon:"plus-circle",onClick:t.handleCreate},{default:j((()=>[B])),_:1},8,["onClick"])])),actionRight:j((()=>[q(y,{style:{"margin-left":"20px"}},{dropdown:j((()=>[q(g,null,{default:j((()=>[q(b,null,{default:j((()=>[M])),_:1}),q(b,null,{default:j((()=>[A])),_:1})])),_:1})])),default:j((()=>[q(m,null,{default:j((()=>[E,q(f,{name:"down"})])),_:1})])),_:1})])),page:j((()=>[q(V,{total:t.total,current:t.query.page,"page-size":t.query.size,"show-sizer":"","show-total":"",onChange:t.pageChange,onSizeChange:t.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])])),default:j((()=>[q(_,{columns:t.columns,data:t.copyList,loading:t.loading,border:""},{roles:j((({row:e})=>[L(N(t.roleMap[e.roles]),1)])),action:j((({row:e})=>[q(h,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:a=>t.handleEdit(e)},null,8,["onClick"]),q(C,{type:"vertical"}),q(h,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:a=>t.handleDelete(e)},null,8,["onClick"])])),_:1},8,["columns","data","loading"])])),_:1})])])),_:1}),q(G,{"model-value":t.modalVisible,title:(t.pageStatus.isCreate?"新增":"修改")+"角色",onClosed:t.handleCancel},{footer:j((()=>[S("div",null,[q(m,{onClick:t.handleCancel},{default:j((()=>[I])),_:1},8,["onClick"]),q(m,{type:"primary",loading:t.editLoading,onClick:t.handleSubmit},{default:j((()=>[J])),_:1},8,["loading","onClick"])])])),default:j((()=>[t.modalVisible?(w(),D("div",W,[q(c,{ref:"formRef",model:t.user,rules:t.ruleValidate,"label-width":"100px","label-suffix":":"},{default:j((()=>[q(d,{label:"所属部门"},{default:j((()=>[q(K,{modelValue:t.user.depart,"onUpdate:modelValue":a[6]||(a[6]=e=>t.user.depart=e),data:t.deptTree,"title-key":"text"},null,8,["modelValue","data"])])),_:1}),q(d,{label:"姓名",prop:"realName"},{default:j((()=>[q(u,{modelValue:t.user.realName,"onUpdate:modelValue":a[7]||(a[7]=e=>t.user.realName=e),placeholder:"输入姓名",clearable:""},null,8,["modelValue"])])),_:1}),q(d,{label:"用户名",prop:"username"},{default:j((()=>[q(u,{modelValue:t.user.username,"onUpdate:modelValue":a[8]||(a[8]=e=>t.user.username=e),placeholder:"输入登录名",clearable:""},null,8,["modelValue"])])),_:1}),q(d,{label:"邮箱"},{default:j((()=>[q(u,{modelValue:t.user.email,"onUpdate:modelValue":a[9]||(a[9]=e=>t.user.email=e),placeholder:"输入邮箱",clearable:""},null,8,["modelValue"])])),_:1}),q(d,{label:"角色"},{default:j((()=>[q(s,{modelValue:t.user.roles,"onUpdate:modelValue":a[10]||(a[10]=e=>t.user.roles=e),placeholder:"选择角色",clearable:""},{default:j((()=>[(w(!0),D(z,null,U(t.roleMap,((e,a)=>(w(),x(i,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])):T("",!0)])),_:1},8,["model-value","title","onClosed"])])),_:1})};export{O as default};
