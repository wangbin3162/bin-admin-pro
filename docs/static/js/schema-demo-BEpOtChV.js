import{a8 as ee,r as a,p as te,G as ne,o as u,j as I,w as o,b as n,f as d,K as s,a as f,Q as q,F as H,i as y,t as A,I as ae,T as le,R as m,H as N}from"./vendor-B7whOB5j.js";import{n as oe}from"./chunk-bin-ui-design-QY08qtjO.js";import{f as se}from"./index-CnBue4Tw.js";import"./chunk-brace-DF1jSkZr.js";const ie="/bin-admin-pro/static/png/temp_1-_EAKMiPW.png",ue="/bin-admin-pro/static/png/temp_2-6UulMs8n.png",ce="/bin-admin-pro/static/png/temp_3-D3Gb59z4.png",re="/bin-admin-pro/static/png/temp_4-GGDLa8Nb.png",pe="/bin-admin-pro/static/png/temp_5-By7LQ-F7.png",de="/bin-admin-pro/static/png/temp_6-B0Z6jyM9.png",me="/bin-admin-pro/static/png/temp_7-BMxrvXRp.png",ve="/bin-admin-pro/static/png/temp_8-BXI-X1Ao.png",fe=[ie,ue,ce,re,pe,de,me,ve];function ge(){const V=[];for(let v=1;v<=8;v++)V.push({id:Math.floor(Math.random()*1e4),name:`图片_${v}`,bgInfo:{url:fe[v-1],width:2447,height:3461},comps:[]});return V}const _e={class:"preview-panel",flex:""},he={class:"left-images"},ye={class:"top-bar image-list"},be={class:"image-list-wp"},Ce=["onClick"],ke=["title","onClick"],xe={key:0,class:"top-bar",flex:"main:justify"},we={key:0,class:"config-panel"},Ie={class:"top-bar",flex:"main:justify"},Ve={class:"editor"},Se={__name:"schema-demo",setup(V){const v=a(null),b=a(null),S=a(!1),R=a({}),z=a(null),C=a(!1),g=a(""),r=a(""),B=a(""),_=a(-1),T=a(""),k=a(""),j=a(-1),p=a(ge()),x=a(!1),w=a(400);function M(t,e){_.value=e,T.value=t.id,b.value.setConfig(t)}function D(t=!1){z.value=b.value.getAllConfig();const e=p.value[_.value],i=se({id:e.id,name:e.name},z.value);p.value[_.value]=i,t&&oe({type:"success",message:"保存成功! "})}function E(t,e){e>=0&&D(),M(t,e)}function K(){g.value="全局",r.value=B.value,C.value=!0}function P(t,e,i,$){E(t,e),k.value=i.id,j.value=$,g.value=`${t.name} - ${i.alias} - `,r.value=i.script?i.script:"",C.value=!0}function Q(t){r.value=`
  char c1 = 'A'
  assert c1 instanceof Character

  def c2 = 'B' as char
  assert c2 instanceof Character

  def c3 = (char)'C'
  assert c3 instanceof Character`}function F(){k.value="",j.value=-1,g.value="",r.value="",C.value=!1}function J(){if(g.value==="全局")B.value=r.value;else{const t=p.value[_.value],e=t.comps.findIndex(i=>i.id===k.value);e>-1&&(t.comps[e].script=r.value,M(t,_.value))}F()}function O(){R.value=b.value.getAllConfig(),S.value=!0}return te(async()=>{if(p.value.length>0){w.value=v.value.clientHeight-48,x.value=!0;const t=p.value[0];t.comps=[{id:"comp_2907",name:"comp_2907",alias:"区域_2907",attr:{x:867,y:487,w:538,h:135}},{id:"comp_2951",name:"comp_2951",alias:"区域_2951",attr:{x:774,y:784,w:664,h:142}}],await ne(),M(t,0)}}),(t,e)=>{const i=m("b-icon"),$=m("b-tooltip"),L=m("b-empty"),h=m("b-button"),W=m("SchemaEditor"),U=m("b-ace-editor"),Z=m("b-modal"),Y=m("page-wrapper");return u(),I(Y,null,{default:o(()=>[n("div",_e,[n("div",he,[n("div",ye,[e[3]||(e[3]=d(" 图片列表 ")),s($,{class:"item",content:"点击图片载入其区域配置",placement:"right"},{default:o(()=>[s(i,{name:"question-circle"})]),_:1})]),n("div",be,[(u(!0),f(H,null,q(p.value,(l,G)=>(u(),f("div",{key:G,class:N(["image-wrap",{"has-comps":l.comps.length}])},[n("div",{class:N(["image-item",{active:T.value===l.id}]),onClick:c=>E(l,G)},[e[4]||(e[4]=n("i",{class:"el-icon-picture-outline"},null,-1)),n("span",null,A(l.name),1)],10,Ce),(u(!0),f(H,null,q(l.comps,(c,X)=>(u(),f("div",{class:N(["item-comp",[{active:k.value===c.id},{edited:c.script&&c.script.length}]]),key:X+c.id},[n("span",{title:`${c.alias}-${c.name}`,onClick:Be=>P(l,G,c,X)},A(c.alias),9,ke)],2))),128))],2))),128)),p.value.length===0?(u(),I(L,{key:0},{default:o(()=>e[5]||(e[5]=[d("暂无列表")])),_:1})):y("",!0)])]),n("div",{class:"right-config",ref_key:"contentRef",ref:v},[x.value?(u(),f("div",xe,[n("div",null,[s(h,{plain:"",type:B.value.length?"success":"default",onClick:K},{default:o(()=>e[6]||(e[6]=[d(" 全局配置 ")])),_:1},8,["type"]),s(h,{onClick:O},{default:o(()=>e[7]||(e[7]=[d("查看配置")])),_:1})]),n("div",null,[s(h,{onClick:e[0]||(e[0]=l=>D(!0))},{default:o(()=>e[8]||(e[8]=[d("保存")])),_:1})])])):y("",!0),x.value?(u(),I(W,{key:1,ref_key:"schemaRef",ref:b,height:w.value+"px",onAutoSave:D},null,8,["height"])):y("",!0),p.value.length===0&&!x.value?(u(),I(L,{key:2},{default:o(()=>e[9]||(e[9]=[d("请先准备可操作的图片")])),_:1})):y("",!0),s(le,{name:"fade-right"},{default:o(()=>[C.value?(u(),f("div",we,[n("div",Ie,[n("span",null,A(g.value)+"脚本配置",1),n("div",null,[s(h,{size:"small",plain:"",onClick:F},{default:o(()=>e[10]||(e[10]=[d("关闭")])),_:1}),s(h,{size:"small",plain:"",type:"primary",onClick:J},{default:o(()=>e[11]||(e[11]=[d("保存脚本")])),_:1})])]),n("div",{class:"edit-content",style:ae({height:w.value+"px"}),flex:""},[n("div",Ve,[s(U,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),lang:"groovy",height:w.value+"px"},null,8,["modelValue","height"])]),n("div",{class:"keys"},[n("div",{class:"key-item",onClick:Q},"测试脚本")])],4)])):y("",!0)]),_:1})],512)]),s(Z,{title:"当前配置",modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=l=>S.value=l),width:"700px"},{default:o(()=>[s(U,{"model-value":JSON.stringify(R.value,null,2),height:"400px"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})}}},Ae=ee(Se,[["__scopeId","data-v-b377535e"]]);export{Ae as default};
