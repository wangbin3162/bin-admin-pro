var E=Object.defineProperty,K=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(n,e,l)=>e in n?E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l,P=(n,e)=>{for(var l in e||(e={}))z.call(e,l)&&M(n,l,e[l]);if(R)for(var l of R(e))A.call(e,l)&&M(n,l,e[l]);return n},D=(n,e)=>K(n,L(e));import{j as J,g as W}from"./index-454f42ed.js";import{P as G}from"./page-wrapper-ce307945.js";import{B as H}from"./index-e60b8273.js";import{I as O}from"./iconfont-f4c34d86.js";import{a4 as Q,f as w,J as r,o as C,c as B,w as a,B as u,u as o,T as U,d as X,z as Y,A as Z,q as _,t as $,a as ee,a8 as te,a9 as oe}from"./vendor-607de18e.js";import{u as ae}from"./useForm-5ac60fc9.js";import{a as ne}from"./chunk-bin-ui-next-80d1b0f6.js";import"./chunk-brace-7f859248.js";function le(){return J({url:"/menu/tree",method:"get"})}const re={name:"Menu",components:{Iconfont:O,BaseTree:H,PageWrapper:G},setup(){const n=w(null),e=w(null),l=w({}),t=w({}),{formRef:T,editStatus:F,pageStatus:p,editLoading:f,openCreate:S,openEdit:b,backNormal:m,submitForm:i,resetForm:v}=ae();function g(s,c){s.selected?(e.value=s,t.value=c,x()):k()}function V(s){if(s==="root"&&y(),s==="child"){y();const c=e.value;l.value.parentPath=c.path,l.value.parentName=c.title}}function h(s="edit"){if(s==="edit"){const c=t.value,j=e.value,N=c[j.nodeKey].parent,I=N||N===0?c[N].node:{};l.value=j?D(P({},W(j)),{parentPath:N===0?"":I.path,parentName:I.title}):{};return}l.value={path:"",title:"",icon:"",parentPath:"",parentName:void 0}}function k(){e.value=null,t.value=null,l.value={},m()}function y(){h("create"),S()}function x(){h("edit"),b()}function d(){i(()=>{f.value=!0;const s=p.value;setTimeout(()=>{ne.success(`${s.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),m();const c=e.value?[e.value.nodeKey]:[];n.value&&n.value.reloadTree(c),f.value=!1},1e3)})}function q(){h(F.value),v()}return{treeRef:n,getMenuTree:le,currentNode:e,copyNode:l,handleSelect:g,handleSubmit:d,handleResetForm:q,handleCommand:V,formRef:T,pageStatus:p,editLoading:f,submitForm:i,resetForm:v,ruleValidate:{path:[{required:!0,message:"\u83DC\u5355\u8DEF\u5F84\u5FC5\u586B",trigger:"blur"}],title:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u5FC5\u586B",trigger:"blur"}]}}}},de=n=>(te("data-v-12ed773d"),n=n(),oe(),n),se={class:"table-menu"},ce=_("\u589E\u52A0\u6839\u8282\u70B9"),ie=_("\u589E\u52A0\u5B50\u8282\u70B9"),ue={class:"table-menu-right"},me={flex:"main:justify cross:center",style:{"font-weight":"normal"}},_e={class:"top"},pe=de(()=>u("span",{class:"ml-5"},"\u7F16\u8F91\u83DC\u5355",-1)),fe={style:{position:"relative","min-height":"100px",overflow:"hidden"}},he={style:{position:"absolute",width:"100%"}},be=_("\u70B9\u9009\u5DE6\u4FA7\u90E8\u95E8\uFF0C\u8FDB\u884C\u7F16\u8F91\u64CD\u4F5C"),ve={key:0,class:"pt-8"},ge=_("\u91CD\u7F6E"),ye=_("\u7CFB\u7EDF\u83DC\u5355\u6839\u8282\u70B9\u4E0D\u53EF\u7F16\u8F91");function Ne(n,e,l,t,T,F){const p=r("b-dropdown-item"),f=r("base-tree"),S=r("iconfont"),b=r("b-alert"),m=r("b-input"),i=r("b-form-item"),v=r("b-icon-select"),g=r("b-button"),V=r("b-form"),h=r("b-col"),k=r("b-row"),y=r("b-card"),x=r("page-wrapper");return C(),B(x,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:a(()=>[u("div",se,[o(f,{ref:"treeRef","tree-title":"\u83DC\u5355\u5217\u8868","show-filter":"","title-key":"title",fetch:t.getMenuTree,onSelectChange:t.handleSelect,onCommand:t.handleCommand},{ctrl:a(()=>[o(p,{name:"root",divided:""},{default:a(()=>[ce]),_:1}),o(p,{name:"child",disabled:!t.currentNode},{default:a(()=>[ie]),_:1},8,["disabled"])]),_:1},8,["fetch","onSelectChange","onCommand"]),u("div",ue,[o(y,{bordered:!1,class:"card-panel",shadow:"never"},{header:a(()=>[u("div",me,[u("div",_e,[o(S,{icon:"menu",color:"primary",bg:"",round:""}),pe])])]),default:a(()=>[u("div",fe,[o(U,{name:"fade-in"},{default:a(()=>[u("div",he,[X(o(b,null,{default:a(()=>[be]),_:1},512),[[Y,t.pageStatus.isNormal]])])]),_:1}),o(U,{name:"fade-transverse"},{default:a(()=>[t.pageStatus.isNormal?ee("",!0):(C(),Z("div",ve,[t.copyNode.path!=="root"?(C(),B(k,{key:0},{default:a(()=>[o(h,{span:"14"},{default:a(()=>[o(V,{ref:"formRef",model:t.copyNode,rules:t.ruleValidate,"label-width":"100px","label-suffix":":"},{default:a(()=>[o(i,{label:"\u7236\u7EA7\u83DC\u5355"},{default:a(()=>[o(m,{modelValue:t.copyNode.parentName,"onUpdate:modelValue":e[0]||(e[0]=d=>t.copyNode.parentName=d),disabled:""},null,8,["modelValue"])]),_:1}),o(i,{label:"\u83DC\u5355\u540D\u79F0",prop:"title"},{default:a(()=>[o(m,{modelValue:t.copyNode.title,"onUpdate:modelValue":e[1]||(e[1]=d=>t.copyNode.title=d),placeholder:"\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),o(i,{label:"\u83DC\u5355\u8DEF\u5F84",prop:"path"},{default:a(()=>[o(m,{modelValue:t.copyNode.path,"onUpdate:modelValue":e[2]||(e[2]=d=>t.copyNode.path=d),placeholder:"\u8F93\u5165\u83DC\u5355\u8DEF\u5F84",clearable:""},null,8,["modelValue"])]),_:1}),o(i,{label:"\u83DC\u5355\u56FE\u6807"},{default:a(()=>[o(v,{modelValue:t.copyNode.icon,"onUpdate:modelValue":e[3]||(e[3]=d=>t.copyNode.icon=d)},null,8,["modelValue"])]),_:1}),o(i,null,{default:a(()=>[o(g,{type:"primary",onClick:t.handleSubmit,loading:t.editLoading},{default:a(()=>[_($(t.pageStatus.isCreate?"\u63D0\u4EA4\u6570\u636E":"\u66F4\u65B0\u6570\u636E"),1)]),_:1},8,["onClick","loading"]),o(g,{onClick:t.handleResetForm},{default:a(()=>[ge]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})):(C(),B(b,{key:1,type:"error","show-icon":""},{default:a(()=>[ye]),_:1}))]))]),_:1})])]),_:1})])])]),_:1})}var Fe=Q(re,[["render",Ne],["__scopeId","data-v-12ed773d"]]);export{Fe as default};
