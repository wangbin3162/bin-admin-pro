var M=Object.defineProperty,P=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var R=(n,e,l)=>e in n?M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l,U=(n,e)=>{for(var l in e||(e={}))J.call(e,l)&&R(n,l,e[l]);if(D)for(var l of D(e))W.call(e,l)&&R(n,l,e[l]);return n},q=(n,e)=>P(n,A(e));import{g as G}from"./depart.api-5cc47128.js";import{a4 as H,f as N,J as d,o as j,c as z,w as a,B as s,u as o,a as E,T as K,d as O,z as Q,A as X,q as m,t as Y,a8 as Z,a9 as $}from"./vendor-607de18e.js";import{g as ee}from"./index-4f2d5d7a.js";import{a as te}from"./chunk-bin-ui-next-3d9d9144.js";import{u as oe}from"./useForm-5f8347aa.js";import{P as ae}from"./page-wrapper-604a536e.js";import{B as ne}from"./index-a16e15f4.js";import{I as le}from"./iconfont-fc4420ce.js";import"./chunk-brace-7f859248.js";const de={name:"Depart",components:{Iconfont:le,BaseTree:ne,PageWrapper:ae},setup(){const n=N(null),e=N(null),l=N({}),t=N({}),{formRef:B,editStatus:T,pageStatus:_,editLoading:f,openCreate:C,openEdit:b,backNormal:v,submitForm:p,resetForm:c}=oe();function x(i,u){i.selected?(e.value=i,t.value=u,S()):w()}function V(i){if(i==="root"&&g(),i==="child"){g();const u=e.value;l.value.parentId=u.id,l.value.parentName=u.text}}function h(i="edit"){if(i==="edit"){const u=t.value,k=e.value,y=u[k.nodeKey].parent,F=y||y===0?u[y].node:{};l.value=k?q(U({},ee(k)),{parentId:y===0?"":F.id,parentName:F.title}):{};return}l.value={text:"",deptCode:"",status:"1",desc:"",parentId:"",parentName:void 0}}function w(){e.value=null,t.value=null,l.value={},v()}function g(){h("create"),C()}function S(){h("edit"),b()}function r(){p(()=>{f.value=!0;const i=_.value;setTimeout(()=>{te.success(`${i.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),v();const u=e.value?[e.value.nodeKey]:[];n.value&&n.value.reloadTree(u),f.value=!1},1e3)})}function L(){h(T.value),c()}return{treeRef:n,getDepartTree:G,currentNode:e,copyNode:l,handleSelect:x,handleSubmit:r,handleResetForm:L,handleCommand:V,formRef:B,pageStatus:_,editLoading:f,submitForm:p,resetForm:c,ruleValidate:{text:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],deptCode:[{required:!0,message:"\u90E8\u95E8\u7F16\u7801\u5FC5\u586B",trigger:"blur"}]}}}},I=n=>(Z("data-v-7207f23c"),n=n(),$(),n),re={class:"table-depart"},se=m("\u589E\u52A0\u6839\u8282\u70B9"),ce=m("\u589E\u52A0\u5B50\u8282\u70B9"),ie={class:"table-depart-right"},ue={flex:"main:justify cross:center",style:{"font-weight":"normal"}},pe={class:"top"},me=I(()=>s("span",{class:"ml-5"},"\u7F16\u8F91\u90E8\u95E8",-1)),_e={class:"right"},fe=m("\u65B0\u589E\u5B50\u90E8\u95E8"),be={style:{position:"relative","min-height":"100px",overflow:"hidden"}},he={style:{position:"absolute",width:"100%"}},ve=m("\u70B9\u9009\u5DE6\u4FA7\u90E8\u95E8\uFF0C\u8FDB\u884C\u7F16\u8F91\u64CD\u4F5C"),ge={key:0,class:"pt-8"},ye=I(()=>s("span",null,"\u542F\u7528",-1)),Ne=I(()=>s("span",null,"\u7981\u7528",-1)),Ce=m("\u91CD\u7F6E");function xe(n,e,l,t,B,T){const _=d("b-dropdown-item"),f=d("base-tree"),C=d("iconfont"),b=d("b-button"),v=d("b-alert"),p=d("b-input"),c=d("b-form-item"),x=d("b-switch"),V=d("b-form"),h=d("b-col"),w=d("b-row"),g=d("b-card"),S=d("page-wrapper");return j(),z(S,{desc:"\u9875\u9762\u5185\u5BB9\u4E3AMock\u6570\u636E\uFF0C\u4EC5\u4F5C\u793A\u4F8B\u4F7F\u7528\u3002"},{default:a(()=>[s("div",re,[o(f,{ref:"treeRef","tree-title":"\u90E8\u95E8\u5217\u8868","show-filter":"",fetch:t.getDepartTree,onSelectChange:t.handleSelect,onCommand:t.handleCommand},{ctrl:a(()=>[o(_,{name:"root",divided:""},{default:a(()=>[se]),_:1}),o(_,{name:"child",disabled:!t.currentNode},{default:a(()=>[ce]),_:1},8,["disabled"])]),_:1},8,["fetch","onSelectChange","onCommand"]),s("div",ie,[o(g,{bordered:!1,class:"card-panel",shadow:"never"},{header:a(()=>[s("div",ue,[s("div",pe,[o(C,{icon:"apartment",color:"primary",bg:"",round:""}),me]),s("div",_e,[t.currentNode?(j(),z(b,{key:0,type:"text",size:"small",onClick:e[0]||(e[0]=r=>t.handleCommand("child"))},{default:a(()=>[fe]),_:1})):E("",!0)])])]),default:a(()=>[s("div",be,[o(K,{name:"fade-in"},{default:a(()=>[s("div",he,[O(o(v,null,{default:a(()=>[ve]),_:1},512),[[Q,t.pageStatus.isNormal]])])]),_:1}),o(K,{name:"fade-transverse"},{default:a(()=>[t.pageStatus.isNormal?E("",!0):(j(),X("div",ge,[o(w,null,{default:a(()=>[o(h,{span:"14"},{default:a(()=>[o(V,{ref:"formRef",model:t.copyNode,rules:t.ruleValidate,"label-width":"100px","label-suffix":":"},{default:a(()=>[o(c,{label:"\u7236\u7EA7\u7EC4\u7EC7"},{default:a(()=>[o(p,{modelValue:t.copyNode.parentName,"onUpdate:modelValue":e[1]||(e[1]=r=>t.copyNode.parentName=r),disabled:""},null,8,["modelValue"])]),_:1}),o(c,{label:"\u90E8\u95E8\u540D\u79F0",prop:"text"},{default:a(()=>[o(p,{modelValue:t.copyNode.text,"onUpdate:modelValue":e[2]||(e[2]=r=>t.copyNode.text=r),placeholder:"\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),o(c,{label:"\u90E8\u95E8\u7F16\u7801",prop:"deptCode"},{default:a(()=>[o(p,{modelValue:t.copyNode.deptCode,"onUpdate:modelValue":e[3]||(e[3]=r=>t.copyNode.deptCode=r),placeholder:"\u8F93\u5165\u90E8\u95E8\u7F16\u7801",clearable:""},null,8,["modelValue"])]),_:1}),o(c,{label:"\u90E8\u95E8\u72B6\u6001"},{default:a(()=>[o(x,{size:"large",modelValue:t.copyNode.status,"onUpdate:modelValue":e[4]||(e[4]=r=>t.copyNode.status=r),"true-value":"1","false-value":"0"},{open:a(()=>[ye]),close:a(()=>[Ne]),_:1},8,["modelValue"])]),_:1}),o(c,{label:"\u90E8\u95E8\u63CF\u8FF0"},{default:a(()=>[o(p,{modelValue:t.copyNode.desc,"onUpdate:modelValue":e[5]||(e[5]=r=>t.copyNode.desc=r),type:"textarea",placeholder:"\u8F93\u5165\u90E8\u95E8\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),o(c,null,{default:a(()=>[o(b,{type:"primary",onClick:t.handleSubmit,loading:t.editLoading},{default:a(()=>[m(Y(t.pageStatus.isCreate?"\u63D0\u4EA4\u6570\u636E":"\u66F4\u65B0\u6570\u636E"),1)]),_:1},8,["onClick","loading"]),o(b,{onClick:t.handleResetForm},{default:a(()=>[Ce]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]))]),_:1})])]),_:1})])])]),_:1})}var Re=H(de,[["render",xe],["__scopeId","data-v-7207f23c"]]);export{Re as default};
