import{m as Z,r as B,n as ee,o as f,a as D,g as te,v as le,L as s,K as e,w as t,F as oe,Q as ae,f as d,t as ne,j as se,b,i as re,R as a}from"./vendor-B7whOB5j.js";import{u as ie}from"./useTable-D2J07cK1.js";import{f as ue}from"./mock.api-DnsI1FHv.js";import{u as de}from"./useForm-rgYl8SHH.js";import{n as F}from"./chunk-bin-ui-design-QY08qtjO.js";import"./chunk-brace-DF1jSkZr.js";import"./index-CnBue4Tw.js";import"./avatar04-nXH9RmAY.js";const me={flex:"main:right"},pe={class:"p16"},ye=Object.assign({name:"SysRole"},{__name:"role",setup(ce){const r=Z({page:1,size:10,roleName:"",status:""}),g=B([]),n=B({}),{loading:v,list:R,total:S,getListData:p,pageChange:U}=ie(ue,r),{formRef:h,pageStatus:C,editLoading:q,openCreate:$,openEdit:E,backNormal:V,submitForm:T,setBtnLoading:k,modalVisible:y}=de();ee(()=>R.value,i=>{g.value=i}),p();function j(){n.value={roleName:"",roleCode:"",status:"1"},$()}function K(i){n.value={...i},E()}function w(){n.value={},V()}function M(){F.success("删除成功！"),p()}function O(){T(()=>{k(!0);const i=C.value;setTimeout(()=>{F.success(`${i.isCreate?"新增":"修改"}成功！`),k(!1),V(),p()},1e3)})}const N={0:"禁用",1:"启用"},Q=[{title:"角色名称",key:"roleName"},{title:"角色编码",key:"roleCode"},{title:"状态",slot:"status"},{title:"创建日期",key:"createDate"},{title:"操作",width:100,align:"center",slot:"action"}],A={roleName:[{required:!0,message:"角色名称必填",trigger:"blur"}],roleCode:[{required:!0,message:"角色编码必填",trigger:"blur"}]};return(i,l)=>{const _=a("b-input"),u=a("b-form-item"),G=a("b-option"),H=a("b-select"),m=a("b-button"),x=a("b-form"),L=a("action-button"),I=a("b-divider"),J=a("b-table"),P=a("b-page"),W=a("base-table"),z=a("page-wrapper"),X=a("b-switch"),Y=a("b-collapse-wrap");return f(),D("div",null,[te(e(z,null,{default:t(()=>[e(W,null,{filter:t(()=>[e(x,{"label-width":"95px"},{default:t(()=>[e(u,{label:"角色名称"},{default:t(()=>[e(_,{modelValue:r.roleName,"onUpdate:modelValue":l[0]||(l[0]=o=>r.roleName=o),clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色状态"},{default:t(()=>[e(H,{modelValue:r.status,"onUpdate:modelValue":l[1]||(l[1]=o=>r.status=o),clearable:""},{default:t(()=>[(f(),D(oe,null,ae(N,(o,c)=>e(G,{key:c,label:o,value:c},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(u,{"label-width":"16px"},{default:t(()=>[e(m,{type:"primary",loading:s(v),onClick:s(p)},{default:t(()=>l[5]||(l[5]=[d("查询")])),_:1},8,["loading","onClick"]),e(m,null,{default:t(()=>l[6]||(l[6]=[d("重置")])),_:1})]),_:1})]),_:1})]),action:t(()=>[e(m,{type:"primary",icon:"plus-circle",onClick:j},{default:t(()=>l[7]||(l[7]=[d("新增")])),_:1})]),page:t(()=>[e(P,{total:s(S),current:r.page,"page-size":r.size,"show-total":"",onChange:s(U)},null,8,["total","current","page-size","onChange"])]),default:t(()=>[e(J,{columns:Q,data:g.value,loading:s(v),size:"small"},{status:t(({row:o})=>[d(ne(N[o.status]),1)]),action:t(({row:o})=>[e(L,{type:"text",icon:"edit-square","is-icon":"",tooltip:"编辑",onClick:c=>K(o)},null,8,["onClick"]),e(I,{type:"vertical"}),e(L,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"删除",confirm:"",onClick:c=>M(o)},null,8,["onClick"])]),_:1},8,["data","loading"])]),_:1})]),_:1},512),[[le,!s(y)]]),s(y)?(f(),se(z,{key:0,title:`${s(C).isCreate?"新增":"修改"}角色`,"show-close":"",onClose:w},{rightFooter:t(()=>[b("div",me,[e(m,{onClick:w},{default:t(()=>l[8]||(l[8]=[d("取 消")])),_:1}),e(m,{type:"primary",loading:s(q),onClick:O},{default:t(()=>l[9]||(l[9]=[d("确 定")])),_:1},8,["loading"])])]),default:t(()=>[e(x,{ref_key:"formRef",ref:h,model:n.value,rules:A,"label-width":"100px","label-suffix":":"},{default:t(()=>[e(Y,{title:"基础信息",shadow:"none"},{default:t(()=>[b("div",pe,[e(u,{label:"角色名称",prop:"roleName"},{default:t(()=>[e(_,{modelValue:n.value.roleName,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.roleName=o),placeholder:"输入角色名称",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色编码",prop:"roleCode"},{default:t(()=>[e(_,{modelValue:n.value.roleCode,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.roleCode=o),placeholder:"输入角色编码",clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"角色状态"},{default:t(()=>[e(X,{size:"large",modelValue:n.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>n.value.status=o),"true-value":"1","false-value":"0"},{open:t(()=>l[10]||(l[10]=[b("span",null,"启用",-1)])),close:t(()=>l[11]||(l[11]=[b("span",null,"禁用",-1)])),_:1},8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])):re("",!0)])}}});export{ye as default};
