import{a as x}from"./chunk-bin-ui-next-c8e5f3af.js";import{a9 as B,l as r,G as d,o as I,e as V,w as i,b as v,c as a,m as f}from"./vendor-c8b7a369.js";import"./chunk-brace-3ad28406.js";async function D(g,t=2500){return new Promise((l,s)=>{let e=new FileReader;e.onload=()=>{let o=new Image,m=o.src=e.result;if(o.complete){const{width:c,height:u}=o;l({url:m,width:c,height:u})}else{let c=setTimeout(()=>{s("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25\uFF01")},t);o.onload=()=>{const{width:u,height:p}=o;window.clearTimeout(c),l({url:m,width:u,height:p})}}},g?e.readAsDataURL(g):s("\u6587\u4EF6\u4E0D\u5B58\u5728\uFF01")})}const E={class:"schema-demo-wrap"},N={class:"top-bar"},R={__name:"schema-demo",setup(g){const t=r(null),l=r(!1),s=r({}),e=r(null);function o(){document.getElementById("imgfile").click()}function m(){s.value=t.value.getAllConfig(),l.value=!0}function c(){e.value=t.value.getAllConfig(),console.log(e.value),x("\u4FDD\u5B58\u6210\u529F")}function u(){console.log(e.value),t.value.setConfig(e.value)}function p(){let b=document.getElementById("imgfile").files[0];D(b).then(n=>{t.value.loadBgImage(n)})}return(b,n)=>{const _=d("b-button"),y=d("SchemaEditor"),C=d("b-ace-editor"),w=d("b-modal"),k=d("page-container");return I(),V(k,null,{default:i(()=>[v("div",E,[v("div",N,[a(_,{onClick:o},{default:i(()=>[f("\u8F7D\u5165\u56FE\u7247")]),_:1}),a(_,{onClick:m},{default:i(()=>[f("\u67E5\u770B\u914D\u7F6E")]),_:1}),a(_,{onClick:c},{default:i(()=>[f("\u4FDD\u5B58")]),_:1}),a(_,{onClick:u,disabled:!e.value},{default:i(()=>[f("\u6253\u5F00")]),_:1},8,["disabled"]),v("input",{style:{display:"none"},type:"file",id:"imgfile","lay-verify":"required",accept:"image/jpeg,image/png,image/jpg",class:"upload-button",onChange:n[0]||(n[0]=h=>p())},null,32)]),a(y,{ref_key:"schemaRef",ref:t},null,512)]),a(w,{title:"\u5F53\u524D\u914D\u7F6E",modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=h=>l.value=h),width:"700px"},{default:i(()=>[a(C,{"model-value":JSON.stringify(s.value,null,2),height:"400px"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})}}},O=B(R,[["__scopeId","data-v-71bb51b9"]]);export{O as default};
