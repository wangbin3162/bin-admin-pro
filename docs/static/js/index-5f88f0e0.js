import{i as y}from"./index-0c470c36.js";import{l as L,r as j,f as R}from"./cross-tab-msg-52280636.js";import{r as l,af as T,m as z,q as K,Q as o,o as M,j as O,w as i,K as n,f as Q,i as U}from"./vendor-5c4b4c96.js";import{n as A}from"./chunk-bin-ui-design-2f3ecd04.js";const W=Object.assign({name:"SysRole"},{__name:"index",emits:["close"],setup(F,{expose:C,emit:g}){const k=g,r=l(!1),p=T(),a=z({tempId:""}),c=l([]),s=l({}),u=l(!1),v=l([]);function w(){const e=y(s.value.mapping);c.value=[{title:"\u5E8F\u53F7",width:70,align:"center",type:"index"}],e.forEach((t,m)=>{m<5&&c.value.push({title:t.fieldTitle,key:t.fieldName})}),c.value.push({title:"\u64CD\u4F5C",width:150,align:"center",slot:"action"})}function x(){let e=p.resolve({path:"/data-edit",query:{tempId:a.tempId}});window.open(e.href,"_blank")}function I({id:e}){let t=p.resolve({path:"/data-edit",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function q({id:e}){let t=p.resolve({path:"/data-edit-simple",query:{tempId:a.tempId,id:e}});window.open(t.href,"_blank")}function D({id:e}){j(e).then(()=>{A.success("\u5220\u9664\u6210\u529F\uFF01"),d()})}async function d(){try{u.value=!0;const{rows:e}=await R(a);v.value=e.map(t=>({id:t.id,tempId:t.tempId,tempName:t.tempName,...t.data}))}catch(e){console.log(e)}u.value=!1}function N(e){r.value=!0,s.value=y(e),a.tempId=e.id,w(),d()}function S(){r.value=!1,k("close")}C({open:N});const $=L(d);return K($),(e,t)=>{const m=o("b-button"),_=o("action-button"),h=o("b-divider"),V=o("b-table"),B=o("base-table"),E=o("page-wrapper");return r.value?(M(),O(E,{key:0,title:`${s.value.name?`[${s.value.name}] `:""}\u6570\u636E\u67E5\u770B`,"show-close":"",onClose:S},{default:i(()=>[n(B,null,{action:i(()=>[n(m,{type:"primary",icon:"plus",onClick:x},{default:i(()=>[Q("\u65B0\u589E")]),_:1})]),default:i(()=>[n(V,{columns:c.value,data:v.value,loading:u.value,size:"small"},{action:i(({row:f})=>[n(_,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:b=>I(f)},null,8,["onClick"]),n(h,{type:"vertical"}),n(_,{type:"text",icon:"edit","is-icon":"",tooltip:"\u8868\u5355\u7F16\u8F91",onClick:b=>q(f)},null,8,["onClick"]),n(h,{type:"vertical"}),n(_,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:b=>D(f)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})]),_:1},8,["title"])):U("",!0)}}});export{W as _};
