import{a9 as G,m as c,E as u,o as b,f as B,w as s,c as o,b as l,a as M,j as T,e as d,t as R,O as H,F as J,L as q,ac as Q,ad as W}from"./vendor-23852376.js";import{a as F}from"./chunk-bin-ui-next-2203239f.js";import"./chunk-brace-bd816051.js";const X={name:"FuncDynamicCode",setup(){const _=c([{key:"name",value:"Akko pc75b plus"},{key:"price",value:549},{key:"num",value:2},{key:"discount",value:.98},{key:"breaks",value:30}]),n=c("return `${name} \u5546\u54C1 \uFF0C\u5355\u4EF7${price} \uFF0C\u6570\u91CF${num} \uFF0C\u603B\u4EF7: ${price*num}`;"),S=c(null),e=c(""),A=c(null),x=c([{name:"Akko pc75b plus",price:549,num:2,discount:1,total:null},{name:"Ciy 68 test",price:79,num:4,discount:1,total:null},{name:"Ganss HS87T",price:398,num:2,discount:.95,total:null},{name:"\u8FBE\u5C14\u4F18A84",price:629,num:2,discount:.9,total:null},{name:"FL cmk87",price:629,num:6,discount:.95,total:null},{name:"\u603B\u8BA1",price:0,num:0,discount:0,total:null}]),h=c(`const { price, num, discount } = goods;
 return price * num * discount;`),g=c(null),p=c(`{
  "name": "\u5F20\u4E09",
  "phone": "",
  "age": 17,
  "address": "\u6C5F\u82CF\u7701\u5F90\u5DDE\u5E02\u4E91\u9F99\u533A"
}`),y=c(["phone","age"]),f=c(""),V=c(!1),C=c(`const validatPhone = phone.length > 0;
const validatAge = age > 18 && age < 35;
if(validatPhone && validatAge){
  return {
    result: true,
    message: '\u6821\u9A8C\u901A\u8FC7'
  };
} else {
  let message = '';
  if(!validatPhone) message += '[\u624B\u673A\u53F7\u4E0D\u80FD\u4E3A\u7A7A]';
  if(!validatAge) message += '[\u5E74\u9F84\u5FC5\u987B\u572818~35\u5C81\u4E4B\u95F4]';
  return{
    result: false,
    message
  };
}`),v=c({});function O(a,i){a.dataTransfer.setData("fieldName",i)}function D(a){const i=a.dataTransfer.getData("fieldName");_.value.findIndex(m=>m.key===i)===-1&&_.value.push({key:i,value:""}),console.log(i)}function E(a){a.preventDefault()}function N(){try{const a=S.value.getFunction(),i=_.value.map(r=>r.key!=="name"?Number(r.value):r.value);console.log(i),console.log(a);const m=a(...i);console.log(m),F.success("\u51FD\u6570\u6267\u884C\u6210\u529F\uFF01"),e.value=m}catch{e.value="",F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}function P({row:a,column:i,rowIndex:m,columnIndex:r}){if(m===x.value.length-1&&r===0)return[1,4];if(m===x.value.length-1&&r>0&&r<4)return[0,0]}function j(){try{const a=A.value.getFunction(),i=x.value;let m=0;for(let r=0;r<i.length-1;r++){const k=+a(i[r]).toFixed(2);m+=k,i[r].total=k}i[i.length-1].total=m,F.success("\u8BA1\u7B97\u6210\u529F\uFF01")}catch{F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}function t(){V.value=!0,f.value=""}function U(){const a=y.value;a.indexOf(f.value)===-1&&a.push(f.value),z()}function z(){V.value=!1,f.value=""}function K(a){y.value.splice(y.value.indexOf(a),1)}function L(){try{const a=g.value.getFunction(),i=[],m=y.value;for(let k=0;k<m.length;k++){const I=JSON.parse(p.value)[m[k]];i.push(I)}const r=a(...i);v.value={type:r.result?"success":"error",message:r.message},F(v.value)}catch{e.value="",F.error("\u51FD\u6570\u6267\u884C\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u51FD\u6570\u4F53\u548C\u5165\u53C2\u662F\u5426\u4E66\u5199\u6B63\u786E\uFF01")}}return{fieldsEditRef:S,goodsEditRef:A,fieldsMapping:_,fieldsFuncBody:n,fieldsTitle:e,dragField:O,dropField:D,allowDrop:E,runTest1:N,runTest2:j,columns:[{title:"\u5546\u54C1\u540D\u79F0",key:"name"},{title:"\u5546\u54C1\u5355\u4EF7",key:"price"},{title:"\u5546\u54C1\u6570\u91CF",key:"num"},{title:"\u6298\u6263",key:"discount"},{title:"\u5408\u8BA1",key:"total"}],goodsData:x,goodsFuncBody:h,handleSpan:P,formObjStr:p,formParams:y,formAdded:V,formField:f,formFuncBody:C,formEditRef:g,formResult:v,addOne:t,blurAdd:U,blurCancel:z,handleCloseTag:K,runTest3:L}}},w=_=>(Q("data-v-af4f9f33"),_=_(),W(),_),Y=w(()=>l("div",null,"\u52A8\u6001\u7F16\u5199\u6267\u884C\u51FD\u6570\u4F53\uFF0C\u6267\u884C\u83B7\u53D6\u8FD4\u56DE\u6570\u636E\u3002",-1)),Z={flex:""},$={class:"p10",style:{width:"40%"}},ee=d(" \u52A8\u6001\u6307\u5B9A\u5B57\u6BB5\u540D\u79F0 "),te=w(()=>l("p",null,"\u9009\u62E9\u5B57\u6BB5\u62D6\u5165\u914D\u7F6E\u533A\u57DF",-1)),oe=w(()=>l("p",null,"\u586B\u5199\u914D\u7F6E\uFF0C\u53F3\u4FA7\u4F1A\u81EA\u52A8\u62FC\u63A5\u51FD\u6570\u53C2\u6570\u3002",-1)),ne=d(" \u5B57\u6BB5\u5019\u9009 "),le=d("name"),se=d("price"),ae=d("num"),de=d("discount"),ie=d("breaks"),re={key:0,class:"tip"},ce=d("\u6267\u884C\u8BA1\u7B97"),ue=d(" \u6267\u884C\u8BA1\u7B97\u6210\u529F "),me={class:"p10",style:{width:"60%"}},pe=d(" \u8BA1\u7B97\u51FD\u6570 "),fe=w(()=>l("p",null,"\u51FD\u6570\u4F53\u5165\u53C2\u6839\u636E\u914D\u7F6E\u4F20\u5165\uFF0C\u5185\u90E8\u53EF\u76F4\u63A5\u4F7F\u7528\uFF0C\u8F93\u5165\u81EA\u5B9A\u4E49\u8BA1\u7B97\u51FD\u6570\u5E76\u8FD4\u56DE\u5373\u53EF\u3002",-1)),_e=w(()=>l("p",null,"\u51FD\u6570\u4F53\u5185\u4EE3\u7801\u9075\u5FAAjs\u7F16\u5199\u89C4\u8303\uFF0C\u5185\u6709\u4EE3\u7801\u63D0\u793A\uFF0C\u5982\u4EE3\u7801\u7F16\u5199\u9519\u8BEF\u5219\u6267\u884C\u8BA1\u7B97\u65F6\u4F1A\u62A5\u9519\u3002",-1)),ge=w(()=>l("div",{class:"example"},[d(" \u793A\u4F8B\u4EE3\u7801\uFF1A "),l("p",null,"\u62FC\u63A5\u5B57\u7B26\u4E32\uFF1A"),l("p",{style:{"padding-left":"8px"}},"return `${name} \u5546\u54C1 \uFF0C\u5355\u4EF7${price} \uFF0C\u6570\u91CF${num} \uFF0C\u603B\u4EF7: ${price*num}`;"),l("p",null,"\u8FD4\u56DE\u5E03\u5C14\u503C\uFF1A"),l("p",{style:{"padding-left":"8px"}},"return (price * num) * discount >= 200"),l("p",null,"\u590D\u6742\u8BA1\u7B97\u903B\u8F91\uFF1A"),l("p",{style:{"padding-left":"8px"}},"// \u5982\u679C\u6709\u6298\u6263\u5219\u8BA1\u7B97\u6298\u6263\u540E\u603B\u4EF7"),l("p",{style:{"padding-left":"8px"}},"const total = discount? price * num * discount : price * num;"),l("p",{style:{"padding-left":"8px"}},"// \u5224\u65AD\u662F\u5426\u7B26\u5408\u6EE1\u51CF\u653F\u7B56\uFF0C\u5982\u6EE1200-30"),l("p",{style:{"padding-left":"8px"}},"const totalPrice = total >= 200&&breaks ? total - breaks : total;"),l("p",{style:{"padding-left":"8px"}},"// \u8F93\u51FA\u6700\u7EC8\u7ED3\u679C"),l("p",{style:{"padding-left":"8px"}},"return `\u60A8\u8D2D\u4E70\u4E86${name}\uFF0C\u5355\u4EF7${price}\uFF0C\u6570\u91CF${num}\uFF0C\u6700\u7EC8\u4EF7\u683C: ${totalPrice}`")],-1)),ye={flex:""},ve={class:"p10",style:{width:"70%"}},be={class:"p10",style:{width:"30%"}},he=d(" tip: \u8FD9\u91CC\u91C7\u7528\u5BF9\u8C61\u4F20\u5165\u7684\u65B9\u5F0F\u8FDB\u884C\u4F20\u53C2 "),ke=d("\u6267\u884C\u8BA1\u7B97"),Fe={flex:""},we={class:"p10",style:{width:"30%"}},xe={class:"p10",style:{width:"30%"}},Ve=d("\u65B0\u589E\u6821\u9A8C\u5B57\u6BB5"),Ce=d("\u6267\u884C\u6821\u9A8C"),De={key:0,class:"p10",style:{width:"30%"}};function Be(_,n,S,e,A,x){const h=u("b-alert"),g=u("b-tag"),p=u("b-divider"),y=u("key-value-mapping"),f=u("b-button"),V=u("b-icon"),C=u("func-body-editor"),v=u("b-collapse-wrap"),O=u("b-table"),D=u("title-bar"),E=u("b-ace-editor"),N=u("b-input"),P=u("b-space"),j=u("page-container");return b(),B(j,null,{desc:s(()=>[Y]),default:s(()=>[o(v,{title:"\u57FA\u7840\u52A8\u6001\u7F16\u7801",shadow:"none",class:"mb-16"},{default:s(()=>[l("div",Z,[l("div",$,[o(h,{"show-icon":""},{desc:s(()=>[te,oe]),default:s(()=>[ee]),_:1}),l("div",null,[ne,o(g,{type:"primary",draggable:"true",onDragstart:n[0]||(n[0]=t=>e.dragField(t,"name"))},{default:s(()=>[le]),_:1}),o(g,{type:"info",draggable:"true",onDragstart:n[1]||(n[1]=t=>e.dragField(t,"price"))},{default:s(()=>[se]),_:1}),o(g,{type:"success",draggable:"true",onDragstart:n[2]||(n[2]=t=>e.dragField(t,"num"))},{default:s(()=>[ae]),_:1}),o(g,{type:"warning",draggable:"true",onDragstart:n[3]||(n[3]=t=>e.dragField(t,"discount"))},{default:s(()=>[de]),_:1}),o(g,{type:"danger",draggable:"true",onDragstart:n[4]||(n[4]=t=>e.dragField(t,"breaks"))},{default:s(()=>[ie]),_:1})]),o(p,{style:{margin:"10px 0"}}),l("div",{class:"drop-wrapper",onDrop:n[6]||(n[6]=t=>e.dropField(t)),onDragover:n[7]||(n[7]=t=>e.allowDrop(t))},[e.fieldsMapping.length===0?(b(),M("p",re,"\u62D6\u52A8\u5B57\u6BB5\u5230\u6B64\u5904\u8FDB\u884C\u914D\u7F6E")):T("",!0),o(y,{modelValue:e.fieldsMapping,"onUpdate:modelValue":n[5]||(n[5]=t=>e.fieldsMapping=t),"show-add":!1},null,8,["modelValue"])],32),o(p,{style:{margin:"10px 0"}}),o(f,{type:"primary",onClick:e.runTest1},{default:s(()=>[ce]),_:1},8,["onClick"]),o(p,{style:{margin:"10px 0"}}),e.fieldsTitle?(b(),B(h,{key:0,type:"success","show-icon":""},{desc:s(()=>[d(R(e.fieldsTitle),1)]),default:s(()=>[ue]),_:1})):T("",!0)]),l("div",me,[o(h,{"show-icon":""},{icon:s(()=>[o(V,{name:"codelibrary"})]),desc:s(()=>[fe,_e]),default:s(()=>[pe]),_:1}),o(C,{ref:"fieldsEditRef",modelValue:e.fieldsFuncBody,"onUpdate:modelValue":n[8]||(n[8]=t=>e.fieldsFuncBody=t),augments:e.fieldsMapping.map(t=>t.key)},null,8,["modelValue","augments"]),o(p,{style:{margin:"10px 0"}}),ge])])]),_:1}),o(v,{title:"\u8868\u683C\u7C7B\u65B9\u5F0F\u8C03\u7528",shadow:"none",class:"mb-16"},{default:s(()=>[l("div",ye,[l("div",ve,[o(O,{columns:e.columns,data:e.goodsData,border:"","merge-method":e.handleSpan,size:"small"},null,8,["columns","data","merge-method"])]),l("div",be,[o(D,{title:"\u5546\u54C1\u8BA1\u7B97\u51FD\u6570","tip-pos":"left"}),he,o(C,{ref:"goodsEditRef",modelValue:e.goodsFuncBody,"onUpdate:modelValue":n[9]||(n[9]=t=>e.goodsFuncBody=t),augments:["goods"]},null,8,["modelValue"]),o(p,{style:{margin:"10px 0"}}),o(f,{type:"primary",onClick:e.runTest2},{default:s(()=>[ke]),_:1},8,["onClick"])])])]),_:1}),o(v,{title:"\u7528\u4E8E\u6821\u9A8C\u51FD\u6570",shadow:"none",class:"mb-16"},{default:s(()=>[l("div",Fe,[l("div",we,[o(E,{modelValue:e.formObjStr,"onUpdate:modelValue":n[10]||(n[10]=t=>e.formObjStr=t)},null,8,["modelValue"])]),l("div",xe,[o(D,{title:"\u6821\u9A8C\u51FD\u6570","tip-pos":"left",class:"mb-10"}),o(P,null,{default:s(()=>[o(f,{size:"mini",onClick:e.addOne},{default:s(()=>[Ve]),_:1},8,["onClick"]),(b(!0),M(J,null,H(e.formParams,t=>(b(),B(g,{key:t,type:"primary",closable:"",onClose:U=>e.handleCloseTag(t)},{default:s(()=>[d(R(t),1)]),_:2},1032,["onClose"]))),128)),e.formAdded?(b(),B(N,{key:0,style:{width:"100px"},size:"mini",modelValue:e.formField,"onUpdate:modelValue":n[11]||(n[11]=t=>e.formField=t),onKeydown:q(e.blurAdd,["enter"]),onBlur:e.blurCancel},null,8,["modelValue","onKeydown","onBlur"])):T("",!0)]),_:1}),o(p,{style:{margin:"10px 0"}}),o(C,{ref:"formEditRef",modelValue:e.formFuncBody,"onUpdate:modelValue":n[12]||(n[12]=t=>e.formFuncBody=t),augments:e.formParams,height:"240"},null,8,["modelValue","augments"]),o(p,{style:{margin:"10px 0"}}),o(f,{type:"primary",onClick:e.runTest3},{default:s(()=>[Ce]),_:1},8,["onClick"])]),e.formResult.type?(b(),M("div",De,[o(h,{type:e.formResult.type,"show-icon":""},{desc:s(()=>[d(R(e.formResult.message),1)]),default:s(()=>[d(R(e.formResult.type==="success"?"\u9A8C\u8BC1\u6210\u529F":"\u9A8C\u8BC1\u5931\u8D25")+" ",1)]),_:1},8,["type"])])):T("",!0)])]),_:1})]),_:1})}const Oe=G(X,[["render",Be],["__scopeId","data-v-af4f9f33"]]);export{Oe as default};
