var ae=Object.defineProperty,oe=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var Y=(o,t,i)=>t in o?ae(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i,H=(o,t)=>{for(var i in t||(t={}))re.call(t,i)&&Y(o,i,t[i]);if(K)for(var i of K(t))ie.call(t,i)&&Y(o,i,t[i]);return o},E=(o,t)=>oe(o,ne(t));import{u as de}from"./useTable-b03f4ced.js";import{g as se}from"./user.api-e84cdd57.js";import{B as ue}from"./index-0c745151.js";import{P as ce}from"./page-wrapper-4e694ef0.js";import{A as me}from"./index-7c9c367b.js";import{B as fe,u as ge}from"./index-2e920e3f.js";import{g as j}from"./depart.api-b760fd5b.js";import{u as be}from"./useForm-a0f70d6e.js";import{a as O}from"./chunk-bin-ui-next-39e3ad1f.js";import{a5 as $,f as x,y as ee,g as Q,G as pe,J as r,o as m,A as w,B as c,E as T,u as l,d as _e,z as he,r as F,a as q,n as ve,c as G,w as a,K as X,F as I,q as g,t as Z}from"./vendor-9f2db7f5.js";import"./index-29e89477.js";import"./chunk-brace-f547fd93.js";const ye={name:"page-cube-wrapper",props:{leftDefaultWidth:{type:String,default:"240px"},leftExpandText:{type:String,default:"\u5C55\u5F00"},leftCollapseText:{type:String,default:"\u6536\u8D77"},defaultHeight:{type:Number,default:280},defaultMinHeight:{type:Number,default:12},draggableMinHeight:{type:Number,default:48}},setup(o,{slots:t}){const i=x(null),e=ee({active:!1,hasMoved:!1,height:o.defaultHeight,wrapHeight:0}),f=x(!0),_=Q(()=>f.value?o.leftDefaultWidth:"12px"),h=Q(()=>t.left&&f.value?`calc(100% - ${o.leftDefaultWidth})`:"100%"),d=()=>{f.value=!f.value},u=s=>{if(s==="default")e.height=o.defaultHeight;else if(s==="maximum")e.height=o.defaultMinHeight;else{if(!i.value)return;e.height=i.value.clientHeight-o.draggableMinHeight}},v=()=>{!t.draggable||(e.active=!0,e.hasMoved=!1)},k=()=>{!t.draggable||(e.active=!1)},y=s=>{if(!!t.draggable&&((s.buttons===0||s.which===0)&&(e.active=!1),e.active)){let M=0,b=s.currentTarget;for(e.wrapHeight=b.clientHeight;b;)M+=b.offsetTop,b=b.offsetParent;const C=s.pageY-M;C>o.defaultMinHeight&&C<e.wrapHeight-o.draggableMinHeight&&(e.height=C),e.hasMoved=!0}};return E(H({cubeRef:i},pe(e)),{leftExpand:f,leftWidth:_,rightWidth:h,toggleLeft:d,changeDragStatus:u,onResizeMouseDown:v,onResizeMouseUp:k,onResizeMouseMove:y})}},Ce={class:"page-cube-wrapper",ref:"cubeRef"},Ve={class:"page-cube"},we=["title"],ke={class:"cube-left-content"},Me={class:"toggle"};function xe(o,t,i,e,f,_){const h=r("b-icon");return m(),w("div",Ce,[c("div",Ve,[o.$slots.left?(m(),w("div",{key:0,class:"page-cube-left",style:T({width:e.leftWidth})},[c("div",{class:"toggle",style:T({left:e.leftWidth,opacity:e.leftExpand?null:1}),title:e.leftExpand?i.leftCollapseText:i.leftExpandText,onClick:t[0]||(t[0]=(...d)=>e.toggleLeft&&e.toggleLeft(...d))},[l(h,{name:e.leftExpand?"caret-left":"caret-right"},null,8,["name"])],12,we),_e(c("div",ke,[F(o.$slots,"left",{},void 0,!0)],512),[[he,e.leftExpand]])],4)):q("",!0),c("div",{class:"page-cube-content",onMouseup:t[5]||(t[5]=(...d)=>e.onResizeMouseUp&&e.onResizeMouseUp(...d)),onMousemove:t[6]||(t[6]=(...d)=>e.onResizeMouseMove&&e.onResizeMouseMove(...d)),style:T({width:e.rightWidth,cursor:o.active?"col-resize":"",userSelect:o.active?"none":""})},[o.$slots.default?(m(),w("div",{key:0,style:T({height:o.$slots.draggable?o.height+"px":"100%"})},[F(o.$slots,"default",{},void 0,!0)],4)):q("",!0),o.$slots.draggable?(m(),w("div",{key:1,class:"draggable-content",style:T({height:`calc(100% - ${o.height}px)`})},[c("div",Me,[c("i",{class:"b-iconfont b-icon-caret-up",title:"\u5C55\u5F00",onClick:t[1]||(t[1]=d=>e.changeDragStatus("maximum"))}),c("i",{class:"b-iconfont b-icon-caret-down",title:"\u6536\u8D77",onClick:t[2]||(t[2]=d=>e.changeDragStatus("minimum"))}),c("i",{class:"b-iconfont b-icon-creditcard-fill",title:"\u9ED8\u8BA4\u9AD8\u5EA6",onClick:t[3]||(t[3]=d=>e.changeDragStatus("default"))})]),c("div",{class:"drag-handler",draggable:"true",onMousedown:t[4]||(t[4]=(...d)=>e.onResizeMouseDown&&e.onResizeMouseDown(...d))},null,32),F(o.$slots,"draggable",{},void 0,!0)],4)):q("",!0)],36)])],512)}var Se=$(ye,[["render",xe],["__scopeId","data-v-1e5a8cea"]]);const ze={name:"UserAccount",components:{PageCubeWrapper:Se,BaseTree:fe,ActionButton:me,BaseTable:ue,PageWrapper:ce},setup(){const o=x(null),t=x({}),i=ee({page:1,size:10,name:"",roles:"",status:"",date:"",email:""}),e=x(!1),f=x([]),_=x({}),{treeData:h,getTreeData:d}=ge(j);d().then(()=>console.log(h.value));const{loading:u,list:v,total:k,getListData:y,pageChange:s,pageSizeChange:M}=de(se,i),{formRef:b,editStatus:S,pageStatus:C,editLoading:L,openCreate:z,openEdit:R,backNormal:D,submitForm:N,resetForm:B,setBtnLoading:U,modalVisible:W}=be();ve(v,V=>{f.value=V.map(J=>E(H({},J),{expand:!1}))});function P(V,J){V.selected&&(t.value=V)}function A(){_.value={realName:"",username:"",email:"",roles:"",depart:""},z()}function n(V){_.value=E(H({},V),{depart:""}),R()}function p(){_.value={},D()}function te(){O.success("\u5220\u9664\u6210\u529F\uFF01"),y()}function le(){N(()=>{U(!0);const V=C.value;setTimeout(()=>{O.success(`${V.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u6210\u529F\uFF01`),U(!1),D(),y()},1e3)})}return y(),{treeRef:o,currentTreeNode:t,handleSelect:P,getDepartTree:j,deptTree:h,expand:e,query:i,loading:u,roleMap:{admin:"\u7BA1\u7406\u5458",user:"\u666E\u901A\u7528\u6237",op:"\u5B9E\u65BD\u4EBA\u5458"},total:k,copyList:f,getListData:y,pageChange:s,pageSizeChange:M,columns:[{title:"\u59D3\u540D",key:"realName"},{title:"\u767B\u5F55\u540D",key:"username"},{title:"\u90AE\u7BB1",key:"email"},{title:"\u89D2\u8272",slot:"roles"},{title:"\u51FA\u751F\u65E5\u671F",key:"createDate"},{title:"\u64CD\u4F5C",width:100,align:"center",slot:"action"}],user:_,formRef:b,editStatus:S,pageStatus:C,editLoading:L,openCreate:z,openEdit:R,backNormal:D,submitForm:N,resetForm:B,ruleValidate:{realName:[{required:!0,message:"\u771F\u5B9E\u540D\u79F0\u5FC5\u586B",trigger:"blur"}],username:[{required:!0,message:"\u7528\u6237\u540D\u5FC5\u586B",trigger:"blur"}]},modalVisible:W,handleCreate:A,handleCancel:p,handleEdit:n,handleSubmit:le,handleDelete:te}}},De={class:"pl-16"},Te=g("\u91CD\u7F6E"),qe=g("\u67E5\u8BE2"),Re=g("\u65B0\u589E"),Ne=g(" \u66F4\u591A\u64CD\u4F5C "),Ue=g("\u5237\u65B0"),He=g("\u5220\u9664"),Ee={key:0},Le=g("\u53D6 \u6D88"),Be=g("\u786E \u5B9A");function We(o,t,i,e,f,_){const h=r("base-tree"),d=r("b-input"),u=r("b-form-item"),v=r("b-option"),k=r("b-select"),y=r("b-date-picker"),s=r("b-button"),M=r("b-form"),b=r("b-icon"),S=r("b-dropdown-item"),C=r("b-dropdown-menu"),L=r("b-dropdown"),z=r("action-button"),R=r("b-divider"),D=r("b-table"),N=r("b-page"),B=r("base-table"),U=r("page-cube-wrapper"),W=r("b-tree-select"),P=r("b-modal"),A=r("page-wrapper");return m(),G(A,{desc:"\u9875\u9762\u6570\u636E\u4E3AMock\u6570\u636E\uFF0C\u64CD\u4F5C\u65F6\u4E0D\u4F1A\u8FDB\u884C\u771F\u5B9E\u64CD\u4F5C\u3002\u4EC5\u4E3A\u6A21\u62DF\u5B9E\u73B0\u3002"},{default:a(()=>[l(U,null,{left:a(()=>[l(h,{ref:"treeRef","tree-title":"\u90E8\u95E8\u5217\u8868","show-filter":"",fetch:e.getDepartTree,onSelectChange:e.handleSelect,width:"240px"},null,8,["fetch","onSelectChange"])]),default:a(()=>[c("div",De,[l(B,null,{filter:a(()=>[l(M,{"label-width":"95px"},{default:a(()=>[l(u,{label:"\u7528\u6237\u540D\u79F0"},{default:a(()=>[l(d,{modelValue:e.query.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.query.name=n),clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u7528\u6237\u89D2\u8272"},{default:a(()=>[l(k,{modelValue:e.query.roles,"onUpdate:modelValue":t[1]||(t[1]=n=>e.query.roles=n),clearable:""},{default:a(()=>[(m(!0),w(I,null,X(e.roleMap,(n,p)=>(m(),G(v,{key:p,label:n,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e.expand?(m(),w(I,{key:0},[l(u,{label:"\u72B6\u6001"},{default:a(()=>[l(k,{modelValue:e.query.status,"onUpdate:modelValue":t[2]||(t[2]=n=>e.query.status=n),clearable:""},{default:a(()=>[l(v,{label:"\u542F\u7528",value:"1"}),l(v,{label:"\u7981\u7528",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u90AE\u7BB1"},{default:a(()=>[l(d,{modelValue:e.query.email,"onUpdate:modelValue":t[3]||(t[3]=n=>e.query.email=n),clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u65E5\u671F"},{default:a(()=>[l(y,{modelValue:e.query.date,"onUpdate:modelValue":t[4]||(t[4]=n=>e.query.date=n),clearable:""},null,8,["modelValue"])]),_:1})],64)):q("",!0),l(u,null,{default:a(()=>[l(s,null,{default:a(()=>[Te]),_:1}),l(s,{type:"primary",loading:e.loading,onClick:e.getListData},{default:a(()=>[qe]),_:1},8,["loading","onClick"]),l(s,{type:"text",icon:e.expand?"up":"down",onClick:t[5]||(t[5]=n=>e.expand=!e.expand)},{default:a(()=>[g(Z(e.expand?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1},8,["icon"])]),_:1})]),_:1})]),action:a(()=>[l(s,{type:"primary",icon:"plus-circle",onClick:e.handleCreate},{default:a(()=>[Re]),_:1},8,["onClick"])]),actionRight:a(()=>[l(L,{style:{"margin-left":"20px"}},{dropdown:a(()=>[l(C,null,{default:a(()=>[l(S,null,{default:a(()=>[Ue]),_:1}),l(S,null,{default:a(()=>[He]),_:1})]),_:1})]),default:a(()=>[l(s,null,{default:a(()=>[Ne,l(b,{name:"down"})]),_:1})]),_:1})]),page:a(()=>[l(N,{total:e.total,current:e.query.page,"page-size":e.query.size,"show-sizer":"","show-total":"",onChange:e.pageChange,onSizeChange:e.pageSizeChange},null,8,["total","current","page-size","onChange","onSizeChange"])]),default:a(()=>[l(D,{columns:e.columns,data:e.copyList,loading:e.loading,border:""},{roles:a(({row:n})=>[g(Z(e.roleMap[n.roles]),1)]),action:a(({row:n})=>[l(z,{type:"text",icon:"edit-square","is-icon":"",tooltip:"\u7F16\u8F91",onClick:p=>e.handleEdit(n)},null,8,["onClick"]),l(R,{type:"vertical"}),l(z,{type:"text",icon:"delete",color:"danger","is-icon":"",tooltip:"\u5220\u9664",confirm:"",onClick:p=>e.handleDelete(n)},null,8,["onClick"])]),_:1},8,["columns","data","loading"])]),_:1})])]),_:1}),l(P,{"model-value":e.modalVisible,title:`${e.pageStatus.isCreate?"\u65B0\u589E":"\u4FEE\u6539"}\u89D2\u8272`,onClosed:e.handleCancel},{footer:a(()=>[c("div",null,[l(s,{onClick:e.handleCancel},{default:a(()=>[Le]),_:1},8,["onClick"]),l(s,{type:"primary",loading:e.editLoading,onClick:e.handleSubmit},{default:a(()=>[Be]),_:1},8,["loading","onClick"])])]),default:a(()=>[e.modalVisible?(m(),w("div",Ee,[l(M,{ref:"formRef",model:e.user,rules:e.ruleValidate,"label-width":"100px","label-suffix":":"},{default:a(()=>[l(u,{label:"\u6240\u5C5E\u90E8\u95E8"},{default:a(()=>[l(W,{modelValue:e.user.depart,"onUpdate:modelValue":t[6]||(t[6]=n=>e.user.depart=n),data:e.deptTree,"title-key":"text"},null,8,["modelValue","data"])]),_:1}),l(u,{label:"\u59D3\u540D",prop:"realName"},{default:a(()=>[l(d,{modelValue:e.user.realName,"onUpdate:modelValue":t[7]||(t[7]=n=>e.user.realName=n),placeholder:"\u8F93\u5165\u59D3\u540D",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u7528\u6237\u540D",prop:"username"},{default:a(()=>[l(d,{modelValue:e.user.username,"onUpdate:modelValue":t[8]||(t[8]=n=>e.user.username=n),placeholder:"\u8F93\u5165\u767B\u5F55\u540D",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u90AE\u7BB1"},{default:a(()=>[l(d,{modelValue:e.user.email,"onUpdate:modelValue":t[9]||(t[9]=n=>e.user.email=n),placeholder:"\u8F93\u5165\u90AE\u7BB1",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"\u89D2\u8272"},{default:a(()=>[l(k,{modelValue:e.user.roles,"onUpdate:modelValue":t[10]||(t[10]=n=>e.user.roles=n),placeholder:"\u9009\u62E9\u89D2\u8272",clearable:""},{default:a(()=>[(m(!0),w(I,null,X(e.roleMap,(n,p)=>(m(),G(v,{key:p,label:n,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])):q("",!0)]),_:1},8,["model-value","title","onClosed"])]),_:1})}var $e=$(ze,[["render",We]]);export{$e as default};
